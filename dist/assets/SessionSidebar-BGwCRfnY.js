import{r as S,j as e,u as ce}from"./react-vendor-BOZDwKwV.js";import{W as $,aC as J,Q as V,w as A,B,ac as de,ad as me,ae as he,T as ue,F as xe,G as X,H as Y,z as g,X as _,E as fe,S as W,a as G,b as H,c as K,d as R,N as pe,y as ge,C as ve,r as je,s as Ne,av as be,u as we,aD as ye,aE as Ce}from"./index-Cmkaodfg.js";import{g as Z,h as Q,i as Se}from"./radix-ui-DhHtVSYQ.js";import{ai as Me,$ as Fe,Y as ke,X as Te,aB as De,V as Ae,aC as ze,aD as Ee,a7 as Be,au as Le,a8 as Ie}from"./icons-Cf9puwNc.js";import{Tree as Oe}from"./tree-CY2JL3NQ.js";const ee=S.forwardRef(({className:n,...u},x)=>e.jsx(Z,{className:$("grid gap-2",n),...u,ref:x}));ee.displayName=Z.displayName;const U=S.forwardRef(({className:n,...u},x)=>e.jsx(Q,{ref:x,className:$("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...u,children:e.jsx(Se,{className:"flex items-center justify-center",children:e.jsx(Me,{className:"h-3.5 w-3.5 fill-primary"})})}));U.displayName=Q.displayName;function Pe({sessions:n,onSessionSelect:u,selectedSessionId:x,formatDate:M,formatCwd:z,pathPrefix:F="",segmentsToStrip:i=0}){const{treeData:j,expandedIds:N}=S.useMemo(()=>{const r={sessions:[],children:new Map},D=F.trim()?F.trim().replace(/\/$/,""):"";n.forEach(f=>{if(!f.cwd)return;let y=f.cwd;D&&f.cwd.startsWith(D)&&(y=f.cwd.substring(D.length));let v=y.split("/").filter(Boolean);if(i>0&&v.length>i&&(v=v.slice(i)),v.length===0){r.sessions.push(f);return}let a=r;v.forEach((p,k)=>{a.children.has(p)||a.children.set(p,{path:v.slice(0,k+1).join("/"),sessions:[],children:new Map}),a=a.children.get(p)}),a.sessions.push(f)});const o=(f,y="")=>{const v=[];return Array.from(f.children.entries()).sort(([a],[p])=>a.localeCompare(p)).forEach(([a,p])=>{const k=y?`${y}/${a}`:a,l=o(p,k),t={id:`dir-${k}`,label:a,icon:e.jsx(Fe,{className:"h-4 w-4 text-blue-500"}),children:l};v.push(t)}),f.sessions.sort((a,p)=>new Date(p.lastModified).getTime()-new Date(a.lastModified).getTime()).forEach(a=>{v.push({id:a.id,label:a.name,data:a})}),v},E=o(r),c=new Set;if(x){const f=n.find(y=>y.id===x);if(f!=null&&f.cwd){let y=f.cwd;const v=F.trim()?F.trim().replace(/\/$/,""):"";v&&f.cwd.startsWith(v)&&(y=f.cwd.substring(v.length));let a=y.split("/").filter(Boolean);i>0&&a.length>i&&(a=a.slice(i));for(let p=0;p<a.length;p++){const k=a.slice(0,p+1).join("/");c.add(`dir-${k}`)}}}return{treeData:E,expandedIds:c}},[n,F,i,x]),w=(r,D,o)=>{const E=r.data;return E?e.jsx(J,{session:E,isSelected:D,onClick:o,formatDate:M,formatCwd:z}):null},O=r=>{r.id.startsWith("dir-")||u(r.id)};return e.jsx("div",{className:"directory-tree-container space-y-2","data-test":"directory-tree-container",children:e.jsx(Oe,{data:j,onItemClick:O,className:"directory-tree",defaultExpandedIds:N,selectedId:x,renderLeaf:w,"data-test":"directory-tree"})})}function Re({sessions:n,onSessionSelect:u,selectedSessionId:x,formatDate:M,formatCwd:z,segmentsToStrip:F=3,onNameUpdated:i}){return e.jsx("div",{"data-test":"session-list-view",className:"session-items space-y-2",children:n.map(j=>e.jsx(J,{session:j,isSelected:x===j.id,onClick:()=>u(j.id),formatDate:M,formatCwd:z,segmentsToStrip:F,onNameUpdated:i},j.id))})}const $e=[{value:"id",label:"Session ID"},{value:"name",label:"Session Name"},{value:"cwd",label:"Working Directory"},{value:"firstMessage",label:"First Message"}],q=[{value:"user",label:"User Messages",description:"Pure user messages (no tool content)"},{value:"assistant",label:"Assistant Responses",description:"Pure assistant responses (no thinking/tool blocks)"},{value:"thinking",label:"Thinking Blocks",description:"Messages containing thinking blocks"},{value:"tools",label:"Tool Calls/Results",description:"Messages containing tool_use or tool_result blocks"}],Ve=[{value:"lastModified",label:"Last Modified"},{value:"name",label:"Name"},{value:"messageCount",label:"Message Count"}],_e={fields:["name"],sortBy:"lastModified",sortOrder:"desc",pageSize:11},We={messageType:[],sortOrder:"desc",pageSize:50},se=S.forwardRef(({searchQuery:n,onSearchChange:u,onAdvancedSearch:x,onMessageSearch:M,className:z},F)=>{var b,C,L;const i=(L=(C=(b=V.getState().app)==null?void 0:b.claude)==null?void 0:C.ui)==null?void 0:L.advancedSearch,[j,N]=S.useState(!1),[w,O]=S.useState((i==null?void 0:i.activeTab)??"sessions"),[r,D]=S.useState({..._e,...i==null?void 0:i.sessionFilters}),[o,E]=S.useState({...We,...i==null?void 0:i.messageFilters});S.useEffect(()=>{var m,h,T;const s=V.getState();V.updateState({app:{...s.app,claude:{...(m=s.app)==null?void 0:m.claude,ui:{...(T=(h=s.app)==null?void 0:h.claude)==null?void 0:T.ui,advancedSearch:{activeTab:w,sessionFilters:r,messageFilters:o}}}}})},[w,r,o]);const c=S.useMemo(()=>{const{fields:s,messageTypes:m,sortBy:h,sortOrder:T,pageSize:I,...P}=r,ae=s&&(s.length!==1||s[0]!=="name"),te=m&&m.length>0,ie=Object.values(P).some(oe=>oe!==void 0),ne=ae||te||ie||(h!=="lastModified"||T!=="desc"),re=o.messageType&&o.messageType.length>0,le=o.after||o.before;return ne||(re||le)},[r,o]),f=(s,m)=>{D(h=>{const T=h.fields||[],I=m?[...T,s]:T.filter(P=>P!==s);return{...h,fields:I.length>0?I:void 0}})},y=(s,m)=>{E(h=>{const T=h.messageType||[],I=m?[...T,s]:T.filter(P=>P!==s);return{...h,messageType:I.length>0?I:void 0}})},v=(s,m)=>{D(h=>{const T=h.messageTypes||[],I=m?[...T,s]:T.filter(P=>P!==s);return{...h,messageTypes:I.length>0?I:void 0}})},a=(s,m)=>{D(h=>({...h,[s]:m}))},p=(s,m)=>{E(h=>({...h,[s]:m}))},k=()=>{w==="sessions"&&x?x(n,r):w==="messages"&&M&&M(n,o),N(!1)},l=()=>{w==="sessions"?D({fields:["name"],sortBy:"lastModified",sortOrder:"desc",pageSize:11}):E({messageType:[],sortOrder:"desc",pageSize:50})},t=s=>{s.key==="Enter"&&(w==="sessions"&&x?x(n,r):w==="messages"&&M&&M(n,o))},d=()=>{u("")};return e.jsx("div",{ref:F,className:$("sessions-search-container relative",z),"data-test":"sessions-search-container",children:e.jsxs("div",{className:"search-input-wrapper relative flex items-center gap-1","data-test":"sessions-search-input-wrapper",children:[e.jsx(ke,{className:"search-icon absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none z-10","data-test":"sessions-search-icon"}),e.jsx(A,{type:"text",placeholder:w==="sessions"?"Search sessions...":"Search messages...",value:n,onChange:s=>u(s.target.value),onKeyDown:t,className:$("search-input pl-9",n?"pr-16":"pr-10"),"data-test":"sessions-search-input"}),n&&e.jsx(B,{variant:"ghost",size:"icon",onClick:d,className:"clear-button absolute right-9 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0 hover:bg-muted","aria-label":"Clear search","data-test":"sessions-search-clear-button",children:e.jsx(Te,{className:"h-4 w-4"})}),c&&e.jsx("div",{className:$("filter-indicator absolute top-1/2 -translate-y-1/2 h-2 w-2 rounded-full bg-primary pointer-events-none z-10",n?"right-17":"right-11"),"data-test":"sessions-search-filter-indicator"}),e.jsxs(de,{open:j,onOpenChange:N,children:[e.jsx(me,{asChild:!0,children:e.jsx(B,{variant:"ghost",size:"icon",className:"expand-button absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0","aria-label":j?"Collapse advanced search":"Expand advanced search","data-test":"sessions-search-expand-button",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(he,{align:"start",side:"bottom",avoidCollisions:!0,className:"advanced-search-panel w-96 max-h-[70vh] overflow-y-auto","data-test":"sessions-advanced-search-panel",children:[e.jsx("div",{className:"panel-header space-y-2 pb-3 border-b","data-test":"sessions-panel-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Advanced Search"}),e.jsx(B,{variant:"ghost",size:"sm",onClick:l,className:"h-7 text-xs","data-test":"sessions-clear-filters-button",children:"Clear All"})]})}),e.jsxs(ue,{value:w,onValueChange:s=>O(s),className:"mt-3",children:[e.jsxs(xe,{className:"grid w-full grid-cols-2","data-test":"sessions-search-tabs",children:[e.jsx(X,{value:"sessions","data-test":"sessions-tab-sessions",children:"Sessions"}),e.jsx(X,{value:"messages","data-test":"sessions-tab-messages",children:"Messages"})]}),e.jsxs(Y,{value:"sessions",className:"space-y-4 mt-4","data-test":"sessions-tab-content-sessions",children:[e.jsxs("div",{className:"field-selection space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Search Fields"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Select fields to search (OR logic across fields)"}),e.jsx("div",{className:"fields-grid space-y-2",children:$e.map(s=>{var m;return e.jsxs("div",{className:"field-item flex items-center space-x-2",children:[e.jsx(_,{id:`field-${s.value}`,checked:(m=r.fields)==null?void 0:m.includes(s.value),onCheckedChange:h=>f(s.value,h===!0)}),e.jsx("label",{htmlFor:`field-${s.value}`,className:"text-sm cursor-pointer",children:s.label})]},s.value)})})]}),e.jsxs("div",{className:"message-types-selection space-y-2","data-test":"sessions-tab-message-types-section",children:[e.jsx(g,{className:"text-sm font-medium",children:"Message Types"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Filter by message type when searching in message content"}),e.jsx("div",{className:"message-types-grid space-y-2",children:q.map(s=>{var m;return e.jsxs("div",{className:"message-type-item flex items-center space-x-2",children:[e.jsx(_,{id:`session-msgtype-${s.value}`,checked:(m=r.messageTypes)==null?void 0:m.includes(s.value),onCheckedChange:h=>v(s.value,h===!0),"data-test":`sessions-tab-msgtype-${s.value}`}),e.jsxs("label",{htmlFor:`session-msgtype-${s.value}`,className:"text-sm cursor-pointer flex-1",children:[e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground block",children:s.description})]})]},s.value)})})]}),e.jsxs("div",{className:"active-filter space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Sessions Only"}),e.jsx(fe,{checked:r.isActive??!1,onCheckedChange:s=>a("isActive",s?!0:void 0)})]})]}),e.jsxs("div",{className:"message-count-filter space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Message Count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:"number",placeholder:"Min",min:"0",value:r.minMessages??"",onChange:s=>a("minMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),e.jsx(A,{type:"number",placeholder:"Max",min:"0",value:r.maxMessages??"",onChange:s=>a("maxMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"})]})]}),e.jsxs("div",{className:"date-range-filter space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Modified Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(g,{htmlFor:"session-date-after",className:"text-xs text-muted-foreground",children:"After"}),e.jsx(A,{id:"session-date-after",type:"datetime-local",value:r.modifiedAfter??"",onChange:s=>a("modifiedAfter",s.target.value||void 0),className:"h-8"})]}),e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(g,{htmlFor:"session-date-before",className:"text-xs text-muted-foreground",children:"Before"}),e.jsx(A,{id:"session-date-before",type:"datetime-local",value:r.modifiedBefore??"",onChange:s=>a("modifiedBefore",s.target.value||void 0),className:"h-8"})]})]})]}),e.jsxs("div",{className:"sorting-section space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Sort By"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{value:r.sortBy,onValueChange:s=>a("sortBy",s),children:[e.jsx(G,{className:"h-8 flex-1",children:e.jsx(H,{})}),e.jsx(K,{children:Ve.map(s=>e.jsx(R,{value:s.value,children:s.label},s.value))})]}),e.jsxs(W,{value:r.sortOrder,onValueChange:s=>a("sortOrder",s),children:[e.jsx(G,{className:"h-8 w-32",children:e.jsx(H,{})}),e.jsxs(K,{children:[e.jsx(R,{value:"desc",children:"Descending"}),e.jsx(R,{value:"asc",children:"Ascending"})]})]})]})]}),e.jsxs("div",{className:"pagination-section space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Results Per Page"}),e.jsx(A,{type:"number",min:"1",max:"100",value:r.pageSize??11,onChange:s=>a("pageSize",s.target.value?parseInt(s.target.value):11),className:"h-8"})]})]}),e.jsxs(Y,{value:"messages",className:"space-y-4 mt-4","data-test":"sessions-tab-content-messages",children:[e.jsxs("div",{className:"message-types-selection space-y-2","data-test":"sessions-message-types-section",children:[e.jsx(g,{className:"text-sm font-medium",children:"Message Types"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Filter by message type (searches across all sessions)"}),e.jsx("div",{className:"message-types-grid space-y-2",children:q.map(s=>{var m;return e.jsxs("div",{className:"message-type-item flex items-center space-x-2",children:[e.jsx(_,{id:`msgtype-${s.value}`,checked:(m=o.messageType)==null?void 0:m.includes(s.value),onCheckedChange:h=>y(s.value,h===!0),"data-test":`sessions-msgtype-${s.value}`}),e.jsxs("label",{htmlFor:`msgtype-${s.value}`,className:"text-sm cursor-pointer flex-1",children:[e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground block",children:s.description})]})]},s.value)})})]}),e.jsxs("div",{className:"date-range-filter space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Message Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(g,{htmlFor:"msg-date-after",className:"text-xs text-muted-foreground",children:"After"}),e.jsx(A,{id:"msg-date-after",type:"datetime-local",value:o.after??"",onChange:s=>p("after",s.target.value||void 0),className:"h-8"})]}),e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(g,{htmlFor:"msg-date-before",className:"text-xs text-muted-foreground",children:"Before"}),e.jsx(A,{id:"msg-date-before",type:"datetime-local",value:o.before??"",onChange:s=>p("before",s.target.value||void 0),className:"h-8"})]})]})]}),e.jsxs("div",{className:"sorting-section space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Sort Order"}),e.jsxs(W,{value:o.sortOrder,onValueChange:s=>p("sortOrder",s),children:[e.jsx(G,{className:"h-8",children:e.jsx(H,{})}),e.jsxs(K,{children:[e.jsx(R,{value:"desc",children:"Newest First"}),e.jsx(R,{value:"asc",children:"Oldest First"})]})]})]}),e.jsxs("div",{className:"pagination-section space-y-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Results Per Page"}),e.jsx(A,{type:"number",min:"1",max:"100",value:o.pageSize??50,onChange:s=>p("pageSize",s.target.value?parseInt(s.target.value):50),className:"h-8"})]})]})]}),e.jsxs("div",{className:"panel-footer flex items-center gap-2 pt-3 mt-4 border-t","data-test":"sessions-panel-footer",children:[e.jsx(B,{onClick:k,className:"flex-1",size:"sm","data-test":"sessions-apply-search-button",children:w==="sessions"?"Search Sessions":"Search Messages"}),e.jsx(B,{onClick:()=>N(!1),variant:"outline",size:"sm","data-test":"sessions-cancel-button",children:"Cancel"})]})]})]})]})})});se.displayName="SessionsSearch";function Ge({variant:n="ghost",size:u="icon",className:x="create-session-button",disabled:M=!1}){const z=ce(),[F,i]=S.useState(!1),j=async()=>{try{i(!0);const N=await pe.createSession();if(N.success&&N.sessionId)z(`/claude/${N.sessionId}`);else throw new Error(N.error||"Failed to create session")}catch(N){console.error("Failed to create session:",N)}finally{i(!1)}};return e.jsx(B,{variant:n,size:u,onClick:j,disabled:M||F,className:x,title:"Create New Session","data-test":"create-new-claude-session-button",children:e.jsx(Ae,{className:"h-4 w-4"})})}function Ze({sessions:n,loading:u,error:x,onSessionSelect:M,selectedSessionId:z,onRefresh:F,pagination:i,currentPage:j=1,onPageChange:N,onLoadMore:w,onSearch:O,onMessageSearch:r,onNameUpdated:D}){const[o,E]=S.useState(""),[c,f]=S.useState(null),y=l=>{const t=new Date(l);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},v=l=>l?l.replace(/^\/home\/[^/]+\//,"~/"):"",a=(l,t)=>{console.log("Advanced search triggered:",{query:l,filters:t}),f(t),O&&O(l,t)},p=(l,t)=>{console.log("Message search triggered:",{query:l,filters:t}),r&&r(l,t)},k=S.useMemo(()=>{if(O||!o.trim())return n;const l=o.toLowerCase();let t=n;if(c!=null&&c.fields&&c.fields.length>0?t=n.filter(d=>c.fields.some(b=>{var C,L;switch(b){case"id":return d.id.toLowerCase().includes(l);case"name":return d.name.toLowerCase().includes(l);case"cwd":return(C=d.cwd)==null?void 0:C.toLowerCase().includes(l);case"firstMessage":return(L=d.firstMessage)==null?void 0:L.toLowerCase().includes(l);default:return!1}})):t=n.filter(d=>d.name.toLowerCase().includes(l)||d.id.toLowerCase().includes(l)),c){if(c.isActive!==void 0&&(t=t.filter(d=>d.isActive===c.isActive)),c.minMessages!==void 0&&(t=t.filter(d=>d.messageCount>=c.minMessages)),c.maxMessages!==void 0&&(t=t.filter(d=>d.messageCount<=c.maxMessages)),c.modifiedAfter!==void 0){const d=new Date(c.modifiedAfter);t=t.filter(b=>new Date(b.lastModified)>=d)}if(c.modifiedBefore!==void 0){const d=new Date(c.modifiedBefore);t=t.filter(b=>new Date(b.lastModified)<=d)}c.sortBy&&(t=[...t].sort((d,b)=>{let C=0;switch(c.sortBy){case"name":C=d.name.localeCompare(b.name);break;case"messageCount":C=d.messageCount-b.messageCount;break;case"lastModified":default:C=new Date(d.lastModified).getTime()-new Date(b.lastModified).getTime();break}return c.sortOrder==="asc"?C:-C}))}return t},[n,o,c,O]);return e.jsx(ge,{storageKey:"session-sidebar-config",initialConfig:{viewMode:"list",pathPrefix:"",segmentsToStrip:3},children:(l,t,d)=>{const{viewMode:b,pathPrefix:C,segmentsToStrip:L}=l;return e.jsxs(ve,{className:"session-list-card h-full flex flex-col overflow-hidden","data-test":"session-sidebar-card",children:[e.jsxs(je,{className:"session-list-header flex flex-col space-y-3 pb-4 flex-shrink-0","data-test":"session-sidebar-header",children:[e.jsxs("div",{className:"header-top flex flex-row items-center justify-between","data-test":"session-sidebar-header-top",children:[e.jsx(Ne,{className:"text-xl",children:"Claude Sessions"}),e.jsxs("div",{className:"header-actions flex items-center gap-1","data-test":"session-sidebar-header-actions",children:[e.jsx(B,{variant:"ghost",size:"icon",onClick:F,disabled:u,className:"refresh-button","data-test":"session-sidebar-refresh-button",children:e.jsx(ze,{className:`h-4 w-4 ${u?"animate-spin":""}`})}),e.jsx(Ge,{disabled:u}),e.jsx(be,{disabled:u}),e.jsx(d,{icon:e.jsx(Ee,{className:"h-4 w-4"}),title:"View Options",variant:"ghost",size:"icon",contentClassName:"w-64",children:e.jsxs("div",{className:"view-options-content space-y-4",children:[e.jsxs("div",{className:"view-mode-selector space-y-3",children:[e.jsx(g,{className:"text-sm font-medium",children:"Display Mode"}),e.jsxs(ee,{value:b,onValueChange:s=>t({...l,viewMode:s}),children:[e.jsxs("div",{className:"view-option flex items-center space-x-2",children:[e.jsx(U,{value:"list",id:"view-list"}),e.jsx(g,{htmlFor:"view-list",className:"cursor-pointer",children:"List"})]}),e.jsxs("div",{className:"view-option flex items-center space-x-2",children:[e.jsx(U,{value:"tree",id:"view-tree"}),e.jsx(g,{htmlFor:"view-tree",className:"cursor-pointer",children:"Tree"})]})]})]}),e.jsxs("div",{className:"segments-to-strip-filter space-y-2",children:[e.jsx(g,{htmlFor:"segments-to-strip",className:"text-sm font-medium",children:"Segments to Strip"}),e.jsx(A,{id:"segments-to-strip",type:"number",min:"0",max:"10",value:L,onChange:s=>t({...l,segmentsToStrip:Number(s.target.value)}),className:"segments-to-strip-input"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strips first N path segments from session names"})]}),b==="tree"&&e.jsxs("div",{className:"path-prefix-filter space-y-2",children:[e.jsx(g,{htmlFor:"path-prefix",className:"text-sm font-medium",children:"Path Prefix (to strip)"}),e.jsx(A,{id:"path-prefix",type:"text",placeholder:"/home/user/path",value:C,onChange:s=>t({...l,pathPrefix:s.target.value}),className:"path-prefix-input"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strips this prefix from tree paths"})]})]})})]})]}),e.jsx(se,{searchQuery:o,onSearchChange:E,onAdvancedSearch:a,onMessageSearch:p})]}),e.jsxs(we,{className:"session-list-content flex-1 min-h-0 p-0 overflow-hidden flex flex-col","data-test":"session-sidebar-content",children:[e.jsx("div",{className:"sessions-container flex-1 overflow-hidden","data-test":"session-sidebar-sessions-container",children:e.jsxs(ye,{className:"session-scroll-area h-full w-full","data-test":"session-sidebar-scroll-area",children:[e.jsxs("div",{className:"space-y-2 min-w-max","data-test":"session-sidebar-sessions-list",children:[x&&e.jsx("div",{className:"error-message text-sm text-red-500 mb-2","data-test":"session-sidebar-error-message",children:x}),u&&k.length===0?e.jsx("div",{className:"loading-message text-sm text-muted-foreground","data-test":"session-sidebar-loading-message",children:"Loading sessions..."}):k.length===0?e.jsx("div",{className:"empty-state text-sm text-muted-foreground","data-test":"session-sidebar-empty-state",children:o?"No sessions match your search":"No sessions found"}):b==="tree"?e.jsx(Pe,{sessions:k,onSessionSelect:M,selectedSessionId:z,formatDate:y,formatCwd:v,pathPrefix:C,segmentsToStrip:L}):e.jsx(Re,{sessions:k,onSessionSelect:M,selectedSessionId:z,formatDate:y,formatCwd:v,segmentsToStrip:L,onNameUpdated:D})]}),e.jsx(Ce,{orientation:"horizontal"})]})}),i&&e.jsxs("div",{className:"pagination-controls flex flex-col gap-2 px-4 py-2 border-t flex-shrink-0","data-test":"session-sidebar-pagination-controls",children:[w&&j<i.totalPages&&e.jsxs(B,{variant:"outline",size:"sm",onClick:w,disabled:u,className:"load-more-button w-full","data-test":"session-sidebar-load-more-button",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Load More Sessions",e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",n.length," of ",i.totalCount,")"]})]}),N&&e.jsxs("div",{className:"pagination-nav flex items-center justify-between gap-2","data-test":"session-sidebar-pagination-nav",children:[e.jsxs(B,{variant:"outline",size:"sm",onClick:()=>N(j-1),disabled:j===1||u,className:"pagination-prev","data-test":"session-sidebar-pagination-prev-button",children:[e.jsx(Le,{className:"h-4 w-4 mr-1"}),"Prev"]}),e.jsxs("div",{className:"pagination-info text-xs text-muted-foreground","data-test":"session-sidebar-pagination-info",children:["Page ",i.page," of ",i.totalPages]}),e.jsxs(B,{variant:"outline",size:"sm",onClick:()=>N(j+1),disabled:j>=i.totalPages||u,className:"pagination-next","data-test":"session-sidebar-pagination-next-button",children:["Next",e.jsx(Ie,{className:"h-4 w-4 ml-1"})]})]})]})]})]})}})}export{Ze as S};
