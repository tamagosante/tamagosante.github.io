import{r as n}from"./react-vendor-BOZDwKwV.js";import{D as p}from"./DragDropManager-BCQ9eUTy.js";function S(u,e){const[o,D]=n.useState({isDragging:!1,item:null,startPosition:{x:0,y:0},currentPosition:{x:0,y:0},offset:{x:0,y:0},currentDropZone:null,potentialDropZone:null,sortIndex:null}),t=n.useRef(null);if(!t.current){const s={...e,onDragStart:f=>{var g,i;const r=(g=e==null?void 0:e.onDragStart)==null?void 0:g.call(e,f);return D(((i=t.current)==null?void 0:i.getState())||o),r},onDragMove:f=>{var r,g;(r=e==null?void 0:e.onDragMove)==null||r.call(e,f),D(((g=t.current)==null?void 0:g.getState())||o)},onDragEnd:f=>{var r,g;(r=e==null?void 0:e.onDragEnd)==null||r.call(e,f),D(((g=t.current)==null?void 0:g.getState())||o)},onDrop:f=>{var r;(r=e==null?void 0:e.onDrop)==null||r.call(e,f)}};t.current=new p(u,s)}return n.useEffect(()=>()=>{var s;(s=t.current)==null||s.destroy(),t.current=null},[]),n.useEffect(()=>{t.current&&u&&t.current.updateConfig(u)},[u]),{manager:t.current,state:o}}function x(u,e,o){const[D,t]=n.useState(null),s=n.useRef(o);n.useEffect(()=>{s.current=o},[o]);const f=n.useCallback(r=>{t(r)},[]);return n.useEffect(()=>{if(!(!u||!D))return u.registerDraggable(e,D,s.current),()=>{u.unregisterDraggable(e)}},[u,e,D]),f}function m(u,e,o,D){const[t,s]=n.useState(null),f=n.useRef(D),r=n.useRef(o);n.useEffect(()=>{f.current=D,r.current=o},[D,o]);const g=n.useCallback(i=>{s(i)},[]);return n.useEffect(()=>{if(!(!u||!t))return u.registerDropZone(e,t,r.current,f.current),()=>{u.unregisterDropZone(e)}},[u,e,t]),g}export{x as a,m as b,S as u};
