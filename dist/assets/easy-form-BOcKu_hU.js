import{j as s}from"./react-vendor-BOZDwKwV.js";import{u as q}from"./forms-DZWYrWtp.js";import{F as E,a as I,b as V,c as $,d as Q,e as x,f as R}from"./form-xiPnKTSn.js";import{B,W as d,w as D,S as M,a as T,b as W,c as X,d as z,X as A}from"./index-Cmkaodfg.js";function G({fields:b,onSubmit:h,submitLabel:p="Submit",className:g,defaultValues:j={},loading:l=!1,resetOnSubmit:w=!1,submitButtonPosition:y="bottom",layout:N="single",hideSubmitButton:F=!1,formId:C}){const c=q({defaultValues:j}),k=async e=>{try{await h(e),w&&c.reset()}catch(a){console.error("Form submission error:",a)}},v=e=>{const a={};if(e.required&&(a.required=`${e.label} is required`),e.validation){const{minLength:o,maxLength:m,min:r,max:t,pattern:n,custom:i}=e.validation;o&&(a.minLength={value:o,message:`${e.label} must be at least ${o} characters`}),m&&(a.maxLength={value:m,message:`${e.label} must be no more than ${m} characters`}),r!==void 0&&(a.min={value:r,message:`${e.label} must be at least ${r}`}),t!==void 0&&(a.max={value:t,message:`${e.label} must be no more than ${t}`}),n&&(a.pattern={value:n,message:`${e.label} format is invalid`}),i&&(a.validate=u=>{const f=i(u);return f===!0?!0:typeof f=="string"?f:`${e.label} is invalid`})}return a},L=(e,a)=>{const{name:o,type:m,placeholder:r,options:t,className:n,description:i}=e;switch(m){case"checkbox":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(x,{children:s.jsx(A,{checked:a.value,onCheckedChange:a.onChange,className:n})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx($,{className:"text-sm font-normal cursor-pointer",children:e.label}),i&&s.jsx(R,{className:"text-xs",children:i})]})]});case"select":return s.jsxs(M,{onValueChange:a.onChange,value:a.value,children:[s.jsx(x,{children:s.jsx(T,{className:n,children:s.jsx(W,{placeholder:r||`Select ${e.label.toLowerCase()}`})})}),s.jsx(X,{children:t==null?void 0:t.map(u=>s.jsx(z,{value:u.value,children:u.label},u.value))})]});case"textarea":return s.jsx(x,{children:s.jsx("textarea",{...c.register(o,v(e)),placeholder:r,className:d("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n)})});default:return s.jsx(x,{children:s.jsx(D,{type:m,placeholder:r,className:n,...c.register(o,v(e))})})}},S=s.jsx(B,{type:"submit",disabled:l,className:d("submit-button w-full",l&&"opacity-50",N==="two-column"&&"col-span-2"),children:l?"Submitting...":p});return s.jsx(E,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(k),className:g,id:C,children:[!F&&y==="top"&&S,s.jsx("div",{className:d(N==="two-column"?"grid grid-cols-2 gap-x-4 gap-y-3":"space-y-6"),children:b.map(e=>s.jsx(I,{control:c.control,name:e.name,rules:v(e),render:({field:a})=>s.jsxs(V,{className:d("form-field",e.type==="checkbox"&&"flex flex-row items-start space-x-0 space-y-0"),children:[e.type!=="checkbox"&&s.jsx($,{className:"form-label",children:e.label}),L(e,a),s.jsx(Q,{className:"form-error"})]})},e.name))}),!F&&y==="bottom"&&S]})})}function U({fields:b,onSubmit:h,submitLabel:p="Submit",className:g}){const j=b.map(l=>({...l,type:l.type||"text"}));return s.jsx(G,{fields:j,onSubmit:h,submitLabel:p,className:g})}export{G as E,U as Q};
