import{r as s,j as e}from"./react-vendor-Byz07MLO.js";import{y as l,a as i}from"./index-BbgB-sev.js";import{J as v}from"./JsonViewerApp-BHZpouoC.js";import{t}from"./utils-DjFvUtuq.js";import{C as w,e as p,U as m,D as S,R as k}from"./icons-Detj0uxE.js";import"./radix-ui-B6r6BEmy.js";import"./ui-utils-BxIQ3qGg.js";function z(){const[u,x]=s.useState(l.getState()),[n,d]=s.useState(!1);s.useEffect(()=>{const a=l.getState$().subscribe(c=>{x(c)});return()=>a.unsubscribe()},[]);const b=s.useCallback(()=>{const a=l.export();navigator.clipboard.writeText(a),t.success("Global state copied to clipboard")},[]),h=s.useCallback(()=>{const a=l.export();navigator.clipboard.writeText(a),d(!0),setTimeout(()=>d(!1),2e3),t.success("State copied to clipboard")},[]),f=s.useCallback(async()=>{try{const a=await navigator.clipboard.readText();l.import(a)?t.success("Global state updated from clipboard"):t.error("Invalid JSON format in clipboard")}catch{t.error("Failed to read from clipboard")}},[]),g=s.useCallback(()=>{confirm("Are you sure you want to reset the global state? This cannot be undone.")&&(l.reset(),t.success("Global state has been cleared"))},[]),j=s.useCallback(()=>{const a=l.export(),c=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(c),o=document.createElement("a");o.href=r,o.download=`global-state-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),t.success("State downloaded as JSON file")},[]),C=s.useCallback(()=>{const a=document.createElement("input");a.type="file",a.accept="application/json",a.onchange=async c=>{var o;const r=(o=c.target.files)==null?void 0:o[0];if(r)try{const N=await r.text();l.import(N)?t.success(`Global state updated from ${r.name}`):t.error("Invalid JSON format in file")}catch{t.error("Failed to read file")}},a.click()},[]);return e.jsxs("div",{className:"page-global-state h-full flex flex-col p-6 gap-4",children:[e.jsxs("div",{className:"header-section flex flex-col gap-4",children:[e.jsxs("div",{className:"title-section",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Global State Manager"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"View and edit the application's global state. Changes are persisted to localStorage."})]}),e.jsxs("div",{className:"actions-toolbar flex gap-2 flex-wrap",children:[e.jsxs(i,{onClick:h,variant:"outline",size:"sm",className:"gap-2",children:[n?e.jsx(w,{className:"w-4 h-4"}):e.jsx(p,{className:"w-4 h-4"}),n?"Copied!":"Copy"]}),e.jsxs(i,{onClick:b,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Export to Clipboard"]}),e.jsxs(i,{onClick:f,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Import from Clipboard"]}),e.jsxs(i,{onClick:j,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Download JSON"]}),e.jsxs(i,{onClick:C,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Upload JSON"]}),e.jsxs(i,{onClick:g,variant:"destructive",size:"sm",className:"gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Reset State"]})]})]}),e.jsx("div",{className:"viewer-section flex-1 overflow-auto border rounded-lg p-4 bg-muted/30",children:e.jsx(v,{data:u})}),e.jsx("div",{className:"info-footer text-xs text-muted-foreground",children:e.jsx("p",{children:"ðŸ’¡ Tip: Changes are automatically saved to localStorage. Use the reset button to clear all data."})})]})}export{z as GlobalStatePage};
