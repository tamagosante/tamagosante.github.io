import{r,j as t}from"./react-vendor-Byz07MLO.js";import{V as A,I,S as V,h as _,i as E,j as F,k as H,a as D}from"./index-BEUYSeX_.js";import{T as q,a as G,b as T,c as J,d as K,e as B}from"./table-Cr_drED-.js";function Q({data:x,columns:f,initialSortBy:l,initialSortOrder:o="asc",initialPageSize:u=10,enableSearch:g=!0,enableFiltering:P=!0}){const[n,m]=r.useState({data:x,columns:f,sortBy:l,sortOrder:o,currentPage:1,pageSize:u,searchTerm:"",filters:{}});r.useMemo(()=>{m(s=>({...s,data:x,columns:f}))},[x,f]);const w=r.useCallback(s=>{m(a=>({...a,sortBy:s,sortOrder:a.sortBy===s&&a.sortOrder==="asc"?"desc":"asc",currentPage:1}))},[]),d=r.useCallback(s=>{m(a=>({...a,currentPage:s}))},[]),j=r.useCallback(s=>{m(a=>({...a,pageSize:s,currentPage:1}))},[]),h=r.useCallback(s=>{m(a=>({...a,searchTerm:s,currentPage:1}))},[]),p=r.useCallback((s,a)=>{m(v=>({...v,filters:{...v.filters,[s]:a},currentPage:1}))},[]),y=r.useCallback(()=>{m(s=>({...s,filters:{},searchTerm:"",currentPage:1}))},[]),e=r.useCallback(()=>{m({data:x,columns:f,sortBy:l,sortOrder:o,currentPage:1,pageSize:u,searchTerm:"",filters:{}})},[x,f,l,o,u]),i=r.useMemo(()=>({sort:w,setPage:d,setPageSize:j,setSearchTerm:h,setFilter:p,clearFilters:y,reset:e}),[w,d,j,h,p,y,e]),c=r.useMemo(()=>{let s=n.data;if(g&&n.searchTerm){const b=n.searchTerm.toLowerCase();s=n.data.filter(k=>n.columns.some(S=>{const C=S.accessor?S.accessor(k):k[S.key];return String(C).toLowerCase().includes(b)}))}P&&Object.keys(n.filters).length>0&&(s=s.filter(b=>Object.entries(n.filters).every(([k,S])=>{if(!S)return!0;const C=n.columns.find(L=>L.key===k),N=C!=null&&C.accessor?C.accessor(b):b[k];return String(N).toLowerCase().includes(String(S).toLowerCase())})));const a=[...s];if(n.sortBy){const b=n.columns.find(k=>k.key===n.sortBy);a.sort((k,S)=>{const C=b!=null&&b.accessor?b.accessor(k):k[n.sortBy],N=b!=null&&b.accessor?b.accessor(S):S[n.sortBy];return C<N?n.sortOrder==="asc"?-1:1:C>N?n.sortOrder==="asc"?1:-1:0})}const v=a.length,O=Math.ceil(v/n.pageSize),z=(n.currentPage-1)*n.pageSize,M=Math.min(z+n.pageSize,v),R=a.slice(z,M);return{filteredData:s,sortedData:a,paginatedData:R,totalPages:O,totalItems:v,startIndex:z,endIndex:M}},[n,g,P]);return{state:n,actions:i,computed:c}}function U({data:x,getRowId:f=(o,u)=>u,multiSelect:l=!0}){const[o,u]=r.useState(new Set),g=r.useMemo(()=>x.map((c,s)=>f(c,s)),[x,f]),P=r.useMemo(()=>x.filter((c,s)=>o.has(f(x[s],s))),[x,o,f]),n=r.useCallback(c=>{u(s=>{const a=new Set(l?s:[]);return a.add(c),a})},[l]),m=r.useCallback(c=>{u(s=>{const a=new Set(s);return a.delete(c),a})},[]),w=r.useCallback(c=>{u(s=>{if(s.has(c)){const a=new Set(s);return a.delete(c),a}else{const a=new Set(l?s:[]);return a.add(c),a}})},[l]),d=r.useCallback(()=>{l&&u(new Set(g))},[g,l]),j=r.useCallback(()=>{u(new Set)},[]),h=r.useCallback(()=>{l&&u(c=>c.size===g.length?new Set:new Set(g))},[g,l]),p=r.useCallback(c=>o.has(c),[o]),y=r.useCallback(()=>l&&g.length>0&&g.every(c=>o.has(c)),[o,g,l]),e=r.useCallback(()=>l&&o.size>0&&o.size<g.length,[o,g,l]),i=r.useMemo(()=>({selectRow:n,deselectRow:m,toggleRow:w,selectAll:d,deselectAll:j,toggleAll:h,isSelected:p,isAllSelected:y,isPartiallySelected:e}),[n,m,w,d,j,h,p,y,e]);return{selectedRows:o,selectedItems:P,actions:i}}function Z({enableSelection:x=!0,selectionOptions:f={},...l}){const o=Q(l),u=U({data:o.computed.paginatedData,...f});return r.useMemo(()=>({...o,selection:u}),[o,u])}function $({table:x,className:f,showSearch:l=!0,showPagination:o=!0,showPageSize:u=!0,searchPlaceholder:g="Search...",pageSizeOptions:P=[10,20,50,100],emptyMessage:n="No results found.",loadingMessage:m="Loading...",isLoading:w=!1}){const{state:d,actions:j,computed:h,selection:p}=x,y=r.useCallback((e,i)=>i.accessor?i.accessor(e):e[i.key],[]);return t.jsxs("div",{className:A("flex flex-col space-y-4",f),children:[(l||u)&&t.jsxs("div",{className:"table-controls flex items-center justify-between gap-4 flex-shrink-0",children:[l&&t.jsx("div",{className:"search-container flex-1 max-w-sm",children:t.jsx(I,{placeholder:g,value:d.searchTerm,onChange:e=>j.setSearchTerm(e.target.value),className:"table-search"})}),u&&t.jsxs("div",{className:"page-size-container flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Show"}),t.jsxs(V,{value:d.pageSize.toString(),onValueChange:e=>j.setPageSize(parseInt(e)),children:[t.jsx(_,{className:"page-size-select w-auto",children:t.jsx(E,{})}),t.jsx(F,{children:P.map(e=>t.jsx(H,{value:e.toString(),children:e},e))})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"entries"})]})]}),t.jsx("div",{className:"table-wrapper flex-1 rounded-md border overflow-hidden min-h-0 lg:min-h-0",children:t.jsx("div",{className:"overflow-auto h-full min-h-[400px] lg:min-h-0",children:t.jsxs(q,{children:[t.jsx(G,{children:t.jsx(T,{children:d.columns.map(e=>{const i=d.sortBy===e.key?d.sortOrder:!1;return t.jsx(J,{sortable:e.sortable!==!1,sorted:i,onClick:e.sortable!==!1?()=>j.sort(e.key):void 0,style:e.width?{width:e.width}:void 0,children:e.header},String(e.key))})})}),t.jsx(K,{children:w?t.jsx(T,{children:t.jsx(B,{colSpan:d.columns.length,className:"table-loading h-24 text-center",children:m})}):h.paginatedData.length===0?t.jsx(T,{children:t.jsx(B,{colSpan:d.columns.length,className:"table-empty h-24 text-center",children:n})}):h.paginatedData.map((e,i)=>{const c=p.actions.isSelected(i);return t.jsx(T,{selected:c,clickable:!0,onClick:()=>p.actions.toggleRow(i),children:d.columns.map(s=>t.jsx(B,{className:"table-cell",children:y(e,s)},String(s.key)))},i)})})]})})}),o&&h.totalPages>1&&t.jsxs("div",{className:"table-pagination flex items-center justify-between flex-shrink-0",children:[t.jsxs("div",{className:"pagination-info text-sm text-muted-foreground",children:["Showing ",h.startIndex+1," to ",h.endIndex," of ",h.totalItems," entries"]}),t.jsxs("div",{className:"pagination-controls flex items-center gap-2",children:[t.jsx(D,{variant:"outline",size:"sm",onClick:()=>j.setPage(d.currentPage-1),disabled:d.currentPage<=1,children:"Previous"}),t.jsx("div",{className:"pagination-pages flex items-center gap-1",children:Array.from({length:h.totalPages},(e,i)=>i+1).filter(e=>{const i=d.currentPage;return e===1||e===h.totalPages||e>=i-1&&e<=i+1}).map((e,i,c)=>t.jsxs(r.Fragment,{children:[i>0&&c[i-1]!==e-1&&t.jsx("span",{className:"px-2 text-muted-foreground",children:"..."}),t.jsx(D,{variant:d.currentPage===e?"default":"outline",size:"sm",onClick:()=>j.setPage(e),children:e})]},e))}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>j.setPage(d.currentPage+1),disabled:d.currentPage>=h.totalPages,children:"Next"})]})]}),p.selectedRows.size>0&&t.jsxs("div",{className:"selection-summary text-sm text-muted-foreground flex-shrink-0",children:[p.selectedRows.size," of ",h.paginatedData.length," rows selected"]})]})}export{$ as D,Z as u};
