import{j as e,d as Se,r,h as rs,u as is}from"./react-vendor-Byz07MLO.js";import{t as U}from"./utils-DjFvUtuq.js";import{V as F,B as me,aW as Ie,a as p,w as ze,aX as ls,r as ns,C as ue,b as xe,c as fe,l as ge,L as T,S as he,h as pe,i as ve,j as je,k as W,I as J,e as ye,av as os,aY as ds,aZ as cs,a_ as ms,ac as ke,s as us,M as xs,T as fs}from"./index-BbgB-sev.js";import{G as L,aY as Z,M as Me,aZ as gs,c as hs,T as ps,F as vs,a_ as js,a$ as ys,a5 as ks,b0 as Ns,l as bs,X as Ne,V as Cs,O as ws,e as Ss}from"./icons-Detj0uxE.js";import{Tree as Is}from"./tree-C6vP2RM6.js";import"./radix-ui-B6r6BEmy.js";import"./ui-utils-BxIQ3qGg.js";const be=3,zs={template:"bg-purple-500/20 text-purple-700 dark:text-purple-300 border-purple-500/30",bug:"bg-red-500/20 text-red-700 dark:text-red-300 border-red-500/30",experiment:"bg-blue-500/20 text-blue-700 dark:text-blue-300 border-blue-500/30",archive:"bg-gray-500/20 text-gray-700 dark:text-gray-300 border-gray-500/30"};function Ms({fork:t,isSelected:c=!1,onClick:l,onToggleFavorite:a,onEdit:d,onDelete:m,sessionName:j,messageCount:y,onTagClick:f,onCategoryClick:n}){var w,S;const b=()=>{l==null||l(t)},u=o=>{o.stopPropagation(),a==null||a(t)},k=o=>{o.stopPropagation(),d==null||d(t)},v=o=>{o.stopPropagation(),m==null||m(t)},i=o=>{o.stopPropagation(),t.category&&n&&n(t.category)},N=(o,h)=>{o.stopPropagation(),f==null||f(h)},C=((w=t.tags)==null?void 0:w.slice(0,be))??[],x=(((S=t.tags)==null?void 0:S.length)??0)-be;return e.jsxs("div",{"data-test":"fork-list-item",className:F("fork-list-item group relative p-3 rounded-lg border cursor-pointer transition-colors",c?"bg-primary/10 border-primary":"hover:bg-accent border-transparent hover:border-border"),onClick:b,children:[e.jsxs("div",{"data-test":"fork-list-item-header",className:"fork-list-item-header flex items-start gap-2",children:[e.jsx(L,{size:16,className:"mt-0.5 flex-shrink-0 text-muted-foreground","data-test":"fork-list-item-icon"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{"data-test":"fork-list-item-name",className:"fork-list-item-name font-medium text-sm truncate",children:t.sessionName||t.description||"Unnamed Fork"}),t.isFavorite&&e.jsx(Z,{size:12,className:"flex-shrink-0 fill-yellow-400 text-yellow-400","data-test":"fork-list-item-favorite-icon"})]}),j&&e.jsx("div",{"data-test":"fork-list-item-session",className:"fork-list-item-session text-xs text-muted-foreground truncate",children:j}),(t.category||t.tags&&t.tags.length>0)&&e.jsxs("div",{"data-test":"fork-list-item-badges",className:"flex flex-wrap items-center gap-1 mt-1",children:[t.category&&e.jsx(me,{"data-test":"fork-list-item-category",variant:"outline",className:F("text-[10px] px-1.5 py-0 h-4",zs[t.category],n&&"cursor-pointer hover:opacity-80"),onClick:n?i:void 0,children:t.category}),C.map(o=>e.jsx(me,{"data-test":"fork-list-item-tag",variant:"secondary",className:F("text-[10px] px-1.5 py-0 h-4 bg-secondary/50",f&&"cursor-pointer hover:bg-secondary/80"),onClick:f?h=>N(h,o):void 0,children:o},o)),x>0&&e.jsxs("span",{"data-test":"fork-list-item-tags-overflow",className:"text-[10px] text-muted-foreground",children:["+",x," more"]})]})]})]}),e.jsxs("div",{"data-test":"fork-list-item-meta",className:"fork-list-item-meta mt-2 flex items-center gap-3 text-xs text-muted-foreground",children:[y!==void 0&&e.jsxs("span",{className:"flex items-center gap-1","data-test":"fork-list-item-message-count",children:[e.jsx(Me,{size:10}),y," messages"]}),e.jsxs("span",{className:"flex items-center gap-1","data-test":"fork-list-item-date",children:[e.jsx(gs,{size:10}),Ie(t.forkedAt)]})]}),e.jsxs("div",{"data-test":"fork-list-item-actions",className:F("fork-list-item-actions absolute right-2 top-2 flex gap-1","opacity-0 group-hover:opacity-100 transition-opacity"),children:[a&&e.jsx(p,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,"data-test":"fork-list-item-favorite-btn",title:t.isFavorite?"Remove from favorites":"Add to favorites",children:e.jsx(Z,{size:12,className:F(t.isFavorite&&"fill-yellow-400 text-yellow-400")})}),d&&e.jsx(p,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:k,"data-test":"fork-list-item-edit-btn",title:"Edit fork",children:e.jsx(hs,{size:12})}),m&&e.jsx(p,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:text-destructive",onClick:v,"data-test":"fork-list-item-delete-btn",title:"Delete fork",children:e.jsx(ps,{size:12})})]})]})}function Ts(t){switch(t){case"user":return e.jsx(ks,{size:10,className:"text-primary"});case"assistant":return e.jsx(ys,{size:10,className:"text-green-500"});case"tool_result":return e.jsx(js,{size:10,className:"text-orange-500"});default:return e.jsx(Me,{size:10,className:"text-muted-foreground"})}}function Ce({message:t}){return e.jsxs("div",{"data-test":"fork-message-preview",className:"flex items-start gap-1.5 text-xs text-muted-foreground py-0.5",children:[e.jsx("span",{className:"flex-shrink-0 mt-0.5",children:Ts(t.entryType)}),e.jsx("span",{className:"truncate",children:t.preview||"(empty)"})]})}function Te(t){const l=!!t.forkedAt?e.jsx(L,{size:14,className:"text-muted-foreground"}):e.jsx(vs,{size:14,className:"text-muted-foreground"});return{id:t.sessionId,label:t.customName||t.name||`Session ${t.sessionId.slice(0,8)}`,icon:l,data:t,children:t.children.map(Te)}}function Fe(t){const c=new Set([t.sessionId]);for(const l of t.children)Fe(l).forEach(d=>c.add(d));return c}function Fs({tree:t,selectedSessionId:c,loading:l=!1,error:a,onSessionSelect:d,showMessages:m=!1}){const j=Se(),y=r.useMemo(()=>t?[Te(t)]:[],[t]),f=r.useMemo(()=>t?Fe(t):new Set,[t]),n=u=>{d?d(u.id):j(`/claude/${u.id}`)},b=(u,k,v)=>{const i=u.data,N=m&&(i==null?void 0:i.inheritedMessages)&&i.inheritedMessages.length>0,C=m&&(i==null?void 0:i.messages)&&i.messages.length>0;return e.jsxs("div",{"data-test":"fork-tree-node",className:F("fork-tree-node flex flex-col py-2 px-3 hover:bg-accent hover:text-accent-foreground cursor-pointer rounded-sm transition-colors",k&&"bg-primary/10 border border-primary"),onClick:v,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"fork-tree-node-icon w-4 h-4 mr-2 flex-shrink-0"}),u.icon&&e.jsx("div",{className:"fork-tree-node-custom-icon mr-2 flex-shrink-0","data-test":"fork-tree-node-icon",children:u.icon}),e.jsxs("div",{className:"fork-tree-node-content flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"fork-tree-node-label truncate","data-test":"fork-tree-node-label",children:u.label}),(i==null?void 0:i.isFavorite)&&e.jsx(Z,{size:12,className:"flex-shrink-0 fill-yellow-400 text-yellow-400","data-test":"fork-tree-node-favorite"}),(i==null?void 0:i.messageCount)!==void 0&&e.jsxs("span",{className:"text-xs text-muted-foreground","data-test":"fork-tree-node-message-count",children:["(",i.messageCount,")"]})]}),(i==null?void 0:i.forkedAt)&&e.jsx("div",{className:"text-xs text-muted-foreground","data-test":"fork-tree-node-meta",children:Ie(i.forkedAt)})]})]}),N&&e.jsxs("div",{"data-test":"fork-tree-node-inherited-messages",className:"fork-tree-node-inherited-messages mt-2 ml-6 pl-2 border-l-2 border-muted-foreground/30 space-y-0.5",children:[e.jsx("div",{className:"text-xs text-muted-foreground/70 font-medium mb-1",children:"Inherited from parent:"}),i.inheritedMessages.slice(0,3).map(x=>e.jsx(Ce,{message:x},x.uuid)),i.inheritedMessages.length>3&&e.jsxs("div",{className:"text-xs text-muted-foreground italic",children:["+",i.inheritedMessages.length-3," more..."]})]}),C&&e.jsxs("div",{"data-test":"fork-tree-node-messages",className:"fork-tree-node-messages mt-2 ml-6 pl-2 border-l-2 border-primary/30 space-y-0.5",children:[N&&e.jsx("div",{className:"text-xs text-muted-foreground/70 font-medium mb-1",children:"New in this fork:"}),i.messages.slice(0,5).map(x=>e.jsx(Ce,{message:x},x.uuid)),i.messages.length>5&&e.jsxs("div",{className:"text-xs text-muted-foreground italic",children:["+",i.messages.length-5," more..."]})]})]})};return l?e.jsx("div",{"data-test":"fork-tree-loading",className:"fork-tree-loading flex items-center justify-center h-full",children:e.jsx("div",{className:"text-muted-foreground animate-pulse",children:"Loading fork tree..."})}):a?e.jsx("div",{"data-test":"fork-tree-error",className:"fork-tree-error flex items-center justify-center h-full text-destructive",children:a}):!t||y.length===0?e.jsxs("div",{"data-test":"fork-tree-empty",className:"fork-tree-empty flex flex-col items-center justify-center h-full text-muted-foreground",children:[e.jsx(L,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{children:"No fork tree available"}),e.jsx("p",{className:"text-sm",children:"Select a session to view its fork hierarchy"})]}):e.jsx("div",{"data-test":"fork-tree-visualization",className:"fork-tree-visualization h-full",children:e.jsx(Is,{data:y,onItemClick:n,defaultExpandedIds:f,selectedId:c,renderLeaf:b,className:"p-2"})})}function Es(t){const[c,l]=r.useState(null),[a,d]=r.useState(0),[m,j]=r.useState(!1),[y,f]=r.useState(null),n=r.useCallback(async(u,k)=>{j(!0),f(null);const v={includeMessages:t==null?void 0:t.includeMessages,messageTypes:t==null?void 0:t.messageTypes,messageLimit:t==null?void 0:t.messageLimit,...k};try{const i=await ze.getForkTree(u,v);l(i.root),d(i.totalNodes)}catch(i){console.error("[useForkTree] Failed to load fork tree:",{sessionId:u,options:v,error:i,errorMessage:i instanceof Error?i.message:"Unknown error",timestamp:new Date().toISOString()}),f(i instanceof Error?i.message:"Failed to load fork tree"),l(null),d(0)}finally{j(!1)}},[t==null?void 0:t.includeMessages,t==null?void 0:t.messageTypes,t==null?void 0:t.messageLimit]),b=r.useCallback(()=>{l(null),d(0),f(null)},[]);return{tree:c,totalNodes:a,loading:m,error:y,loadTree:n,clearTree:b}}const we=[{value:"template",label:"Template"},{value:"bug",label:"Bug"},{value:"experiment",label:"Experiment"},{value:"archive",label:"Archive"}];function Ee(t,c){if(!t)return null;if(t.sessionId===c)return t;for(const l of t.children){const a=Ee(l,c);if(a)return a}return null}function $s(){const[t]=rs(),{forkId:c}=is(),l=Se(),[a,d]=r.useState(null),[m,j]=r.useState(null),[y,f]=r.useState(!1),[n,b]=r.useState(null),[u,k]=r.useState(""),[v,i]=r.useState(""),[N,C]=r.useState(void 0),[x,w]=r.useState([]),[S,o]=r.useState(""),[h,q]=r.useState(!1),[B,Pe]=r.useState(!0),[G,Ae]=r.useState(void 0),[R,Q]=r.useState(""),E=t.get("sessionId"),{forks:P,loading:H,error:O,pagination:I,currentPage:A,favoritesOnly:ee,refreshForks:V,loadForks:Y,toggleFavoritesOnly:se,toggleFavorite:te,updateFork:ae,deleteFork:re}=ls({loadOnMount:!0,parentSessionId:E??void 0,filterByCategory:G,filterByTag:R||void 0,pageSize:20}),{tree:_,loading:Le,error:Be,loadTree:$}=Es({includeMessages:B,messageTypes:"user,assistant",messageLimit:10}),{messages:ie,sessionDetails:z,metadata:Re,loading:Ve,pagination:_e,loadOlderMessages:$e,refreshSession:le,addOptimisticMessage:De,removeOptimisticMessage:Ue}=ns(m,{loadOnMount:!0,subscribeToSSE:!0}),ne=r.useMemo(()=>{const s=Math.round(window.innerWidth*.6),g=Math.round(window.innerHeight*.8),M=Math.round((window.innerWidth-s)/2),de=Math.round((window.innerHeight-g)/2);return{size:{width:s,height:g},position:{x:M,y:de}}},[]),K=r.useMemo(()=>!m||!_?null:Ee(_,m),[m,_]);r.useEffect(()=>{if(c&&P.length>0){const s=P.find(g=>String(g.id)===c);s&&(a==null?void 0:a.id)!==s.id&&d(s)}},[c,P,a==null?void 0:a.id]),r.useEffect(()=>{const s=(a==null?void 0:a.sessionId)??E;s&&$(s)},[a==null?void 0:a.sessionId,E,$,B]),r.useEffect(()=>{Y(1)},[G,R]);const We=r.useCallback(s=>{d(s),l(`/claude/forks/${s.id}`)},[l]),Ge=r.useCallback(s=>{te(s.sessionId)},[te]),He=r.useCallback(async s=>{window.confirm(`Are you sure you want to delete this fork${s.description?` "${s.description}"`:""}?`)&&(await re(s.sessionId),(a==null?void 0:a.id)===s.id&&d(null))},[re,a]),Ye=r.useCallback(s=>{b(s),k(s.sessionName??""),i(s.description??""),C(s.category),w(s.tags??[]),o("")},[]),D=r.useCallback(()=>{b(null),k(""),i(""),C(void 0),w([]),o("")},[]),Ke=r.useCallback(async()=>{if(n){q(!0);try{const s=[],g={},M=v.trim()||void 0;M!==n.description&&(g.description=M),N!==n.category&&(g.category=N),JSON.stringify(x)!==JSON.stringify(n.tags??[])&&(g.tags=x),Object.keys(g).length>0&&s.push(ae(n.sessionId,g));const ce=u.trim()||null;ce!==(n.sessionName??null)&&s.push(ze.updateSessionName(n.sessionId,ce)),s.length>0&&(await Promise.all(s),U.success("Fork updated"),V()),D()}catch{U.error("Failed to update fork")}finally{q(!1)}}},[n,u,v,N,x,ae,V,D]),Xe=r.useCallback(s=>{j(s),f(!0)},[]),Je=r.useCallback(()=>{f(!1)},[]),Ze=r.useCallback(()=>{V();const s=(a==null?void 0:a.sessionId)??E;s&&$(s)},[V,$,a==null?void 0:a.sessionId,E]),oe=r.useCallback(s=>{Y(s)},[Y]),qe=r.useCallback(()=>{se()},[se]),Qe=r.useCallback(s=>s.length<=19?s:`${s.slice(0,8)}...${s.slice(-8)}`,[]),Oe=r.useCallback(async s=>{try{await navigator.clipboard.writeText(s),U.success("Session ID copied")}catch{U.error("Failed to copy")}},[]),X=r.useCallback(()=>{const s=S.trim().toLowerCase();s&&!x.includes(s)&&(w(g=>[...g,s]),o(""))},[S,x]),es=r.useCallback(s=>{w(g=>g.filter(M=>M!==s))},[]),ss=r.useCallback(s=>{s.key==="Enter"&&(s.preventDefault(),X())},[X]),ts=r.useCallback(s=>{Ae(s==="all"?void 0:s)},[]),as=r.useCallback(()=>{Q("")},[]);return e.jsxs("div",{"data-test":"forks-page",className:"forks-page h-full p-4 overflow-hidden",children:[e.jsxs("div",{className:"forks-page-layout grid grid-cols-[350px_1fr] gap-4 h-full overflow-hidden",children:[e.jsxs(ue,{"data-test":"forks-sidebar",className:"forks-sidebar flex flex-col overflow-hidden",children:[e.jsxs(xe,{className:"flex-shrink-0 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{className:"flex items-center gap-2 text-lg",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>l("/claude"),"data-test":"forks-back-btn",title:"Back to Sessions",children:e.jsx(Ns,{size:16})}),e.jsx(L,{size:18}),"Forks",I&&I.totalCount>0&&e.jsxs("span",{"data-test":"forks-count",className:"text-sm font-normal text-muted-foreground",children:["(",I.totalCount,")"]})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:Ze,disabled:H,"data-test":"forks-refresh-btn",title:"Refresh",children:e.jsx(bs,{size:16,className:H?"animate-spin":""})})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{id:"favorites-only",checked:ee,onCheckedChange:()=>qe(),"data-test":"forks-favorites-toggle"}),e.jsx(T,{htmlFor:"favorites-only",className:"text-sm",children:"Favorites only"})]}),e.jsxs(he,{value:G??"all",onValueChange:ts,children:[e.jsx(pe,{"data-test":"forks-category-filter",className:"w-[120px] h-8 text-xs",children:e.jsx(ve,{placeholder:"Category"})}),e.jsxs(je,{children:[e.jsx(W,{value:"all",children:"All Categories"}),we.map(s=>e.jsx(W,{value:s.value,children:s.label},s.value))]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(J,{"data-test":"forks-tag-filter",placeholder:"Filter by tag...",value:R,onChange:s=>Q(s.target.value),className:"h-8 text-xs pr-8"}),R&&e.jsx(p,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6",onClick:as,"data-test":"forks-tag-filter-clear",children:e.jsx(Ne,{size:12})})]})})]})]}),e.jsx(ye,{className:"flex-1 min-h-0 p-0",children:e.jsx(os,{"data-test":"forks-list",className:"forks-list h-full px-4",children:H?e.jsx("div",{"data-test":"forks-loading",className:"flex items-center justify-center py-8 text-muted-foreground",children:"Loading forks..."}):O?e.jsx("div",{"data-test":"forks-error",className:"flex items-center justify-center py-8 text-destructive",children:O}):P.length===0?e.jsxs("div",{"data-test":"forks-empty",className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx(L,{size:32,className:"mb-2 opacity-50"}),e.jsx("p",{children:ee?"No favorite forks":"No forks yet"}),e.jsx("p",{className:"text-sm",children:"Create a fork from any session to start exploring alternatives"})]}):e.jsx("div",{className:"space-y-2 py-2",children:P.map(s=>e.jsx(Ms,{fork:s,isSelected:(a==null?void 0:a.id)===s.id,onClick:We,onToggleFavorite:Ge,onEdit:Ye,onDelete:He},s.id))})})}),I&&I.totalPages>1&&e.jsxs("div",{"data-test":"forks-pagination",className:"forks-pagination flex items-center justify-between px-4 py-2 border-t",children:[e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>oe(A-1),disabled:A<=1,"data-test":"forks-prev-page",children:[e.jsx(Cs,{size:16}),"Previous"]}),e.jsxs("span",{className:"text-sm text-muted-foreground","data-test":"forks-page-info",children:["Page ",A," of ",I.totalPages]}),e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>oe(A+1),disabled:A>=I.totalPages,"data-test":"forks-next-page",children:["Next",e.jsx(ws,{size:16})]})]})]}),e.jsxs(ue,{"data-test":"forks-tree-panel",className:"forks-tree-panel flex flex-col overflow-hidden",children:[e.jsxs(xe,{className:"flex-shrink-0 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(fe,{className:"text-lg",children:"Fork Tree"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{id:"show-messages",checked:B,onCheckedChange:Pe,"data-test":"forks-show-messages-toggle"}),e.jsx(T,{htmlFor:"show-messages",className:"text-sm",children:"Show messages"})]})]}),a&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-muted-foreground","data-test":"forks-tree-panel-selected",children:["Viewing: ",a.sessionName||a.description||`Fork ${a.sessionId.slice(0,8)}`]}),e.jsxs("div",{className:"flex items-center gap-1","data-test":"forks-tree-panel-session-id",children:[e.jsxs(ds,{children:[e.jsx(cs,{asChild:!0,children:e.jsx("span",{className:"text-xs font-mono text-muted-foreground cursor-default",children:Qe(a.sessionId)})}),e.jsx(ms,{children:e.jsx("span",{className:"font-mono text-xs",children:a.sessionId})})]}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>Oe(a.sessionId),"data-test":"forks-tree-panel-copy-id",title:"Copy session ID",children:e.jsx(Ss,{size:12})})]})]})]}),e.jsx(ye,{className:"flex-1 min-h-0 p-0",children:e.jsx(Fs,{tree:_,selectedSessionId:a==null?void 0:a.sessionId,loading:Le,error:Be??void 0,onSessionSelect:Xe,showMessages:B})})]})]}),e.jsx(ke,{isVisible:y,onClose:Je,title:(z==null?void 0:z.customName)??(z==null?void 0:z.name)??"Session Chat",shouldCloseManually:!0,resizable:!0,initialSize:ne.size,initialPosition:ne.position,children:e.jsxs("div",{className:"flex flex-col h-full","data-test":"fork-chat-popover-content",children:[e.jsx("div",{className:"flex-1 overflow-auto","data-test":"fork-chat-messages-area",children:e.jsx(us,{messages:ie,sessionDetails:z,metadata:Re,loading:Ve,pagination:_e,onLoadOlder:$e,onNameUpdated:le,inheritedMessages:K==null?void 0:K.inheritedMessages})}),m&&e.jsx("div",{className:"border-t p-2","data-test":"fork-chat-input-area",children:e.jsx(xs,{sessionId:m,onSendSuccess:()=>{le()},onAddOptimisticMessage:De,onRemoveOptimisticMessage:Ue,userMessages:ie.filter(s=>s.role==="user"&&!s._isOptimistic)})})]})}),e.jsx(ke,{isVisible:n!==null,onClose:D,title:"Edit Fork",shouldCloseManually:!0,resizable:!1,initialSize:{width:400,height:500},initialPosition:{x:Math.round((window.innerWidth-400)/2),y:Math.round((window.innerHeight-500)/2)},children:e.jsxs("div",{className:"p-4 flex flex-col gap-4","data-test":"fork-edit-popover-content",children:[e.jsxs("div",{"data-test":"fork-edit-name-field",className:"space-y-2",children:[e.jsx(T,{htmlFor:"fork-edit-name",children:"Name"}),e.jsx(J,{id:"fork-edit-name","data-test":"fork-edit-name-input",placeholder:"Fork name...",value:u,onChange:s=>k(s.target.value),disabled:h})]}),e.jsxs("div",{"data-test":"fork-edit-description-field",className:"space-y-2",children:[e.jsx(T,{htmlFor:"fork-edit-description",children:"Description"}),e.jsx(fs,{id:"fork-edit-description","data-test":"fork-edit-description-input",placeholder:"Why was this fork created?",value:v,onChange:s=>i(s.target.value),disabled:h,rows:3,className:"resize-none"})]}),e.jsxs("div",{"data-test":"fork-edit-category-field",className:"space-y-2",children:[e.jsx(T,{htmlFor:"fork-edit-category",children:"Category"}),e.jsxs(he,{value:N??"none",onValueChange:s=>C(s==="none"?void 0:s),disabled:h,children:[e.jsx(pe,{"data-test":"fork-edit-category-select",id:"fork-edit-category",children:e.jsx(ve,{placeholder:"Select category..."})}),e.jsxs(je,{children:[e.jsx(W,{value:"none",children:"None"}),we.map(s=>e.jsx(W,{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{"data-test":"fork-edit-tags-field",className:"space-y-2",children:[e.jsx(T,{htmlFor:"fork-edit-tags",children:"Tags"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{id:"fork-edit-tags","data-test":"fork-edit-tags-input",placeholder:"Add tag...",value:S,onChange:s=>o(s.target.value),onKeyDown:ss,disabled:h,className:"flex-1"}),e.jsx(p,{type:"button",variant:"outline",size:"sm",onClick:X,disabled:h||!S.trim(),"data-test":"fork-edit-tags-add",children:"Add"})]}),x.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2","data-test":"fork-edit-tags-list",children:x.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-full bg-secondary text-secondary-foreground","data-test":"fork-edit-tag-item",children:[s,e.jsx("button",{type:"button",onClick:()=>es(s),disabled:h,className:"hover:text-destructive","data-test":"fork-edit-tag-remove",children:e.jsx(Ne,{size:12})})]},s))})]}),e.jsxs("div",{"data-test":"fork-edit-actions",className:"flex justify-end gap-2",children:[e.jsx(p,{variant:"outline",onClick:D,disabled:h,"data-test":"fork-edit-cancel",children:"Cancel"}),e.jsx(p,{onClick:Ke,disabled:h,"data-test":"fork-edit-submit",children:h?"Saving...":"Save"})]})]})})]})}export{$s as ForksPage};
