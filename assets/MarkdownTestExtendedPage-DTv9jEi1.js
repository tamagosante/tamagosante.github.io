import{r as s,j as t}from"./react-vendor-Byz07MLO.js";import{aC as _,a2 as G,a7 as re,L as oe,a as E,ag as ae,af as le}from"./index-hTFRJyrx.js";import{B as ie}from"./Breadcrumbs-BjZV4SIv.js";import{a as ce,y as de,C as J,e as Q,T as Y,ah as ue,R as me,E as xe,i as he}from"./icons-yhbeTEay.js";import{U as pe}from"./UiButtonWithExpandOption-CPX53qLO.js";import"./utils-G1l1U0hd.js";import"./radix-ui-9f16WUVy.js";import"./ui-utils-BxIQ3qGg.js";const X="debug-history-settings",U={includeInnerHTML:!1};function D(){try{const r=localStorage.getItem(X);if(r)return{...U,...JSON.parse(r)}}catch{}return U}function V(r){try{localStorage.setItem(X,JSON.stringify(r))}catch{}}function fe({history:r,onClear:z,initialContent:m,isReplayingRef:f,textareaRegistryRef:T}){const[M,y]=s.useState(!1),[w,S]=s.useState(!1),[h,g]=s.useState(D);s.useEffect(()=>{V(h)},[h]);const $=s.useCallback((n,a)=>{g(l=>({...l,[n]:a}))},[]),v=s.useCallback(()=>{if(r.length===0)return"No interactions recorded";let n=`# Textarea Interaction History

`,a="";return r.forEach((l,j)=>{l.textareaId!==a&&(a=l.textareaId,n+=`## Textarea: ${l.textareaId}
`,n+=`Mode: ${l.mode}

`);const C=j+1;if(l.type==="click"){if(n+=`### Step ${C}: Click
`,n+=`- Visible Pos: ${l.position}, Markdown Pos: ${l.markdownPosition}
`,n+=`- Line: ${l.line}, Column: ${l.column}
`,n+=`- Cursor: \`${l.cursorContext}\`
`,n+=`- Content: \`${l.content.replace(/\n/g,"\\n")}\`
`,h.includeInnerHTML&&l.innerHTML){const I=l.innerHTML.replace(/\uFFFD/g,"{|}").replace(/\u200B/g,"");n+=`- innerHTML:
\`\`\`html
${I}
\`\`\`
`}n+=`
`}else{if(n+=`### Step ${C}: Keystroke [${l.key}]
`,n+=`- Visible Pos: ${l.position}, Markdown Pos: ${l.markdownPosition}
`,n+=`- Line: ${l.line}, Column: ${l.column}
`,n+=`- Cursor: \`${l.cursorContext}\`
`,n+=`- Content after: \`${l.content.replace(/\n/g,"\\n")}\`
`,h.includeInnerHTML&&l.innerHTML){const I=l.innerHTML.replace(/\uFFFD/g,"{|}").replace(/\u200B/g,"");n+=`- innerHTML:
\`\`\`html
${I}
\`\`\`
`}n+=`
`}}),n},[r,h.includeInnerHTML]),P=s.useCallback(()=>{navigator.clipboard.writeText(v()),y(!0),setTimeout(()=>y(!1),1500)},[v]),K=s.useCallback(n=>{const a=document.querySelector(`[data-test="test-cell-${n}"]`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("ring-2","ring-primary","ring-offset-2"),setTimeout(()=>{a.classList.remove("ring-2","ring-primary","ring-offset-2")},1500))},[]),A=s.useCallback((n,a)=>{var I,q;const l=document.querySelector(`[data-test="test-cell-${n.textareaId}"]`);if(!l){console.warn(`Could not find test cell: ${n.textareaId}`);return}f&&(f.current=!0);let j;if(a===0?j=m:j=(I=r[a-1])==null?void 0:I.content,j!==void 0){const N=T==null?void 0:T.current.get(n.textareaId);N&&N(j)}let C;n.type==="click"?C=n.markdownPosition:C=((q=r[a-1])==null?void 0:q.markdownPosition)??n.markdownPosition,requestAnimationFrame(()=>{requestAnimationFrame(()=>{const N=l.querySelector('[contenteditable="true"]');if(!N){console.warn(`Could not find contenteditable after re-render: ${n.textareaId}`),f&&(f.current=!1);return}if(N.focus(),_(N,C),n.type==="keystroke"&&n.key){const H=n.key;setTimeout(()=>{const d=new KeyboardEvent("keydown",{key:H,code:H==="Enter"?"Enter":H==="Backspace"?"Backspace":`Key${H.toUpperCase()}`,bubbles:!0,cancelable:!0});N.dispatchEvent(d),H.length===1?document.execCommand("insertText",!1,H):H==="Enter"?document.execCommand("insertLineBreak"):H==="Backspace"&&document.execCommand("delete",!1),setTimeout(()=>{f&&(f.current=!1)},50)},20)}else setTimeout(()=>{f&&(f.current=!1)},50)})})},[r,m,f,T]),B=t.jsxs(t.Fragment,{children:[t.jsx(E,{variant:"ghost",size:"sm",onClick:()=>S(!0),className:"h-6 px-2 gap-1 text-xs","data-test":"debug-history-settings-button",children:t.jsx(de,{className:"w-3 h-3"})}),t.jsx(E,{variant:"ghost",size:"sm",onClick:P,className:"h-6 px-2 gap-1 text-xs","data-test":"debug-history-copy-button",children:M?t.jsx(J,{className:"w-3 h-3 text-green-500"}):t.jsx(Q,{className:"w-3 h-3"})}),t.jsx(E,{variant:"ghost",size:"sm",onClick:z,className:"h-6 px-2 text-xs text-destructive hover:text-destructive","data-test":"debug-history-clear-button",children:t.jsx(Y,{className:"w-3 h-3"})})]});return t.jsxs(t.Fragment,{children:[t.jsx(G,{isVisible:w,onClose:()=>S(!1),title:"History Settings",className:"w-64",initialPosition:{x:window.innerWidth-600,y:200},initialSize:{width:260,height:120},"data-test":"debug-history-settings-popover",children:t.jsxs("div",{className:"p-3 space-y-3","data-test":"debug-history-settings-content",children:[t.jsxs("div",{className:"flex items-center gap-2","data-test":"debug-history-settings-innerhtml-field",children:[t.jsx(re,{id:"include-innerhtml",checked:h.includeInnerHTML,onCheckedChange:n=>$("includeInnerHTML",n===!0),"data-test":"debug-history-settings-innerhtml-checkbox"}),t.jsx(oe,{htmlFor:"include-innerhtml",className:"text-sm cursor-pointer","data-test":"debug-history-settings-innerhtml-label",children:"Include innerHTML"})]}),t.jsx("p",{className:"text-xs text-muted-foreground","data-test":"debug-history-settings-description",children:"When enabled, each step will include the editor's innerHTML in the copied output."})]})}),t.jsx(G,{isVisible:!0,onClose:()=>{},title:"Interaction History",className:"w-80",initialPosition:{x:window.innerWidth-340,y:180},shouldCloseManually:!0,resizable:!0,initialSize:{width:320,height:400},headerActions:B,"data-test":"debug-history-popover",footer:t.jsxs("div",{className:"px-3 py-1.5 bg-muted/50 text-[10px] text-muted-foreground flex items-center justify-between","data-test":"debug-history-footer",children:[t.jsxs("span",{"data-test":"debug-history-event-count",children:[r.length," event",r.length!==1?"s":""," recorded"]}),r.length>0&&t.jsx("button",{onClick:()=>K(r[r.length-1].textareaId),className:"text-primary hover:text-primary/80 hover:underline cursor-pointer",title:"Scroll to textarea","data-test":"debug-history-scroll-to-textarea",children:r[r.length-1].textareaId})]}),children:t.jsx("div",{className:"debug-history-content p-2 text-xs font-mono space-y-1","data-test":"debug-history-card",children:r.length===0?t.jsx("div",{className:"text-muted-foreground italic p-2","data-test":"debug-history-empty-state",children:"Click in a textarea to start recording..."}):[...r].reverse().map((n,a)=>t.jsxs("div",{className:`p-1.5 rounded ${n.type==="click"?"bg-blue-500/10 border-l-2 border-blue-500":"bg-orange-500/10 border-l-2 border-orange-500"}`,"data-test":`debug-history-event-${r.length-a}`,children:[t.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-muted-foreground","data-test":`debug-history-event-header-${r.length-a}`,children:[t.jsxs("span",{className:"font-semibold text-foreground","data-test":`debug-history-event-number-${r.length-a}`,children:["#",r.length-a]}),t.jsx("span",{className:n.type==="click"?"text-blue-500":"text-orange-500","data-test":`debug-history-event-type-${r.length-a}`,children:n.type==="click"?"CLICK":`KEY [${n.key}]`}),t.jsx("span",{className:"text-primary","data-test":`debug-history-event-textarea-${r.length-a}`,children:n.textareaId}),t.jsx(E,{variant:"ghost",size:"sm",onClick:l=>{l.stopPropagation();const j=r.length-1-a;A(n,j)},className:"ml-auto h-5 w-5 p-0 text-muted-foreground hover:text-foreground hover:bg-muted",title:"Replay this action","data-test":`debug-history-event-replay-${r.length-a}`,children:t.jsx(ce,{className:"w-3 h-3"})})]}),t.jsxs("div",{className:"text-[10px] mt-0.5","data-test":`debug-history-event-position-${r.length-a}`,children:[t.jsxs("span",{children:["Vis:",n.position," "]}),t.jsxs("span",{className:"text-yellow-600",children:["MD:",n.markdownPosition," "]}),t.jsxs("span",{children:["Ln:",n.line," Col:",n.column]})]}),t.jsxs("div",{className:"text-[9px] text-muted-foreground mt-0.5 truncate",title:n.content,"data-test":`debug-history-event-content-${r.length-a}`,children:[n.content.replace(/\n/g,"↵").substring(0,40),n.content.length>40?"...":""]}),h.includeInnerHTML&&n.innerHTML&&t.jsxs("div",{className:"mt-1 p-1 bg-background/50 rounded border border-border/50","data-test":`debug-history-event-innerhtml-${r.length-a}`,children:[t.jsx("div",{className:"text-[9px] text-muted-foreground mb-0.5",children:"innerHTML:"}),t.jsx("div",{className:"text-[10px] [&_h1]:text-base [&_h2]:text-sm [&_h3]:text-xs [&_.empty-line]:h-4 [&_.paragraph]:text-[10px]",dangerouslySetInnerHTML:{__html:n.innerHTML.replace(/\uFFFD/g,'<span class="text-red-500 font-bold">{|}</span>').replace(/\u200B/g,"")}})]})]},n.timestamp))})})]})}const Z=s.createContext(!0),ee=s.createContext(()=>{}),te=s.createContext(()=>{}),ne=s.createContext(null),se=s.createContext(null),R={"A1-h1":"# Hello","A2-h2":"## Hello","A3-h3":"### Hello","A4-blockquote":"> Quote","A5-hr":"---","B1-ul-single":"- item","B2-ul-multiple":`- one
- two`,"B3-ol-single":"1. item","B4-ol-multiple":`1. one
2. two`,"B5-ol-large":"10. item","C1-bold":"**bold**","C2-italic":"*italic*","C3-code":"`code`","C4-strike":"~~strike~~","C5-mixed":"**bold** and *italic*","C6-double":"**one** **two**","D1-single":`line1
line2`,"D2-blank":`line1

line2`,"D3-multi":`line1


line2`,"E1-simple":`| A | B |
| - | - |
| 1 | 2 |`,"E2-bold":`| **A** | B |
| - | - |
| 1 | 2 |`,"E3-italic":`| *A* | B |
| - | - |
| 1 | 2 |`,"E4-multi":"| **A** | *B* |\n| - | - |\n| `1` | 2 |","F1-h+p":`# Header
Paragraph`,"F2-h+ul":`## H2
- item`,"F3-q+ul":`> Quote
- item`,"F4-ul+h":`- item
## Header`,"G1-h-bold":"# **Bold Header**","G2-ul-bold":"- **bold item**","G3-q-bold":"> **bold quote**","H1-txt+tbl":`Text
| A | B |
| - | - |
| 1 | 2 |`,"H2-tbl+txt":`| A | B |
| - | - |
| 1 | 2 |
Text`,"H3-h+tbl":`## Header
| A | B |
| - | - |
| 1 | 2 |`,"H4-tbl+ul":`| A | B |
| - | - |
| 1 | 2 |
- item`,"H5-b+tbl":`**bold**
| A | B |
| - | - |
| 1 | 2 |`,"H6-fmt-tbl":`| **A** | B |
| - | - |
| 1 | 2 |
- item`,"I1-h+tbl+ul":`## H
| A | B |
| - | - |
| 1 | 2 |
- item`,"I2-fmt-tbl":`## H
| **A** | B |
| - | - |
| 1 | 2 |
- item`,"I3-b+tbl+ul":`**bold**
| A | B |
| - | - |
| 1 | 2 |
- item`,"J1-tbl+h+ul":`| **A** | B |
| - | - |
| 1 | 2 |
# Header
- hello`,"J2-tbl+h+p":`| **A** | B |
| - | - |
| 1 | 2 |
# Header
paragraph`,"J3-tbl+h2+ul":`| *A* | B |
| - | - |
| 1 | 2 |
## Header
- item one
- item two`,"K1-link":"[(1) Datenschutz](https://dsgvo-gesetz.de/nr-1/)","K2-link-long":"[(1) Datenschutz als Grundrecht](https://dsgvo-gesetz.de/erwaegungsgruende/nr-1/)","K3-link-bold":"**[Bold Link](https://example.com)**","K4-link-italic":"*[Italic Link](https://example.com)*","K5-txt+link":"See [this link](https://example.com) for info","K6-multi-link":"[One](https://example.com/one) and [Two](https://example.com/two)","L1-h+link":`## Header
[Click here](https://example.com)`,"L2-ul+link":`- [Link item](https://example.com)
- normal item`,"L3-ol+link":`1. [First](https://example.com/first)
2. [Second](https://example.com/second)`,"L4-q+link":"> Quote with [link](https://example.com)","L5-link+tbl":`[Link](https://example.com)
| A | B |
| - | - |
| 1 | 2 |`,"L6-tbl+link":`| A | B |
| - | - |
| 1 | 2 |
[After table](https://example.com)`,"M1-tbl-link":`| [A](https://example.com) | B |
| - | - |
| 1 | 2 |`,"M2-tbl-multi":`| [A](https://example.com/a) | [B](https://example.com/b) |
| - | - |
| [1](https://example.com/1) | 2 |`,"M3-tbl-bold-link":`| **[Bold](https://example.com)** | B |
| - | - |
| 1 | 2 |`,"BC35-full":`## **Estimation** of **User** **Support**
| **Category** | **Count** |
| - | - |
| Active | 10 |
| **Idle** | 5 |
- Idle Users`};function ge({id:r,initialValue:z}){const[m,f]=s.useState(z),T=s.useContext(Z),M=s.useContext(ee),y=s.useContext(te),w=s.useContext(ne),S=s.useContext(se),h=s.useRef(null),g=s.useRef(m);g.current=m;const[$,v]=s.useState(null);s.useEffect(()=>{if(S!=null&&S.current)return S.current.set(r,f),()=>{var d;(d=S.current)==null||d.delete(r)}},[r,S]);const P=s.useCallback(d=>{w!=null&&w.current||v(d)},[w]),K=s.useRef(T);K.current!==T&&(K.current=T,v(null));const A=$??(T?"preview":"raw"),B=s.useRef(A);B.current=A;const n=m.split(`
`).length,a=r.startsWith("BC35"),l=r.startsWith("I")||r.startsWith("J"),j=a?280:l?200:n<=1?48:n<=2?64:n<=4?100:n<=6?140:180,C=s.useCallback(()=>{const d=window.getSelection();if(!d||!h.current)return null;const k=h.current.querySelector("[contenteditable]");if(!k||!k.contains(d.anchorNode))return null;const b=d.getRangeAt(0),u=b.cloneRange();u.selectNodeContents(k),u.setEnd(b.startContainer,b.startOffset);const F=u.toString().length,{cursorPos:e}=ae(k),o=g.current,c=o.substring(0,Math.min(e,o.length)).split(`
`),x=c.length,L=c[c.length-1].length+1,p=o.substring(Math.max(0,e-10),e),W=o.substring(e,Math.min(o.length,e+10)),O=`${p}{|}${W}`.replace(/\n/g,"↵");return{line:x,column:L,position:F,markdownPosition:e,content:o,cursorContext:O}},[]),I=s.useCallback(()=>{if(!h.current)return;const d=h.current.querySelector("[contenteditable]");if(!d)return;const k=window.getSelection();if(!k||k.rangeCount===0)return d.innerHTML;const b=k.getRangeAt(0);if(!d.contains(b.startContainer))return d.innerHTML;const u=b.startContainer,F=b.startOffset,e=b.endContainer,o=b.endOffset,i=b.collapsed,x=document.createTextNode("�");b.insertNode(x);const L=d.innerHTML;x.remove();const p=document.createRange();try{p.setStart(u,F),i?p.collapse(!0):p.setEnd(e,o),k.removeAllRanges(),k.addRange(p)}catch{}return L},[]),q=s.useCallback(()=>{const d=C();d&&(M({id:r,...d,value:d.content,mode:B.current}),y({timestamp:Date.now(),type:"click",textareaId:r,line:d.line,column:d.column,position:d.position,markdownPosition:d.markdownPosition,content:d.content,cursorContext:d.cursorContext,mode:B.current,innerHTML:I()}))},[r,C,M,y,I]),N=s.useRef([]),H=s.useCallback(d=>{const k=d.key,b=Date.now(),u=C(),F=(u==null?void 0:u.markdownPosition)??0;N.current.push({key:k,timestamp:b,positionBefore:F}),requestAnimationFrame(()=>{const e=N.current;N.current=[];const o=C();o&&e.forEach((i,c)=>{const x=e.length-1-c,L=o.markdownPosition-x,p=o.content.slice(0,-x)||o.content;M({id:r,...o,value:o.content,mode:B.current}),y({timestamp:i.timestamp,type:"keystroke",textareaId:r,line:o.line,column:o.column-x,position:o.position-x,markdownPosition:L,content:c===e.length-1?o.content:p,cursorContext:o.cursorContext,key:i.key,mode:B.current,innerHTML:c===e.length-1?I():void 0})})})},[r,C,M,y,I]);return t.jsxs("div",{ref:h,className:"test-cell flex flex-col border border-border rounded overflow-hidden bg-card","data-test":`test-cell-${r}`,onKeyDown:H,children:[t.jsxs("div",{className:"cell-header px-1.5 py-0.5 bg-muted border-b border-border flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-mono font-medium text-muted-foreground truncate",children:r}),t.jsxs("span",{className:"text-[9px] text-muted-foreground/60",children:[m.length,"ch"]})]}),t.jsx("div",{className:"cell-content [&_.markdown-textarea]:!min-h-0 [&_.markdown-textarea]:!p-1",style:{height:j},onClick:q,children:t.jsx(le,{value:m,onChange:f,className:"h-full text-xs",mode:A,onModeChange:P,showHints:!1,"data-test":`textarea-${r}`})})]})}function Te(){const[r,z]=s.useState(!0),[m,f]=s.useState(null),[T,M]=s.useState(!1),[y,w]=s.useState([]),[S,h]=s.useState(void 0),[g,$]=s.useState(()=>D().lastTextareaId??null),[v,P]=s.useState(()=>D().textareaHistory??[]),[K,A]=s.useState(0),B=s.useRef(!1),n=s.useRef(new Map),a=s.useCallback((e,o,i)=>{P(c=>{const x=c.filter(O=>O.textareaId!==e),p=[{textareaId:e,firstEvent:o,fullHistory:i},...x].slice(0,20),W=D();return V({...W,lastTextareaId:e,textareaHistory:p}),p})},[]);s.useEffect(()=>{const e=D(),o=e.lastTextareaId,c=(e.textareaHistory??[]).find(x=>x.textareaId===o);if(o&&(c!=null&&c.firstEvent)){const x=c.fullHistory??[c.firstEvent];w(x);const L=R[c.textareaId];h(c.firstEvent.type==="click"?c.firstEvent.content:L),setTimeout(()=>{const p=document.querySelector(`[data-test="test-cell-${o}"]`);if(p){p.scrollIntoView({behavior:"smooth",block:"center"});const W=p.querySelector('[contenteditable="true"]');W&&(W.focus(),_(W,c.firstEvent.markdownPosition))}},100)}},[]);const l=!1,j=s.useCallback((e,o)=>{if(o.type==="keystroke"||e.length===0)return!1;const i=e[e.length-1];return i.markdownPosition===o.markdownPosition&&i.content===o.content},[]),C=s.useCallback(e=>{B.current||$(o=>{if(o!==null&&o!==e.textareaId){w([e]);const i=R[e.textareaId];h(e.type==="click"?e.content:i),a(e.textareaId,e,[e])}else w(i=>{if(j(i,e))return i;if(i.length===0){const c=R[e.textareaId];h(e.type==="click"?e.content:c),a(e.textareaId,e,[e])}return[...i,e]});return e.textareaId})},[a,j,l]);s.useEffect(()=>{if(g&&y.length>0){const e=y[0];a(g,e,y)}},[y,g,a]);const I=s.useCallback(()=>{w([]),h(void 0),g&&P(e=>{const o=e.map(c=>c.textareaId===g?{...c,fullHistory:[]}:c),i=D();return V({...i,textareaHistory:o}),o})},[g]),q=s.useCallback(()=>{A(e=>e+1),f(null),w([]),$(null)},[]),N=s.useCallback(e=>{const o=document.querySelector(`[data-test="test-cell-${e}"]`);if(!o)return;o.scrollIntoView({behavior:"smooth",block:"center"}),o.classList.add("ring-2","ring-primary","ring-offset-2");const i=o.querySelector('[contenteditable="true"]');i==null||i.focus(),setTimeout(()=>{o.classList.remove("ring-2","ring-primary","ring-offset-2")},1500)},[]),H=s.useCallback(e=>{const o=document.querySelector(`[data-test="test-cell-${e.textareaId}"]`);if(!o)return;o.scrollIntoView({behavior:"smooth",block:"center"}),o.classList.add("ring-2","ring-primary","ring-offset-2");const i=e.fullHistory??[e.firstEvent];w(i);const c=R[e.textareaId];h(e.firstEvent.type==="click"?e.firstEvent.content:c);const x=i[i.length-1],L=n.current.get(e.textareaId);L&&L(x.content),requestAnimationFrame(()=>{const p=o.querySelector('[contenteditable="true"]');p&&(p.focus(),_(p,x.markdownPosition))}),setTimeout(()=>{o.classList.remove("ring-2","ring-primary","ring-offset-2")},1500),$(e.textareaId),a(e.textareaId,e.firstEvent,i)},[a]),d=s.useCallback(()=>{P([]);const e=D();V({...e,textareaHistory:[]})},[]),k=[{label:"Home",href:"/"},{label:"Demo",href:"/demo"},{label:"Markdown Test Extended"}],b=s.useCallback(()=>{if(!m)return;const e=`ID: ${m.id}
Mode: ${m.mode}
Position: ${m.position}
Line: ${m.line}, Column: ${m.column}
Value: \`${m.value.replace(/\n/g,"\\n")}\``;navigator.clipboard.writeText(e),M(!0),setTimeout(()=>M(!1),1500)},[m]),u=Object.entries(R),F={"A: Headers":u.filter(([e])=>e.startsWith("A")),"B: Lists":u.filter(([e])=>e.startsWith("B")&&!e.startsWith("BC")),"C: Format":u.filter(([e])=>e.startsWith("C")),"D: Newlines":u.filter(([e])=>e.startsWith("D")),"E: Tables":u.filter(([e])=>e.startsWith("E")),"F: Block+Block":u.filter(([e])=>e.startsWith("F")),"G: Block+Fmt":u.filter(([e])=>e.startsWith("G")),"H: Table+":u.filter(([e])=>e.startsWith("H")),"I: Combined":u.filter(([e])=>e.startsWith("I")),"J: Table First":u.filter(([e])=>e.startsWith("J")),"K: Links":u.filter(([e])=>e.startsWith("K")),"L: Link+Block":u.filter(([e])=>e.startsWith("L")),"M: Link+Table":u.filter(([e])=>e.startsWith("M")),"BC-35":u.filter(([e])=>e.startsWith("BC"))};return t.jsx(Z.Provider,{value:r,children:t.jsx(ee.Provider,{value:f,children:t.jsx(te.Provider,{value:C,children:t.jsx(ne.Provider,{value:B,children:t.jsx(se.Provider,{value:n,children:t.jsxs("div",{className:"markdown-test-extended-page flex-1 flex flex-col h-full","data-test":"markdown-test-extended-page",children:[t.jsx("div",{className:"debug-status-bar px-4 py-1.5 bg-muted/50 border-b border-border flex items-center gap-4 text-xs font-mono flex-shrink-0",children:m?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-semibold text-primary",children:m.id}),t.jsx("span",{className:"text-muted-foreground",children:"|"}),t.jsxs("span",{children:["Pos: ",t.jsx("span",{className:"text-foreground",children:m.position})]}),t.jsxs("span",{children:["Ln: ",t.jsx("span",{className:"text-foreground",children:m.line})]}),t.jsxs("span",{children:["Col: ",t.jsx("span",{className:"text-foreground",children:m.column})]}),t.jsx("span",{className:"text-muted-foreground",children:"|"}),t.jsx("span",{className:m.mode==="preview"?"text-green-600":"text-orange-500",children:m.mode}),t.jsxs(E,{variant:"ghost",size:"sm",onClick:b,className:"h-5 px-1.5 gap-1 text-xs","data-test":"copy-cursor-info",children:[T?t.jsx(J,{className:"w-3 h-3 text-green-500"}):t.jsx(Q,{className:"w-3 h-3"}),T?"Copied":"Copy"]})]}):t.jsx("span",{className:"text-muted-foreground italic",children:"Click in a textarea to see cursor info"})}),t.jsxs("div",{className:"page-header px-4 py-2 flex-shrink-0 border-b border-border",children:[t.jsx(ie,{items:k}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(ue,{className:"w-5 h-5 text-primary"}),t.jsx("h1",{className:"text-xl font-bold",children:"Markdown Test Extended"}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",u.length," test cases)"]}),t.jsx("div",{className:"flex-1"}),g&&t.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>N(g),expandDirection:"down",expandTitle:"Textarea History",headerActions:t.jsx(E,{variant:"ghost",size:"sm",onClick:d,className:"h-6 px-2",title:"Clear history","data-test":"clear-textarea-history",disabled:v.length===0,children:t.jsx(Y,{className:"w-3 h-3"})}),expandContent:t.jsx("div",{className:"flex flex-col h-full overflow-y-auto","data-test":"textarea-history-list",children:v.length===0?t.jsx("span",{className:"text-xs text-muted-foreground p-2",children:"No history yet"}):v.map((e,o)=>t.jsxs("button",{onClick:()=>H(e),className:`text-left text-xs font-mono px-2 py-1.5 hover:bg-muted transition-colors ${o===0?"text-primary font-semibold":"text-muted-foreground"}`,"data-test":`textarea-history-item-${e.textareaId}`,children:[t.jsx("span",{children:e.textareaId}),t.jsxs("span",{className:"ml-2 text-[9px] text-muted-foreground/70",children:["@",e.firstEvent.markdownPosition]})]},e.textareaId))}),popoverSize:{width:180,height:250},resizable:!1,title:`Scroll to ${g}`,dataTest:"scroll-to-last-textarea",className:"h-8",children:t.jsx("span",{className:"text-xs font-mono",children:g})}),t.jsxs(E,{variant:"outline",size:"sm",onClick:q,className:"gap-1.5","data-test":"reset-all-textareas",children:[t.jsx(me,{className:"w-4 h-4"}),"Reset"]}),t.jsx(E,{variant:r?"default":"outline",size:"sm",onClick:()=>z(!r),className:"gap-1.5","data-test":"global-mode-toggle",children:r?t.jsxs(t.Fragment,{children:[t.jsx(xe,{className:"w-4 h-4"}),"Preview"]}):t.jsxs(t.Fragment,{children:[t.jsx(he,{className:"w-4 h-4"}),"Raw"]})})]})]}),t.jsxs("div",{className:"page-content flex-1 p-2 overflow-y-auto min-h-0",children:[t.jsx(fe,{history:y,onClear:I,initialContent:S,isReplayingRef:B,textareaRegistryRef:n}),t.jsx("div",{className:"space-y-3",children:Object.entries(F).map(([e,o])=>{const i=e==="BC-35";return t.jsxs("div",{className:"group-section",children:[t.jsx("div",{className:"group-header text-xs font-semibold text-muted-foreground mb-1 px-1",children:e}),t.jsx("div",{className:"grid gap-1.5",style:{gridTemplateColumns:i?"1fr":"repeat(auto-fill, minmax(140px, 1fr))"},children:o.map(([c,x])=>t.jsx(ge,{id:c,initialValue:x},`${c}-${K}`))})]},e)})})]})]})})})})})})}export{Te as MarkdownTestExtendedPage};
