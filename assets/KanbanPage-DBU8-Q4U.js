const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TodoTable-CanpUqAQ.js","assets/react-vendor-Byz07MLO.js","assets/table-BU9steQ-.js","assets/index-hTFRJyrx.js","assets/utils-G1l1U0hd.js","assets/radix-ui-9f16WUVy.js","assets/ui-utils-BxIQ3qGg.js","assets/icons-yhbeTEay.js","assets/index-DQUCd7wI.css"])))=>i.map(i=>d[i]);
import{w as ce,t as M,bB as Ee,ah as P,C as $e,H as ee,q as Ye,a as $,aX as qe,bC as Ce,ai as G,bD as Xe,B as E,x as ea,a$ as aa,bE as ta,s as H,bF as be,bG as sa,bH as na,I as de,L as ae,S as J,h as Y,i as q,j as X,k as V,l as Fe,av as ra,a7 as Oe,bI as Ae,bJ as ia,bK as Le,bL as Re,bM as Be,bN as _e,bO as ze,bP as te,bQ as me,bR as Ne,T as la,m as oa,n as Pe,o as ye,g as ca,bS as da,aB as ua}from"./index-hTFRJyrx.js";import{r as f,j as e}from"./react-vendor-Byz07MLO.js";import{D as pa}from"./DemoLayout-CVyi6Okj.js";import{a as ha,b as ma,u as ga}from"./react-hooks-CNdHs55p.js";import{bg as fa,aU as xa,T as Ke,Y as ba,ao as va,ab as Me,X as K,a2 as ue,a3 as ja,b0 as ka,y as Ca,D as Na,U as Pa,ai as oe,S as ya,bq as wa,d as ge}from"./icons-yhbeTEay.js";import{C as Sa,w as Ia}from"./radix-ui-9f16WUVy.js";import{t as _}from"./utils-G1l1U0hd.js";import{S as Da}from"./SFSService-BFwsjKwD.js";import"./ui-utils-BxIQ3qGg.js";import"./Breadcrumbs-BjZV4SIv.js";import"./DragDropManager-CacIWg_Z.js";const Ta=[{value:G.LOW,label:"Low",variant:"secondary",className:"bg-gray-100 text-gray-800 border-gray-200"},{value:G.MEDIUM,label:"Medium",variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200"},{value:G.HIGH,label:"High",variant:"secondary",className:"bg-orange-100 text-orange-800 border-orange-200"},{value:G.URGENT,label:"Urgent",variant:"destructive",className:"bg-red-100 text-red-800 border-red-200"}],Ea=a=>{var l,n,o;return((o=(n=(l=a.app)==null?void 0:l.claude)==null?void 0:n.data)==null?void 0:o.projects)??[]},$a=a=>{var l,n,o;return((o=(n=(l=a.app)==null?void 0:l.claude)==null?void 0:n.ui)==null?void 0:o.loadingProjects)??!1};function Fa({todo:a,isDragging:l,kanbanManager:n,onDelete:o,onUpdate:s,isDetailsPanelOpen:r,onOpenDetailsPanel:p,onCloseDetailsPanel:i}){var W,se,ne,re,ie;const m=ha(n,a.id.value,{todoId:a.id.value}),v=ce(Ea),y=ce($a),S=JSON.stringify(((W=a.customProps)==null?void 0:W.sessionIds)??[]),x=f.useMemo(()=>{var b;return((b=a.customProps)==null?void 0:b.sessionIds)??[]},[S]),k=f.useCallback(b=>{const w=[];if(b.description?(w.push(`## ${b.title}`),w.push(""),w.push(b.description)):w.push(`${b.title}`),b.dueDate){const O=new Date(b.dueDate.value);w.push(`- Due: ${O.toLocaleDateString()}`)}return b.tags.length>0&&w.push(`- Tags: ${b.tags.join(", ")}`),b.subtasks.length>0&&(w.push(""),w.push("**Subtasks:**"),b.subtasks.forEach(O=>{const z=O.isCompleted?"[x]":"[ ]";w.push(`${z} ${O.title}`)})),w.push(`
`),w.push("I permit and approve all file changes in this session."),w.join(`
`)},[]),N=f.useCallback(async b=>{try{await M.updateTodo(a.id,{priority:b}),s==null||s()}catch(w){console.error("Failed to update priority:",w)}},[a.id,s]),t=f.useCallback(async b=>{try{await M.updateTodo(a.id,{category:b}),s==null||s()}catch(w){console.error("Failed to update category:",w)}},[a.id,a.title,a.category,s]),c=f.useCallback(async b=>{try{await M.updateTodo(a.id,{customProps:{claudeProjectPath:b}}),s==null||s()}catch(w){console.error("Failed to update Claude project:",w)}},[a.id,s]),d=f.useCallback(async(b,w)=>{try{await Ee.claude.linkSessionToTodo(a.id,b),await M.updateTodo(a.id,{status:P.DOING,description:w}),s==null||s()}catch(O){console.error("Failed to update todo status:",O)}},[a.id,s]),h=f.useMemo(()=>v.map(b=>({value:b.path,label:b.name,variant:"outline",className:"bg-purple-50 text-purple-800 border-purple-200"})),[v]),T=f.useMemo(()=>[{value:"__no_project__",label:"No Project",variant:"outline",className:"bg-gray-50 text-gray-600 border-gray-200"},...h],[h]),u=f.useCallback(b=>{if(!b)return null;const w=new Date(b.value),O=new Date,z=Math.ceil((w.getTime()-O.getTime())/(1e3*60*60*24));return z<0?e.jsx("span",{className:"text-red-500 text-xs",children:"Overdue"}):z===0?e.jsx("span",{className:"text-orange-500 text-xs",children:"Today"}):z===1?e.jsx("span",{className:"text-blue-500 text-xs",children:"Tomorrow"}):e.jsx("span",{className:"text-gray-500 text-xs",children:w.toLocaleDateString()})},[]),g=f.useCallback(b=>{console.log("Todo: ",a),b.stopPropagation(),p()},[p]),C=f.useCallback(b=>{var O;b.stopPropagation(),(((O=a.customProps)==null?void 0:O.sessionIds)??[]).forEach(z=>{window.open(`/claude/${z}`,"_blank")})},[(se=a.customProps)==null?void 0:se.sessionIds]),A=f.useCallback(b=>{b.stopPropagation(),o(a.id)},[a.id,o]);return e.jsxs($e,{ref:m,"data-test":`kanban-card-${a.id.value}`,className:ee("kanban-card p-3 cursor-move hover:shadow-md transition-all bg-white dark:bg-gray-800 relative group",l&&"opacity-50"),children:[e.jsx(Ye,{"data-test":"kanban-card-session-activity",sessionIds:x,className:"absolute top-1 left-1",showCount:!0}),e.jsxs("div",{className:"action-buttons absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity","data-test":"kanban-card-action-buttons",children:[((ne=a.customProps)==null?void 0:ne.sessionIds)&&a.customProps.sessionIds.length>0&&e.jsx($,{"data-test":"kanban-card-session-link-button",variant:"ghost",size:"icon",onClick:C,className:"session-link-button h-6 w-6 hover:bg-transparent",title:`Open ${a.customProps.sessionIds.length} Claude session${a.customProps.sessionIds.length>1?"s":""} in new tab${a.customProps.sessionIds.length>1?"s":""}`,children:e.jsx(fa,{className:"h-3 w-3 text-black hover:text-blue-500 transition-colors","data-test":"kanban-card-external-link-icon"})}),e.jsx("div",{onClick:b=>b.stopPropagation(),"data-test":"kanban-card-create-session-wrapper",children:e.jsx(qe,{"data-test":"kanban-card-create-session-button",variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-transparent",icon:e.jsx(xa,{className:"h-3 w-3 text-black hover:text-purple-500 transition-colors","data-test":"kanban-card-wand-icon"}),initialMessage:k(a),buttonTitle:"Ask Claude for help with this task",projectPath:(re=a.customProps)!=null&&re.claudeProjectPath&&a.customProps.claudeProjectPath!=="__no_project__"?a.customProps.claudeProjectPath:void 0,onSessionCreated:d})}),e.jsx($,{"data-test":"kanban-card-delete-button",variant:"ghost",size:"icon",onClick:A,className:"delete-button h-6 w-6 hover:bg-transparent",children:e.jsx(Ke,{className:"h-3 w-3 text-black hover:text-red-500 transition-colors","data-test":"kanban-card-delete-icon"})})]}),e.jsxs("div",{className:"drag-handle flex items-start gap-2","data-test":"kanban-card-drag-handle",children:[e.jsx(ba,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-1","data-test":"kanban-card-grip-icon"}),e.jsxs("div",{className:"card-content flex-1 space-y-2","data-test":"kanban-card-content",children:[e.jsx("h4",{"data-test":"kanban-card-title",className:"card-title font-medium text-sm line-clamp-2 pr-6 cursor-pointer hover:underline",onClick:g,children:a.title||"Untitled"}),e.jsxs("div",{className:"card-metadata flex flex-wrap gap-1","data-test":"kanban-card-metadata",children:[e.jsx(Ce,{"data-test":"kanban-card-priority-selector",value:a.priority,options:Ta,onChange:N,placeholder:"Search priorities..."}),e.jsx(Xe,{"data-test":"kanban-card-category-selector",value:a.category,onChange:t,placeholder:"Search categories..."}),!y&&T.length>1&&e.jsx(Ce,{"data-test":"kanban-card-project-selector",value:((ie=a.customProps)==null?void 0:ie.claudeProjectPath)??"__no_project__",options:T,onChange:c,placeholder:"Search projects..."})]}),a.dueDate&&e.jsxs("div",{className:"card-due-date flex items-center gap-1","data-test":"kanban-card-due-date",children:[e.jsx(va,{className:"w-3 h-3 text-gray-400","data-test":"kanban-card-clock-icon"}),u(a.dueDate)]}),a.subtasks.length>0&&e.jsxs("div",{className:"card-subtasks flex items-center gap-1 text-xs text-gray-600","data-test":"kanban-card-subtasks",children:[e.jsx(Me,{className:"w-3 h-3","data-test":"kanban-card-alert-icon"}),e.jsxs("span",{children:[a.subtasks.filter(b=>b.isCompleted).length,"/",a.subtasks.length," subtasks"]})]}),a.tags.length>0&&e.jsxs("div",{className:"card-tags flex flex-wrap gap-1","data-test":"kanban-card-tags",children:[a.tags.slice(0,3).map(b=>e.jsx(E,{variant:"outline",className:"text-xs","data-test":`kanban-card-tag-${b}`,children:b},b)),a.tags.length>3&&e.jsxs(E,{variant:"outline",className:"text-xs","data-test":"kanban-card-tags-overflow",children:["+",a.tags.length-3]})]})]})]})]})}function Oa({column:a,todos:l,isDropTarget:n,draggedTodoId:o,currentDropZone:s,insertionIndex:r,kanbanManager:p,isAddingTodo:i,newTodoTitle:m,onDeleteTodo:v,onAddClick:y,onCancelAdd:S,onTodoTitleChange:x,onKeyDown:k,onTodoUpdate:N,openDetailsPanelTodoId:t,onOpenDetailsPanel:c,onCloseDetailsPanel:d}){const h=f.useRef(null),T=ma(p,`${a.id}-zone`,void 0,{status:a.id});return f.useEffect(()=>{var u;if(i){const g=(u=h.current)==null?void 0:u.getTextArea();g&&g.focus()}},[i]),e.jsxs("div",{ref:T,"data-test":`kanban-column-${a.id}`,className:"kanban-column flex-shrink-0 w-80 h-full flex flex-col min-h-0",children:[e.jsx("div",{className:ee("column-footer rounded-b-lg px-4 py-2 border-t-2 flex-shrink-0",a.className),"data-test":`kanban-column-footer-${a.id}`,children:i?e.jsxs("div",{className:"add-todo-input flex gap-2","data-test":`kanban-column-add-todo-input-${a.id}`,children:[e.jsx(ea,{ref:h,"data-test":`kanban-column-new-todo-textarea-${a.id}`,value:m,onChange:u=>x(u.target.value),placeholder:"Enter task title...",onKeyDown:u=>k(u,a.id),className:"flex-1 text-sm bg-white resize-none min-h-[32px]",rows:1}),e.jsx($,{"data-test":`kanban-column-cancel-add-button-${a.id}`,size:"sm",variant:"ghost",onClick:S,className:"h-8 w-8 p-0",children:e.jsx(K,{className:"h-4 w-4","data-test":"kanban-column-cancel-icon"})})]}):e.jsxs($,{"data-test":`kanban-column-add-button-${a.id}`,variant:"ghost",size:"sm",onClick:()=>y(a.id),className:"add-todo-button w-full h-8 text-sm",children:[e.jsx(ue,{className:"h-4 w-4 mr-1","data-test":"kanban-column-plus-icon"}),"Add task"]})}),e.jsx("div",{className:ee("column-header rounded-t-lg px-4 py-3 border-b-2 flex-shrink-0",a.className),"data-test":`kanban-column-header-${a.id}`,children:e.jsxs("div",{className:"flex items-center justify-between","data-test":`kanban-column-header-content-${a.id}`,children:[e.jsx("h3",{className:"column-title font-semibold text-sm","data-test":`kanban-column-title-${a.id}`,children:a.title}),e.jsx(E,{variant:"secondary",className:"count-badge","data-test":`kanban-column-count-badge-${a.id}`,children:l.length})]})}),e.jsxs("div",{"data-test":`kanban-column-content-${a.id}`,className:ee("column-content flex-1 min-h-0 p-2 space-y-2 border overflow-y-auto transition-colors",a.className,n&&"ring-2 ring-primary ring-offset-2"),children:[l.map((u,g)=>{const C=s===a.id&&r===g,A=s===a.id&&r===g+1&&g===l.length-1;return e.jsxs("div",{"data-test":`kanban-column-card-wrapper-${u.id.value}`,children:[C&&e.jsx("div",{className:"insertion-indicator h-1 bg-primary rounded mb-2","data-test":"kanban-column-insertion-indicator-before"}),e.jsx(Fa,{todo:u,isDragging:o===u.id.value,kanbanManager:p,onDelete:v,onUpdate:N,isDetailsPanelOpen:t===u.id.value,onOpenDetailsPanel:()=>c(u.id.value),onCloseDetailsPanel:d}),A&&e.jsx("div",{className:"insertion-indicator h-1 bg-primary rounded mt-2","data-test":"kanban-column-insertion-indicator-after"})]},u.id.value)}),l.length===0&&e.jsx("div",{className:"empty-column-state flex items-center justify-center h-32 text-gray-400 text-sm","data-test":`kanban-column-empty-state-${a.id}`,children:"Drop tasks here"})]})]})}function Aa({todo:a,isOpen:l,onClose:n,onUpdate:o,currentCardIndex:s,totalCardsInColumn:r,onNavigatePrevious:p,onNavigateNext:i}){return e.jsx(aa,{open:l,onOpenChange:m=>!m&&n(),children:e.jsxs(Sa,{"data-test":"kanban-card-details-content",className:ee("fixed inset-y-0 right-0 z-50 h-full w-3/4 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-[900px]","flex flex-col overflow-hidden"),children:[e.jsxs(Ia,{"data-test":"kanban-card-details-close-button",className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsx(ta,{todo:a,isOpen:l,onClose:n,onUpdate:o,currentCardIndex:s,totalCardsInColumn:r,onNavigatePrevious:p,onNavigateNext:i})]})})}const He={all:{id:"all",name:"All",description:"Show all todos across all statuses",statuses:[],visibleColumns:[P.FREEZER,P.BACKLOG,P.SELECTED,P.DOING,P.DONE,P.ARCHIVE]},planning:{id:"planning",name:"Planning",description:"Show todos in planning stages (Freezer, Backlog, Selected)",statuses:[P.FREEZER,P.BACKLOG,P.SELECTED],visibleColumns:[P.FREEZER,P.BACKLOG,P.SELECTED]},doing:{id:"doing",name:"Doing",description:"Show todos in doing stages (Selected, Doing)",statuses:[P.SELECTED,P.DOING],visibleColumns:[P.SELECTED,P.DOING]},done:{id:"done",name:"Done",description:"Show completed and archived todos",statuses:[P.DONE,P.ARCHIVE],visibleColumns:[P.DONE,P.ARCHIVE]}};function We(a){return a==="all"||a==="planning"||a==="doing"||a==="done"}function La(a){return He[a]}function Ra(a,l){const n=He[l];return n?{...a,statuses:n.statuses,priorities:[],categories:[],visibleColumns:n.visibleColumns}:a}function Ba(a){return`Filter ${a+1}`}const Z="all";function _a(a){return{id:Date.now().toString(),name:a,filters:{searchQuery:"",fieldConditions:[],conditionLogic:"OR",statuses:[],priorities:[],categories:[],sortBy:"createdAt",sortOrder:"desc",visibleColumns:[]}}}function za(a,l,n,o){const s={};let r=null;if(We(a)){const p=La(a);p&&(r={searchQuery:"",fieldConditions:[],conditionLogic:"OR",statuses:p.statuses,priorities:[],categories:[],sortBy:"createdAt",sortOrder:"desc",visibleColumns:p.visibleColumns})}else{const p=l.find(i=>i.id===a);p&&(r=p.filters)}if(r){r.priorities.length===1&&(s.priority=r.priorities[0]),r.categories.length===1&&(s.category=r.categories[0]);const p=r.claudeProjectPaths||(r.claudeProjectPath?[r.claudeProjectPath]:[]);p.length===1&&(s.claudeProjectPath=p[0])}if(o!==Z){const p=n.find(i=>i.id===o);if(p){const i=p.filters;i.priorities.length===1&&(s.priority=i.priorities[0]),i.categories.length===1&&(s.category=i.categories[0]);const m=i.claudeProjectPaths||(i.claudeProjectPath?[i.claudeProjectPath]:[]);m.length===1&&(s.claudeProjectPath=m[0])}}return s}const Ka=[{id:P.FREEZER,title:"Freezer",className:"bg-blue-50 dark:bg-blue-950"},{id:P.BACKLOG,title:"Backlog",className:"bg-gray-50 dark:bg-gray-900"},{id:P.SELECTED,title:"Selected",className:"bg-purple-50 dark:bg-purple-950"},{id:P.DOING,title:"Doing",className:"bg-yellow-50 dark:bg-yellow-950"},{id:P.DONE,title:"Done",className:"bg-green-50 dark:bg-green-950"},{id:P.ARCHIVE,title:"Archive",className:"bg-slate-50 dark:bg-slate-900"}];function Ma({todos:a,onTodosUpdate:l,onTodoStatusUpdate:n,visibleColumns:o,activePresetId:s,customPresets:r,spaces:p,activeSpaceId:i}){const[m,v]=f.useState(null),[y,S]=f.useState(null),[x,k]=f.useState(null),[N,t]=f.useState(null),[c,d]=f.useState(""),[h,T]=f.useState(null),u=f.useMemo(()=>({onDragStart:j=>{var D;const I=(D=j.item.data)==null?void 0:D.todoId;v(I)},onDragMove:j=>{var D,L;const I=((L=(D=j.dropZone)==null?void 0:D.data)==null?void 0:L.status)||null;S(I),k(j.sortIndex)},onDrop:async j=>{var je,ke;const I=(je=j.item.data)==null?void 0:je.todoId,D=(ke=j.dropZone.data)==null?void 0:ke.status,L=j.sortIndex??0;if(!I||!D)return;const R=a.find(F=>F.id.value===I);if(!R)return;const B=a.filter(F=>F.status===D),Q=R.status===D,U=Q?B.findIndex(F=>F.id.value===I):-1;let le=L;Q&&U!==-1&&U<L&&(le=L-1);const pe=a.filter(F=>F.status===D&&F.id.value!==I).sort((F,he)=>(F.sortOrder??0)-(he.sortOrder??0)),Ue=Q?le:L;pe.splice(Ue,0,{...R,status:D,sortOrder:0});try{for(let F=0;F<pe.length;F++){const he=pe[F],Je=F;await M.updateTodo(he.id,{status:D,sortOrder:Je})}l()}catch(F){console.error("Failed to update todo:",F)}},onDragEnd:()=>{v(null),S(null),k(null)}}),[a,l]),{manager:g}=ga({snap:{enabled:!1,threshold:10},sort:{enabled:!0,orientation:"vertical",threshold:.5},dragThreshold:5},u),C=j=>a.filter(D=>D.status===j),A=j=>{t(j),d("")},W=()=>{t(null),d("")},se=async j=>{var I,D,L;if(!c.trim()){W();return}try{const R=za(s,r,p,i),B=(L=(D=(I=H.getState().app)==null?void 0:I.claude)==null?void 0:D.ui)==null?void 0:L.selectedProjectPath,Q=B&&B!==be?B:void 0,U=R.claudeProjectPath??Q,le={title:c.trim(),priority:R.priority??G.LOW,category:R.category??sa.OTHER,customProps:U?{claudeProjectPath:U}:void 0};await Ee.column.createTicket(j,le),l(),W()}catch(R){console.error("Failed to create todo:",R)}},ne=(j,I)=>{j.key==="Enter"?se(I):j.key==="Escape"&&W()},re=async j=>{try{await M.deleteTodo(j),l()}catch(I){console.error("Failed to delete todo:",I)}},ie=j=>{T(j)},b=()=>{T(null)},w=j=>{if(!h)return;const I=a.find(B=>B.id.value===h);if(!I)return;const D=a.filter(B=>B.status===I.status).sort((B,Q)=>(B.sortOrder??0)-(Q.sortOrder??0)),L=D.findIndex(B=>B.id.value===h);if(L===-1)return;const R=j==="previous"?L-1:L+1;R<0||R>=D.length||T(D[R].id.value)},O=h?a.find(j=>j.id.value===h)??null:null,z=O?a.filter(j=>j.status===O.status).sort((j,I)=>(j.sortOrder??0)-(I.sortOrder??0)):[],Ve=O&&z.length>0?z.findIndex(j=>j.id.value===h):void 0,Ze=z.length;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"kanban-board-container flex gap-4 h-full py-2",style:{width:"2000px"},"data-test":"kanban-board-container",children:Ka.filter(j=>o.includes(j.id)).map(j=>{const I=C(j.id),D=y===j.id;return e.jsx(Oa,{column:j,todos:I,isDropTarget:D,draggedTodoId:m,currentDropZone:y,insertionIndex:x,kanbanManager:g,isAddingTodo:N===j.id,newTodoTitle:c,onDeleteTodo:re,onAddClick:A,onCancelAdd:W,onTodoTitleChange:d,onKeyDown:ne,onTodoUpdate:l,openDetailsPanelTodoId:h,onOpenDetailsPanel:ie,onCloseDetailsPanel:b},j.id)})}),e.jsx(Aa,{"data-test":"kanban-card-details-panel",todo:O,isOpen:!!h,onClose:b,onUpdate:l,currentCardIndex:Ve,totalCardsInColumn:Ze,onNavigatePrevious:()=>w("previous"),onNavigateNext:()=>w("next")})]})}const we=new na,Se=[{value:"title",label:"Title"},{value:"description",label:"Description"},{value:"id",label:"ID"}],Ie=[{value:"contains",label:"Contains",description:"Text contains substring"},{value:"exact",label:"Exact Match",description:"Exact text match"},{value:"startsWith",label:"Starts With",description:"Text starts with substring"},{value:"endsWith",label:"Ends With",description:"Text ends with substring"},{value:"fuzzy",label:"Fuzzy Match",description:"Approximate string matching (typo-tolerant)"},{value:"regex",label:"Regex",description:"Regular expression match"}],fe=[{value:P.FREEZER,label:"Freezer"},{value:P.BACKLOG,label:"Backlog"},{value:P.SELECTED,label:"Selected"},{value:P.DOING,label:"Doing"},{value:P.DONE,label:"Done"},{value:P.ARCHIVE,label:"Archive"}],De=[{value:G.LOW,label:"Low"},{value:G.MEDIUM,label:"Medium"},{value:G.HIGH,label:"High"},{value:G.URGENT,label:"Urgent"}],Ha=[{value:"createdAt",label:"Created Date"},{value:"updatedAt",label:"Updated Date"},{value:"title",label:"Title"},{value:"priority",label:"Priority"}];function Ge({filters:a,onFiltersChange:l,onReset:n,showAdvanced:o}){var N;const[s,r]=f.useState(o??!1),[p,i]=f.useState(()=>we.getAllCategories());f.useEffect(()=>{if(s){const t=we.getAllCategories();i(t)}},[s]);const m=(t,c)=>{l({...a,[t]:c})},v=(t,c)=>{const d=a[t],h=d.includes(c)?d.filter(T=>T!==c):[...d,c];m(t,h)},y=()=>{const t={id:Math.random().toString(36).substring(7),field:"title",operator:"contains",value:"",caseSensitive:!1};m("fieldConditions",[...a.fieldConditions,t])},S=(t,c)=>{m("fieldConditions",a.fieldConditions.map(d=>d.id===t?{...d,...c}:d))},x=t=>{m("fieldConditions",a.fieldConditions.filter(c=>c.id!==t))},k=a.searchQuery||a.fieldConditions.length>0||a.statuses.length>0||a.priorities.length>0||a.categories.length>0||a.claudeProjectPaths&&a.claudeProjectPaths.length>0;return e.jsxs($e,{className:"kanban-filters-advanced p-4 space-y-4","data-test":"kanban-filters-advanced-container",children:[e.jsxs("div",{className:"search-section flex gap-2","data-test":"kanban-filters-advanced-search-section",children:[e.jsxs("div",{className:"search-input-wrapper relative flex-1","data-test":"kanban-filters-advanced-search-wrapper",children:[e.jsx(ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground","data-test":"kanban-filters-advanced-search-icon"}),e.jsx(de,{"data-test":"kanban-filters-advanced-search-input",placeholder:"Quick search...",value:a.searchQuery,onChange:t=>m("searchQuery",t.target.value),className:"pl-9"})]}),e.jsx($,{"data-test":"kanban-filters-advanced-toggle-button",variant:"outline",size:"icon",onClick:()=>r(!s),className:s?"bg-accent":"",children:e.jsx(ka,{className:"h-4 w-4","data-test":"kanban-filters-advanced-toggle-icon"})}),k&&e.jsx($,{"data-test":"kanban-filters-advanced-reset-button",variant:"outline",size:"icon",onClick:n,children:e.jsx(K,{className:"h-4 w-4","data-test":"kanban-filters-advanced-reset-icon"})})]}),s&&e.jsxs("div",{className:"advanced-filters space-y-4","data-test":"kanban-filters-advanced-section",children:[e.jsxs("div",{className:"field-conditions-section space-y-2 p-3 border rounded-md bg-muted/30","data-test":"kanban-filters-advanced-field-conditions",children:[e.jsxs("div",{className:"flex items-center justify-between","data-test":"kanban-filters-advanced-field-conditions-header",children:[e.jsx(ae,{className:"text-sm font-medium","data-test":"kanban-filters-advanced-field-conditions-label",children:"Field Conditions"}),e.jsxs("div",{className:"flex items-center gap-2","data-test":"kanban-filters-advanced-field-conditions-controls",children:[e.jsxs(J,{value:a.conditionLogic,onValueChange:t=>m("conditionLogic",t),children:[e.jsx(Y,{className:"h-7 w-20 text-xs","data-test":"kanban-filters-advanced-condition-logic-trigger",children:e.jsx(q,{})}),e.jsxs(X,{"data-test":"kanban-filters-advanced-condition-logic-content",children:[e.jsx(V,{value:"OR","data-test":"kanban-filters-advanced-condition-logic-or",children:"OR"}),e.jsx(V,{value:"AND","data-test":"kanban-filters-advanced-condition-logic-and",children:"AND"})]})]}),e.jsxs($,{"data-test":"kanban-filters-advanced-add-condition-button",variant:"outline",size:"sm",onClick:y,className:"h-7 text-xs",children:[e.jsx(ue,{className:"h-3 w-3 mr-1","data-test":"kanban-filters-advanced-add-condition-icon"}),"Add"]})]})]}),a.fieldConditions.length>0?e.jsx("div",{className:"conditions-list space-y-2 mt-2","data-test":"kanban-filters-advanced-conditions-list",children:a.fieldConditions.map((t,c)=>{var d;return e.jsxs("div",{className:"condition-item p-2 border rounded-md space-y-2 bg-background","data-test":`kanban-filters-advanced-condition-item-${t.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2","data-test":`kanban-filters-advanced-condition-row-${t.id}`,children:[e.jsx(E,{variant:"outline",className:"text-xs shrink-0","data-test":`kanban-filters-advanced-condition-number-${t.id}`,children:c+1}),e.jsxs(J,{value:t.field,onValueChange:h=>S(t.id,{field:h}),children:[e.jsx(Y,{className:"h-7 flex-1 text-xs","data-test":`kanban-filters-advanced-condition-field-trigger-${t.id}`,children:e.jsx(q,{})}),e.jsx(X,{"data-test":`kanban-filters-advanced-condition-field-content-${t.id}`,children:Se.map(h=>e.jsx(V,{value:h.value,"data-test":`kanban-filters-advanced-condition-field-${h.value}-${t.id}`,children:h.label},h.value))})]}),e.jsx($,{"data-test":`kanban-filters-advanced-condition-remove-${t.id}`,variant:"ghost",size:"icon",onClick:()=>x(t.id),className:"h-7 w-7 shrink-0",children:e.jsx(Ke,{className:"h-3 w-3","data-test":`kanban-filters-advanced-condition-remove-icon-${t.id}`})})]}),e.jsxs("div",{className:"flex items-center gap-2","data-test":`kanban-filters-advanced-condition-operator-row-${t.id}`,children:[e.jsxs(J,{value:t.operator,onValueChange:h=>S(t.id,{operator:h}),children:[e.jsx(Y,{className:"h-7 w-32 text-xs","data-test":`kanban-filters-advanced-condition-operator-trigger-${t.id}`,children:e.jsx(q,{})}),e.jsx(X,{"data-test":`kanban-filters-advanced-condition-operator-content-${t.id}`,children:Ie.map(h=>e.jsx(V,{value:h.value,"data-test":`kanban-filters-advanced-condition-operator-${h.value}-${t.id}`,children:h.label},h.value))})]}),e.jsx(de,{"data-test":`kanban-filters-advanced-condition-value-${t.id}`,placeholder:"Search value...",value:t.value,onChange:h=>S(t.id,{value:h.target.value}),className:"h-7 text-xs flex-1"})]}),e.jsxs("div",{className:"flex items-center justify-between","data-test":`kanban-filters-advanced-condition-options-${t.id}`,children:[e.jsx("span",{className:"text-xs text-muted-foreground","data-test":`kanban-filters-advanced-condition-description-${t.id}`,children:(d=Ie.find(h=>h.value===t.operator))==null?void 0:d.description}),e.jsxs("div",{className:"flex items-center gap-2","data-test":`kanban-filters-advanced-condition-case-sensitive-${t.id}`,children:[e.jsx(ae,{htmlFor:`case-${t.id}`,className:"text-xs cursor-pointer","data-test":`kanban-filters-advanced-condition-case-label-${t.id}`,children:"Case sensitive"}),e.jsx(Fe,{"data-test":`kanban-filters-advanced-condition-case-switch-${t.id}`,id:`case-${t.id}`,checked:t.caseSensitive??!1,onCheckedChange:h=>S(t.id,{caseSensitive:h}),className:"scale-75"})]})]})]},t.id)})}):e.jsx("div",{className:"empty-state text-xs text-muted-foreground text-center py-3 border rounded-md","data-test":"kanban-filters-advanced-conditions-empty",children:'No field conditions. Click "Add" to create one.'})]}),e.jsxs("div",{className:"sort-section grid grid-cols-2 gap-3","data-test":"kanban-filters-advanced-sort-section",children:[e.jsxs("div",{className:"sort-by","data-test":"kanban-filters-advanced-sort-by-wrapper",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block","data-test":"kanban-filters-advanced-sort-by-label",children:"Sort By"}),e.jsxs(J,{value:a.sortBy,onValueChange:t=>m("sortBy",t),children:[e.jsx(Y,{"data-test":"kanban-filters-advanced-sort-by-trigger",children:e.jsx(q,{})}),e.jsx(X,{"data-test":"kanban-filters-advanced-sort-by-content",children:Ha.map(t=>e.jsx(V,{value:t.value,"data-test":`kanban-filters-advanced-sort-by-${t.value}`,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"sort-order","data-test":"kanban-filters-advanced-sort-order-wrapper",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block","data-test":"kanban-filters-advanced-sort-order-label",children:"Order"}),e.jsxs(J,{value:a.sortOrder,onValueChange:t=>m("sortOrder",t),children:[e.jsx(Y,{"data-test":"kanban-filters-advanced-sort-order-trigger",children:e.jsx(q,{})}),e.jsxs(X,{"data-test":"kanban-filters-advanced-sort-order-content",children:[e.jsx(V,{value:"asc","data-test":"kanban-filters-advanced-sort-order-asc",children:"Ascending"}),e.jsx(V,{value:"desc","data-test":"kanban-filters-advanced-sort-order-desc",children:"Descending"})]})]})]})]}),e.jsxs("div",{className:"status-filter","data-test":"kanban-filters-advanced-status-section",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block","data-test":"kanban-filters-advanced-status-label",children:"Status"}),e.jsx("div",{className:"flex flex-wrap gap-2","data-test":"kanban-filters-advanced-status-badges",children:fe.map(t=>e.jsx(E,{"data-test":`kanban-filters-advanced-status-badge-${t.value}`,variant:a.statuses.includes(t.value)?"default":"outline",className:"cursor-pointer",onClick:()=>v("statuses",t.value),children:t.label},t.value))})]}),e.jsxs("div",{className:"priority-filter","data-test":"kanban-filters-advanced-priority-section",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block","data-test":"kanban-filters-advanced-priority-label",children:"Priority"}),e.jsx("div",{className:"flex flex-wrap gap-2","data-test":"kanban-filters-advanced-priority-badges",children:De.map(t=>e.jsx(E,{"data-test":`kanban-filters-advanced-priority-badge-${t.value}`,variant:a.priorities.includes(t.value)?"default":"outline",className:"cursor-pointer",onClick:()=>v("priorities",t.value),children:t.label},t.value))})]}),e.jsxs("div",{className:"category-filter","data-test":"kanban-filters-advanced-category-section",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block","data-test":"kanban-filters-advanced-category-label",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2","data-test":"kanban-filters-advanced-category-badges",children:p.map(t=>e.jsx(E,{"data-test":`kanban-filters-advanced-category-badge-${t.value}`,variant:a.categories.includes(t.value)?t.variant??"default":"outline",className:`cursor-pointer ${a.categories.includes(t.value)?t.className??"":""}`,onClick:()=>v("categories",t.value),children:t.label},t.value))})]}),e.jsxs("div",{className:"claude-project-filter","data-test":"kanban-filters-advanced-claude-project-section",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block","data-test":"kanban-filters-advanced-claude-project-label",children:"Claude Projects"}),e.jsx(ra,{"data-test":"kanban-filters-advanced-claude-project-selector",multiSelect:!0,value:a.claudeProjectPaths||[],onChange:t=>m("claudeProjectPaths",t)})]}),e.jsxs("div",{className:"show-columns-section space-y-2 p-3 border rounded-md bg-muted/30","data-test":"kanban-filters-advanced-show-columns-section",children:[e.jsx(ae,{className:"text-sm font-medium","data-test":"kanban-filters-advanced-show-columns-label",children:"Show Columns"}),e.jsx("div",{className:"columns-grid grid grid-cols-2 gap-2","data-test":"kanban-filters-advanced-show-columns-grid",children:fe.map(t=>e.jsxs("div",{className:"column-item flex items-center space-x-2","data-test":`kanban-filters-advanced-show-column-item-${t.value}`,children:[e.jsx(Oe,{"data-test":`kanban-filters-advanced-show-column-checkbox-${t.value}`,id:`column-${t.value}`,checked:a.visibleColumns.includes(t.value),onCheckedChange:()=>v("visibleColumns",t.value)}),e.jsx("label",{htmlFor:`column-${t.value}`,className:"text-sm cursor-pointer","data-test":`kanban-filters-advanced-show-column-label-${t.value}`,children:t.label})]},t.value))})]})]}),k&&e.jsxs("div",{className:"active-filters flex flex-wrap gap-2 pt-2 border-t","data-test":"kanban-filters-advanced-active-filters",children:[a.searchQuery&&e.jsxs(E,{variant:"secondary",className:"gap-1","data-test":"kanban-filters-advanced-active-search-badge",children:["Search: ",a.searchQuery,e.jsx(K,{className:"h-3 w-3 cursor-pointer","data-test":"kanban-filters-advanced-active-search-remove",onClick:()=>m("searchQuery","")})]}),a.fieldConditions.map(t=>{var c;return e.jsxs(E,{variant:"secondary",className:"gap-1","data-test":`kanban-filters-advanced-active-condition-${t.id}`,children:[(c=Se.find(d=>d.value===t.field))==null?void 0:c.label,":"," ",t.operator,' "',t.value,'"',e.jsx(K,{className:"h-3 w-3 cursor-pointer","data-test":`kanban-filters-advanced-active-condition-remove-${t.id}`,onClick:()=>x(t.id)})]},t.id)}),a.statuses.map(t=>{var c;return e.jsxs(E,{variant:"secondary",className:"gap-1","data-test":`kanban-filters-advanced-active-status-${t}`,children:[(c=fe.find(d=>d.value===t))==null?void 0:c.label,e.jsx(K,{className:"h-3 w-3 cursor-pointer","data-test":`kanban-filters-advanced-active-status-remove-${t}`,onClick:()=>v("statuses",t)})]},t)}),a.priorities.map(t=>{var c;return e.jsxs(E,{variant:"secondary",className:"gap-1","data-test":`kanban-filters-advanced-active-priority-${t}`,children:[(c=De.find(d=>d.value===t))==null?void 0:c.label,e.jsx(K,{className:"h-3 w-3 cursor-pointer","data-test":`kanban-filters-advanced-active-priority-remove-${t}`,onClick:()=>v("priorities",t)})]},t)}),a.categories.map(t=>{var c;return e.jsxs(E,{variant:"secondary",className:"gap-1","data-test":`kanban-filters-advanced-active-category-${t}`,children:[(c=p.find(d=>d.value===t))==null?void 0:c.label,e.jsx(K,{className:"h-3 w-3 cursor-pointer","data-test":`kanban-filters-advanced-active-category-remove-${t}`,onClick:()=>v("categories",t)})]},t)}),(N=a.claudeProjectPaths)==null?void 0:N.map(t=>e.jsxs(E,{variant:"secondary",className:"gap-1","data-test":`kanban-filters-advanced-active-project-${t}`,children:["Project: ",t,e.jsx(K,{className:"h-3 w-3 cursor-pointer","data-test":`kanban-filters-advanced-active-project-remove-${t}`,onClick:()=>{var c;return m("claudeProjectPaths",((c=a.claudeProjectPaths)==null?void 0:c.filter(d=>d!==t))||[])}})]},t))]})]})}function Wa({spaces:a,activeSpaceId:l,onSpaceSelect:n,onSpaceCreate:o,onSpaceUpdate:s,onSpaceDelete:r,onSpaceConfigOpen:p}){const[i,m]=f.useState(null),[v,y]=f.useState(""),S=(c,d)=>{m(c),y(d)},x=()=>{if(!i||!v.trim()){m(null);return}s(i,v.trim()),m(null),y(""),_.success("Space renamed")},k=()=>{m(null),y("")},N=()=>{const c=a.length+1;o(`Space ${c}`)},t=c=>{const d=a.find(h=>h.id===c);d&&window.confirm(`Delete space "${d.name}"?`)&&(r(c),_.success(`Space "${d.name}" deleted`))};return e.jsxs("div",{className:"kanban-spaces flex items-center gap-2 flex-wrap","data-test":"kanban-spaces-container",children:[e.jsx("span",{className:"text-sm text-muted-foreground mr-1","data-test":"kanban-spaces-label",children:"Spaces:"}),e.jsx(E,{"data-test":"kanban-spaces-all-badge",variant:l===Z?"default":"outline",className:"cursor-pointer",onClick:()=>n(Z),children:"All Spaces"}),a.map(c=>i===c.id?e.jsx("div",{className:"inline-flex items-center gap-1","data-test":`kanban-spaces-editing-${c.id}`,children:e.jsx(de,{"data-test":`kanban-spaces-edit-input-${c.id}`,value:v,onChange:d=>y(d.target.value),onKeyDown:d=>{d.key==="Enter"&&x(),d.key==="Escape"&&k()},onBlur:x,autoFocus:!0,className:"h-6 w-32 text-xs px-2"})},c.id):e.jsxs(E,{"data-test":`kanban-spaces-badge-${c.id}`,variant:l===c.id?"default":"outline",className:"cursor-pointer gap-1 group relative pr-12",onClick:()=>n(c.id),onDoubleClick:()=>S(c.id,c.name),children:[c.name,e.jsxs("div",{className:"absolute right-1 flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity","data-test":`kanban-spaces-actions-${c.id}`,children:[e.jsx($,{"data-test":`kanban-spaces-config-button-${c.id}`,variant:"ghost",size:"icon",className:"h-4 w-4 p-0",onClick:d=>{d.stopPropagation(),p(c.id)},title:"Configure space filters",children:e.jsx(Ca,{className:"h-3 w-3","data-test":"kanban-spaces-settings-icon"})}),e.jsx("button",{"data-test":`kanban-spaces-delete-button-${c.id}`,className:"p-0 border-0 bg-transparent",onClick:d=>{d.stopPropagation(),t(c.id)},title:"Delete space",children:e.jsx(K,{className:"h-3 w-3 cursor-pointer","data-test":"kanban-spaces-delete-icon"})})]})]},c.id)),e.jsx($,{"data-test":"kanban-spaces-create-button",variant:"outline",size:"icon",onClick:N,className:"h-6 w-6",title:"Create new space",children:e.jsx(ue,{className:"h-3 w-3","data-test":"kanban-spaces-plus-icon"})})]})}function Ga({onImportComplete:a}){const[l,n]=f.useState(!1),[o,s]=f.useState(!1),[r,p]=f.useState(!1),[i,m]=f.useState(null),v=f.useRef(null),y=async()=>{try{const N=await M.exportTodos(),t=new Blob([N],{type:"application/json"}),c=URL.createObjectURL(t),d=document.createElement("a");d.href=c,d.download=`todos-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),_.success("Todos exported successfully")}catch(N){console.error("Export failed:",N),_.error("Failed to export todos")}},S=()=>{var N;(N=v.current)==null||N.click()},x=async N=>{var c;const t=(c=N.target.files)==null?void 0:c[0];if(t){s(!0),m(null);try{const d=await t.text(),h=await M.importTodos(d,{replace:r});if(m(h),h.imported>0||h.presetsImported&&h.presetsImported>0||h.spacesImported&&h.spacesImported>0||h.categoriesImported&&h.categoriesImported>0){const T=[];h.imported>0&&T.push(`${h.imported} todo${h.imported>1?"s":""}`),h.presetsImported&&h.presetsImported>0&&T.push(`${h.presetsImported} preset${h.presetsImported>1?"s":""}`),h.spacesImported&&h.spacesImported>0&&T.push(`${h.spacesImported} space${h.spacesImported>1?"s":""}`),h.categoriesImported&&h.categoriesImported>0&&T.push(`${h.categoriesImported} categor${h.categoriesImported>1?"ies":"y"}`),_.success(`Successfully imported ${T.join(", ")}`),a==null||a()}h.skipped>0&&_.warning(`Skipped ${h.skipped} todo${h.skipped>1?"s":""}`),h.errors.length>0&&_.error(`${h.errors.length} error${h.errors.length>1?"s":""} occurred`)}catch(d){console.error("Import failed:",d),_.error(d instanceof Error?d.message:"Failed to import todos"),m({imported:0,skipped:0,errors:[d instanceof Error?d.message:"Unknown error"]})}finally{s(!1),v.current&&(v.current.value="")}}},k=()=>{n(!1),m(null),p(!1)};return e.jsxs("div",{className:"export-import-controls flex items-center gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:y,className:"export-button",children:[e.jsx(Na,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(Ae,{open:l,onOpenChange:n,children:[e.jsx(ia,{asChild:!0,children:e.jsxs($,{variant:"outline",size:"sm",className:"import-button",children:[e.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Import"]})}),e.jsxs(Le,{className:"import-dialog sm:max-w-[500px]",children:[e.jsxs(Re,{children:[e.jsx(Be,{children:"Import Todos, Presets, Spaces & Categories"}),e.jsx(_e,{children:"Import todos, custom filter presets, spaces, and custom categories from a JSON file. You can choose to merge with existing data or replace it entirely."})]}),e.jsxs("div",{className:"import-options space-y-4 py-4",children:[e.jsxs("div",{className:"replace-mode-control flex items-center justify-between",children:[e.jsxs("div",{className:"replace-mode-label",children:[e.jsx(ae,{htmlFor:"replace-mode",className:"text-sm font-medium",children:"Replace existing data"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"When enabled, all existing todos, presets, spaces, and custom categories will be deleted before importing"})]}),e.jsx(Fe,{id:"replace-mode",checked:r,onCheckedChange:p,disabled:o})]}),i&&e.jsxs("div",{className:"import-result space-y-2 p-4 border rounded-md bg-muted/50",children:[e.jsxs("div",{className:"result-summary space-y-1",children:[i.imported>0&&e.jsxs("div",{className:"imported-count flex items-center gap-2 text-sm text-green-600",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Todos imported: ",i.imported]})]}),i.presetsImported!==void 0&&i.presetsImported>0&&e.jsxs("div",{className:"presets-imported-count flex items-center gap-2 text-sm text-green-600",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Presets imported: ",i.presetsImported]})]}),i.spacesImported!==void 0&&i.spacesImported>0&&e.jsxs("div",{className:"spaces-imported-count flex items-center gap-2 text-sm text-green-600",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Spaces imported: ",i.spacesImported]})]}),i.categoriesImported!==void 0&&i.categoriesImported>0&&e.jsxs("div",{className:"categories-imported-count flex items-center gap-2 text-sm text-green-600",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Categories imported: ",i.categoriesImported]})]}),i.skipped>0&&e.jsxs("div",{className:"skipped-count flex items-center gap-2 text-sm text-yellow-600",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsxs("span",{children:["Todos skipped: ",i.skipped]})]})]}),i.errors.length>0&&e.jsxs("div",{className:"error-list space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-red-600",children:"Errors:"}),e.jsxs("ul",{className:"error-items text-xs text-muted-foreground space-y-1",children:[i.errors.slice(0,5).map((N,t)=>e.jsx("li",{className:"error-item",children:N},t)),i.errors.length>5&&e.jsxs("li",{className:"more-errors text-xs italic",children:["... and ",i.errors.length-5," more errors"]})]})]})]})]}),e.jsxs(ze,{children:[e.jsx($,{variant:"outline",onClick:k,disabled:o,className:"close-button",children:"Close"}),e.jsx($,{onClick:S,disabled:o,className:"select-file-button",children:o?"Importing...":"Select File"})]}),e.jsx("input",{ref:v,type:"file",accept:".json,application/json",onChange:x,className:"hidden"})]})]})]})}function Qa({activePreset:a,customPresets:l,editingPresetId:n,editingPresetName:o,onPresetSelect:s,onPresetUpdate:r,onPresetCreate:p,onPresetDelete:i,onStartEditingPreset:m,onSavePresetName:v,onCancelEditingPreset:y,onEditingPresetNameChange:S}){return e.jsxs("div",{className:"filter-presets flex items-center gap-2","data-test":"kanban-preset-badges-container",children:[e.jsx("span",{className:"text-sm text-muted-foreground mr-1","data-test":"kanban-preset-badges-label",children:"Presets:"}),e.jsx(E,{"data-test":"kanban-preset-badge-all",variant:a==="all"?"default":"outline",className:"cursor-pointer",onClick:()=>s("all"),children:"All"}),e.jsx(E,{"data-test":"kanban-preset-badge-planning",variant:a==="planning"?"default":"outline",className:"cursor-pointer",onClick:()=>s("planning"),children:"Planning"}),e.jsx(E,{"data-test":"kanban-preset-badge-doing",variant:a==="doing"?"default":"outline",className:"cursor-pointer",onClick:()=>s("doing"),children:"Doing"}),e.jsx(E,{"data-test":"kanban-preset-badge-done",variant:a==="done"?"default":"outline",className:"cursor-pointer",onClick:()=>s("done"),children:"Done"}),l.map(x=>n===x.id?e.jsx("div",{className:"inline-flex items-center gap-1","data-test":`kanban-preset-editing-${x.id}`,children:e.jsx(de,{"data-test":`kanban-preset-edit-input-${x.id}`,value:o,onChange:k=>S(k.target.value),onKeyDown:k=>{k.key==="Enter"&&v(),k.key==="Escape"&&y()},onBlur:v,autoFocus:!0,className:"h-6 w-32 text-xs px-2"})},x.id):e.jsxs(E,{"data-test":`kanban-preset-badge-${x.id}`,variant:a===x.id?"default":"outline",className:"cursor-pointer gap-1 group",onClick:()=>s(x.id),onDoubleClick:()=>m(x.id,x.name),children:[x.name,e.jsx(K,{"data-test":`kanban-preset-delete-icon-${x.id}`,className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity",onClick:k=>{k.stopPropagation(),i(x.id)}})]},x.id)),l.some(x=>x.id===a)&&e.jsx($,{"data-test":"kanban-preset-update-button",variant:"outline",size:"icon",onClick:r,className:"h-6 w-6",title:"Update current preset",children:e.jsx(ya,{className:"h-3 w-3","data-test":"kanban-preset-save-icon"})}),e.jsx($,{"data-test":"kanban-preset-create-button",variant:"outline",size:"icon",onClick:p,className:"h-6 w-6",title:"Create new preset",children:e.jsx(ue,{className:"h-3 w-3","data-test":"kanban-preset-plus-icon"})})]})}function Va({spaces:a,activeSpaceId:l,onImportComplete:n,onSpaceSelect:o,onSpaceCreate:s,onSpaceUpdate:r,onSpaceDelete:p,onSpaceConfigOpen:i,presetBadgesProps:m}){return e.jsxs("div",{className:"section-header flex items-center justify-between mb-4 flex-shrink-0","data-test":"kanban-board-header",children:[e.jsxs("div",{className:"section-title-area flex items-center gap-4","data-test":"kanban-board-header-title-area",children:[e.jsx("h2",{className:"section-title text-2xl font-bold","data-test":"kanban-board-header-title",children:"Board"}),e.jsx(Ga,{"data-test":"kanban-board-header-export-import",onImportComplete:n})]}),e.jsxs("div",{className:"filter-controls flex flex-col gap-2 items-end","data-test":"kanban-board-header-filter-controls",children:[e.jsx(Wa,{"data-test":"kanban-board-header-spaces",spaces:a,activeSpaceId:l,onSpaceSelect:o,onSpaceCreate:s,onSpaceUpdate:r,onSpaceDelete:p,onSpaceConfigOpen:i}),e.jsx(Qa,{"data-test":"kanban-board-header-presets",...m})]})]})}function Za({open:a,editingSpace:l,editingSpaceFilters:n,onOpenChange:o,onFiltersChange:s,onSave:r,onReset:p}){return e.jsx(Ae,{open:a,onOpenChange:o,"data-test":"kanban-space-config-dialog",children:e.jsxs(Le,{className:"max-w-4xl max-h-[90vh] overflow-y-auto","data-test":"kanban-space-config-dialog-content",children:[e.jsxs(Re,{"data-test":"kanban-space-config-dialog-header",children:[e.jsxs(Be,{"data-test":"kanban-space-config-dialog-title",children:["Configure Space: ",l==null?void 0:l.name]}),e.jsx(_e,{"data-test":"kanban-space-config-dialog-description",children:"Define filters for this space. These filters will be applied as the base layer, with presets layered on top when selected."})]}),n&&e.jsx("div",{className:"space-filter-content py-4","data-test":"kanban-space-config-dialog-filter-content",children:e.jsx(Ge,{"data-test":"kanban-space-config-dialog-filters",filters:n,onFiltersChange:s,onReset:p,showAdvanced:!0})}),e.jsxs(ze,{className:"flex gap-2","data-test":"kanban-space-config-dialog-footer",children:[e.jsx($,{variant:"outline",onClick:()=>o(!1),"data-test":"kanban-space-config-dialog-cancel-button",children:"Cancel"}),e.jsx($,{onClick:r,"data-test":"kanban-space-config-dialog-save-button",children:"Save Space Configuration"})]})]})})}function Ua(){const[a,l]=f.useState([]),[n,o]=f.useState(!0),[s,r]=f.useState(!1),p=f.useRef(null),i=f.useRef(0),m=async(x=!1)=>{try{x&&p.current&&(i.current=p.current.scrollLeft),s||o(!0);const k=await M.getAllTodos({sort:{field:"sortOrder",direction:"asc"}});l(k),s||r(!0)}catch(k){console.error("Failed to load todos:",k)}finally{o(!1)}},v=async(x,k)=>{p.current&&(i.current=p.current.scrollLeft),l(N=>N.map(t=>t.id.value===x.value?{...t,status:k}:t));try{await M.updateTodo(x,{status:k})}catch(N){console.error("Failed to update todo status:",N),await m(!0)}},y=()=>{p.current&&(i.current=p.current.scrollLeft)},S=x=>{p.current&&i.current>0&&(p.current.scrollLeft=i.current)};return f.useEffect(()=>{m()},[]),{todos:a,loading:n,loadTodos:m,handleTodoStatusUpdate:v,scrollContainerRef:p,saveScrollPosition:y,restoreScrollPosition:S}}function ve(){var l,n;const a=((n=(l=H.getState().app)==null?void 0:l.kanban)==null?void 0:n.spaces)||[];return Array.isArray(a)?a:[]}function Ja(a){var o;const l=H.getState(),n=(o=l.app)==null?void 0:o.kanban;H.updateState({app:{...l.app,kanban:{spaces:(n==null?void 0:n.spaces)??[],activeSpaceId:a,customPresets:(n==null?void 0:n.customPresets)??[],activePresetId:(n==null?void 0:n.activePresetId)??"all",currentFilters:(n==null?void 0:n.currentFilters)??te,customCategories:(n==null?void 0:n.customCategories)??[],loading:(n==null?void 0:n.loading)??!1,error:n==null?void 0:n.error}}})}function Ya(a){var p;const l=_a(a),o=[...ve(),l],s=H.getState(),r=(p=s.app)==null?void 0:p.kanban;return H.updateState({app:{...s.app,kanban:{spaces:o,activeSpaceId:(r==null?void 0:r.activeSpaceId)??"all",customPresets:(r==null?void 0:r.customPresets)??[],activePresetId:(r==null?void 0:r.activePresetId)??"all",currentFilters:(r==null?void 0:r.currentFilters)??te,customCategories:(r==null?void 0:r.customCategories)??[],loading:(r==null?void 0:r.loading)??!1,error:r==null?void 0:r.error}}}),l}function xe(a,l){var m;const n=ve(),o=n.findIndex(v=>v.id===a);if(o===-1)return null;const s={...n[o],...l},r=[...n.slice(0,o),s,...n.slice(o+1)],p=H.getState(),i=(m=p.app)==null?void 0:m.kanban;return H.updateState({app:{...p.app,kanban:{spaces:r,activeSpaceId:(i==null?void 0:i.activeSpaceId)??"all",customPresets:(i==null?void 0:i.customPresets)??[],activePresetId:(i==null?void 0:i.activePresetId)??"all",currentFilters:(i==null?void 0:i.currentFilters)??te,customCategories:(i==null?void 0:i.customCategories)??[],loading:(i==null?void 0:i.loading)??!1,error:i==null?void 0:i.error}}}),s}function qa(a){var p;const l=ve(),n=l.filter(i=>i.id!==a);if(n.length===l.length)return!1;const o=H.getState(),s=(p=o.app)==null?void 0:p.kanban,r=(s==null?void 0:s.activeSpaceId)??"all";return H.updateState({app:{...o.app,kanban:{spaces:n,activeSpaceId:r===a?"all":r,customPresets:(s==null?void 0:s.customPresets)??[],activePresetId:(s==null?void 0:s.activePresetId)??"all",currentFilters:(s==null?void 0:s.currentFilters)??te,customCategories:(s==null?void 0:s.customCategories)??[],loading:(s==null?void 0:s.loading)??!1,error:s==null?void 0:s.error}}}),!0}function Xa({filters:a,onFiltersChange:l,activeSpace:n}){const[o,s]=f.useState("all"),[r,p]=f.useState([]),[i,m]=f.useState(null),[v,y]=f.useState(""),S=()=>{try{const u=me();u!=null&&u.customPresets&&p(u.customPresets),u!=null&&u.activePresetId&&s(u.activePresetId),u!=null&&u.currentFilters&&l(u.currentFilters)}catch(u){console.error("Failed to load persisted state:",u)}},x=u=>{try{const g=me();Ne({spaces:(g==null?void 0:g.spaces)??[],activeSpaceId:(g==null?void 0:g.activeSpaceId)??n,customPresets:u,activePresetId:o,currentFilters:a,customCategories:(g==null?void 0:g.customCategories)??[]})}catch(g){console.error("Failed to save persisted state:",g)}},k=u=>{s(u),n!==Z&&xe(n,{lastActivePreset:u});let g=a;if(We(u))g=Ra(a,u),l(g);else{const C=r.find(A=>A.id===u);C&&(g=C.filters,l(C.filters))}try{const C=me();Ne({spaces:(C==null?void 0:C.spaces)??[],activeSpaceId:(C==null?void 0:C.activeSpaceId)??n,customPresets:r,activePresetId:u,currentFilters:g,customCategories:(C==null?void 0:C.customCategories)??[]})}catch(C){console.error("Failed to persist active preset:",C)}},N=()=>{const u=r.find(C=>C.id===o);if(!u)return;const g=r.map(C=>C.id===o?{...C,filters:{...a}}:C);p(g),x(g),_.success(`Preset "${u.name}" updated`)},t=()=>{const u={id:Date.now().toString(),name:Ba(r.length),filters:{...a}},g=[...r,u];p(g),x(g),s(u.id),_.success(`Preset "${u.name}" created`)},c=u=>{const g=r.filter(C=>C.id!==u);p(g),x(g),o===u&&(s("all"),k("all"))},d=(u,g)=>{m(u),y(g)},h=()=>{if(!i||!v.trim()){m(null);return}const u=r.map(g=>g.id===i?{...g,name:v.trim()}:g);p(u),x(u),_.success("Preset renamed"),m(null)},T=()=>{m(null),y("")};return f.useEffect(()=>{S()},[]),{activePreset:o,customPresets:r,editingPresetId:i,editingPresetName:v,applyPreset:k,createNewPreset:t,updatePreset:N,deletePreset:c,startEditingPreset:d,savePresetName:h,cancelEditingPreset:T,setEditingPresetName:y,loadPresets:S}}function et({spaces:a,activeSpace:l,onPresetRestore:n}){const[o,s]=f.useState(!1),[r,p]=f.useState(null),[i,m]=f.useState(null);return{spaceDialogOpen:o,editingSpace:r,editingSpaceFilters:i,setSpaceDialogOpen:s,setEditingSpaceFilters:m,handleSpaceSelect:c=>{if(Ja(c),c!==Z){const d=a.find(h=>h.id===c);d!=null&&d.lastActivePreset&&n(d.lastActivePreset)}},handleSpaceCreate:c=>{Ya(c),_.success(`Space "${c}" created`)},handleSpaceUpdate:(c,d)=>{xe(c,{name:d})},handleSpaceDelete:c=>{qa(c)},handleSpaceConfigOpen:c=>{const d=a.find(h=>h.id===c);d&&(p(d),m(d.filters),s(!0))},handleSpaceConfigSave:()=>{!r||!i||(xe(r.id,{filters:i}),s(!1),_.success("Space configuration updated"))},handleSpaceConfigReset:()=>{m({searchQuery:"",fieldConditions:[],conditionLogic:"OR",statuses:[],priorities:[],categories:[],sortBy:"createdAt",sortOrder:"desc",visibleColumns:[]})}}}function at(a,l){const n=[];for(let o=0;o<=l.length;o++)n[o]=[o];for(let o=0;o<=a.length;o++)n[0][o]=o;for(let o=1;o<=l.length;o++)for(let s=1;s<=a.length;s++)l.charAt(o-1)===a.charAt(s-1)?n[o][s]=n[o-1][s-1]:n[o][s]=Math.min(n[o-1][s-1]+1,n[o][s-1]+1,n[o-1][s]+1);return n[l.length][a.length]}function tt(a,l,n=!1){const o=n?a:a.toLowerCase(),s=n?l:l.toLowerCase(),r=Math.floor(s.length*.2);return at(o,s)<=r}function Qe(a,l,n,o=!1){const s=o?a:a.toLowerCase(),r=o?l:l.toLowerCase();switch(n){case"exact":return s===r;case"contains":return s.includes(r);case"startsWith":return s.startsWith(r);case"endsWith":return s.endsWith(r);case"fuzzy":return tt(a,l,o);case"regex":try{return new RegExp(l,o?"":"i").test(a)}catch{return!1}default:return!0}}function st(a,l){const n=l.filters,o=n.claudeProjectPaths||(n.claudeProjectPath?[n.claudeProjectPath]:[]);if(o.length>0&&(a=a.filter(s=>o.some(r=>{var p,i,m;return r===be?!((p=s.customProps)!=null&&p.claudeProjectPath)||((i=s.customProps)==null?void 0:i.claudeProjectPath)!=="NO_PROJECT_ID":((m=s.customProps)==null?void 0:m.claudeProjectPath)===r}))),n.fieldConditions.length>0){const s=n.fieldConditions.map(r=>p=>{const i=String(p[r.field]||"");return Qe(i,r.value,r.operator,r.caseSensitive)});a=a.multiFilter(s,{combineWith:n.conditionLogic})}if(n.searchQuery&&(a=a.search(n.searchQuery,{searchableFields:["title","description"],caseSensitive:!1})),n.statuses.length>0||n.priorities.length>0||n.categories.length>0){const s=[];n.statuses.length>0&&s.push(r=>n.statuses.includes(r.status)),n.priorities.length>0&&s.push(r=>n.priorities.includes(r.priority)),n.categories.length>0&&s.push(r=>n.categories.includes(r.category)),a=a.multiFilter(s,{combineWith:"AND"})}return a}function nt(a,l){const n=l.claudeProjectPaths||(l.claudeProjectPath?[l.claudeProjectPath]:[]);if(n.length>0&&(a=a.filter(o=>n.some(s=>{var r,p,i;return s===be?!((r=o.customProps)!=null&&r.claudeProjectPath)||((p=o.customProps)==null?void 0:p.claudeProjectPath)!=="NO_PROJECT_ID":((i=o.customProps)==null?void 0:i.claudeProjectPath)===s}))),l.fieldConditions.length>0){const o=l.fieldConditions.map(s=>r=>{const p=String(r[s.field]||"");return Qe(p,s.value,s.operator,s.caseSensitive)});a=a.multiFilter(o,{combineWith:l.conditionLogic})}if(l.searchQuery&&(a=a.search(l.searchQuery,{searchableFields:["title","description"],caseSensitive:!1})),l.statuses.length>0||l.priorities.length>0||l.categories.length>0){const o=[];l.statuses.length>0&&o.push(s=>l.statuses.includes(s.status)),l.priorities.length>0&&o.push(s=>l.priorities.includes(s.priority)),l.categories.length>0&&o.push(s=>l.categories.includes(s.category)),a=a.multiFilter(o,{combineWith:"AND"})}return a}function rt({todos:a,filters:l,spaces:n,activeSpace:o,onScrollRestore:s}){const r=f.useMemo(()=>{let i=new Da(a).chain();if(o!==Z){const v=n.find(y=>y.id===o);v&&(i=st(i,v))}return i=nt(i,l),i=i.sort({field:l.sortBy,direction:l.sortOrder}),i.getItems()},[a,l,n,o]);return f.useEffect(()=>{s(r)},[r,s]),{filteredTodos:r}}const it=f.lazy(()=>ua(()=>import("./TodoTable-CanpUqAQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(a=>({default:a.TodoTable}))),lt=[{id:"kanban-data",title:"Data",description:"View kanban data in JSON format",href:"/todo/kanban/data",icon:wa},{id:"kanban-stats",title:"Statistics",description:"Board statistics and metrics"},{id:"kanban-board",title:"Board",description:"Kanban board view"},{id:"kanban-todo",title:"Todo",description:"Todo section"}],ot=[{label:"Home",href:"/"},{label:"Todo",href:"/todo"},{label:"Kanban"}],Te=te,ct=[];function kt(){const{todos:a,loading:l,loadTodos:n,handleTodoStatusUpdate:o,scrollContainerRef:s,saveScrollPosition:r,restoreScrollPosition:p}=Ua(),[i,m]=f.useState(Te),v=u=>{r(),m(u)},y=f.useMemo(()=>u=>{var g,C;return((C=(g=u.app)==null?void 0:g.kanban)==null?void 0:C.spaces)??ct},[]),S=f.useMemo(()=>u=>{var g,C;return((C=(g=u.app)==null?void 0:g.kanban)==null?void 0:C.activeSpaceId)??Z},[]),x=ce(y),k=ce(S),N=Xa({filters:i,onFiltersChange:v,activeSpace:k}),t={...N,applyPreset:u=>{r(),N.applyPreset(u)},createNewPreset:()=>{r(),N.createNewPreset()},updatePreset:()=>{r(),N.updatePreset()},deletePreset:u=>{r(),N.deletePreset(u)}},c=et({spaces:x,activeSpace:k,onPresetRestore:t.applyPreset}),d={...c,handleSpaceSelect:u=>{r(),c.handleSpaceSelect(u)},handleSpaceCreate:u=>{r(),c.handleSpaceCreate(u)},handleSpaceUpdate:(u,g)=>{r(),c.handleSpaceUpdate(u,g)},handleSpaceDelete:u=>{r(),c.handleSpaceDelete(u)},handleSpaceConfigSave:()=>{r(),c.handleSpaceConfigSave()}},{filteredTodos:h}=rt({todos:a,filters:i,spaces:x,activeSpace:k,onScrollRestore:p}),T=()=>{n(),t.loadPresets()};return e.jsxs(pa,{title:"Kanban Board",description:"Visual board for managing todos with drag-and-drop",sections:lt,headerOffset:80,breadcrumbs:ot,"data-test":"kanban-page-layout",children:[e.jsx("div",{className:"kanban-page-container flex flex-col gap-6","data-test":"kanban-page-container",children:e.jsxs("section",{id:"kanban-board",className:"kanban-board-section flex-shrink-0 min-w-0 flex flex-col",style:{height:"600px"},"data-test":"kanban-board-section",children:[e.jsx(Va,{"data-test":"kanban-page-board-header",spaces:x,activeSpaceId:k,onImportComplete:T,onSpaceSelect:d.handleSpaceSelect,onSpaceCreate:d.handleSpaceCreate,onSpaceUpdate:d.handleSpaceUpdate,onSpaceDelete:d.handleSpaceDelete,onSpaceConfigOpen:d.handleSpaceConfigOpen,presetBadgesProps:{activePreset:t.activePreset,customPresets:t.customPresets,editingPresetId:t.editingPresetId,editingPresetName:t.editingPresetName,onPresetSelect:t.applyPreset,onPresetUpdate:t.updatePreset,onPresetCreate:t.createNewPreset,onPresetDelete:t.deletePreset,onStartEditingPreset:t.startEditingPreset,onSavePresetName:t.savePresetName,onCancelEditingPreset:t.cancelEditingPreset,onEditingPresetNameChange:t.setEditingPresetName}}),e.jsx("div",{className:"filters-wrapper mb-4 flex-shrink-0","data-test":"kanban-page-filters-wrapper",children:e.jsx(Ge,{"data-test":"kanban-page-filters",filters:i,onFiltersChange:v,onReset:()=>v(Te)})}),e.jsxs(la,{defaultValue:"kanban",className:"tabs-container flex-1 min-w-0 flex flex-col","data-test":"kanban-page-tabs",children:[e.jsxs(oa,{className:"tabs-list flex-shrink-0 mb-2","data-test":"kanban-page-tabs-list",children:[e.jsx(Pe,{value:"kanban","data-test":"kanban-page-tab-kanban",children:"Kanban Board"}),e.jsx(Pe,{value:"table","data-test":"kanban-page-tab-table",children:"Table View"})]}),e.jsx(ye,{value:"kanban",className:"tab-content-kanban flex-1 h-[60vh] min-w-0 m-0","data-test":"kanban-page-kanban-content",children:e.jsx("div",{ref:s,className:"board-content h-full overflow-x-auto overflow-y-hidden","data-test":"kanban-page-board-content",children:l?e.jsxs("div",{className:"loading-container flex items-center justify-center h-full","data-test":"kanban-page-loading",children:[e.jsx(ge,{className:"w-8 h-8 animate-spin text-gray-400","data-test":"kanban-page-loading-spinner"}),e.jsx("span",{className:"loading-text ml-3 text-gray-600","data-test":"kanban-page-loading-text",children:"Loading kanban board..."})]}):e.jsx(Ma,{"data-test":"kanban-page-board-instance",todos:h,onTodosUpdate:()=>n(!0),onTodoStatusUpdate:o,visibleColumns:i.visibleColumns,activePresetId:t.activePreset,customPresets:t.customPresets,spaces:x,activeSpaceId:k},"kanban-board-instance")})}),e.jsx(ye,{value:"table",className:"tab-content-table flex-1 min-w-0 overflow-hidden m-0 flex flex-col","data-test":"kanban-page-table-content",children:e.jsx(ca,{storageKey:"kanban-table-column-visibility",initialConfig:da,children:(u,g,C)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-controls flex justify-end mb-2 flex-shrink-0",children:e.jsx(C,{title:"Table Column Visibility",contentClassName:"w-80",children:e.jsx("div",{className:"column-visibility-config space-y-3",children:e.jsxs("div",{className:"config-section",children:[e.jsx("h4",{className:"text-xs font-semibold mb-2 text-muted-foreground",children:"Column Visibility"}),e.jsx("div",{className:"space-y-2",children:Object.keys(u).map(A=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{id:`column-${A}`,checked:u[A],onCheckedChange:W=>{g({...u,[A]:W===!0})}}),e.jsx(ae,{htmlFor:`column-${A}`,className:"text-sm font-normal cursor-pointer",children:A.charAt(0).toUpperCase()+A.slice(1).replace(/([A-Z])/g," $1")})]},A))})]})})})}),e.jsx("div",{className:"table-wrapper flex-1 overflow-auto",children:l?e.jsxs("div",{className:"loading-container flex items-center justify-center h-full",children:[e.jsx(ge,{className:"w-8 h-8 animate-spin text-gray-400"}),e.jsx("span",{className:"loading-text ml-3 text-gray-600",children:"Loading table..."})]}):e.jsx(f.Suspense,{fallback:e.jsx("div",{className:"loading-container flex items-center justify-center h-full",children:e.jsx(ge,{className:"w-8 h-8 animate-spin text-gray-400"})}),children:e.jsx(it,{todos:h,columnVisibility:u})})})]})})})]})]})}),e.jsx(Za,{open:d.spaceDialogOpen,editingSpace:d.editingSpace,editingSpaceFilters:d.editingSpaceFilters,onOpenChange:d.setSpaceDialogOpen,onFiltersChange:d.setEditingSpaceFilters,onSave:d.handleSpaceConfigSave,onReset:d.handleSpaceConfigReset})]})}export{kt as KanbanPage};
