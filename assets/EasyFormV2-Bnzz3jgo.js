import{a as Q,H as y,b as r,E as D}from"./EnemyCircle-Bn6ZwsVI.js";import{r as v,j as M}from"./react-vendor-Byz07MLO.js";import{V as N,L as X,b3 as c,b4 as x,al as ll,aj as al,S as el,h as nl,i as il,j as ol,k as hl,I as z}from"./index-eHP58yiE.js";function vl(l,i,e,n,a){const f=Q.find(t=>t.id===i);if(!f)return;const{baseColor:o,accentColor:h}=f;l.beginPath(),l.arc(e,n,a+2,0,Math.PI*2),l.strokeStyle=h,l.lineWidth=2,l.globalAlpha=.5,l.stroke(),l.globalAlpha=1,l.beginPath(),l.arc(e,n,a,0,Math.PI*2),l.fillStyle=o,l.fill(),l.strokeStyle=h,l.lineWidth=2,l.stroke(),l.beginPath(),l.arc(e-a*.2,n-a*.2,a*.3,0,Math.PI*2),l.fillStyle="white",l.globalAlpha=.2,l.fill(),l.globalAlpha=1,sl(l,i,e,n,a,o)}function sl(l,i,e,n,a,f){switch(i){case y.WARRIOR:l.strokeStyle="white",l.lineWidth=3,l.lineCap="round",l.beginPath(),l.moveTo(e,n-a*.5),l.lineTo(e,n+a*.5),l.stroke(),l.beginPath(),l.moveTo(e-a*.3,n-a*.1),l.lineTo(e+a*.3,n-a*.1),l.stroke();break;case y.KNIGHT:l.globalAlpha=.9,l.fillStyle="white",l.beginPath(),l.moveTo(e,n-a*.4),l.lineTo(e-a*.1,n+a*.2),l.lineTo(e+a*.1,n+a*.2),l.closePath(),l.fill(),l.fillRect(e-a*.25,n,a*.5,a*.08),l.fillRect(e-a*.05,n+a*.1,a*.1,a*.25),l.globalAlpha=1;break;case y.MAGE:l.fillStyle="white",l.globalAlpha=.9,[0,72,144,216,288].forEach(t=>{const s=t*Math.PI/180,b=e+Math.sin(s)*a*.4,g=n-Math.cos(s)*a*.4;l.beginPath(),l.arc(b,g,3,0,Math.PI*2),l.fill()}),l.beginPath(),l.arc(e,n,4,0,Math.PI*2),l.fill(),l.globalAlpha=1;break;case y.HEALER:l.fillStyle="white",l.beginPath(),l.roundRect(e-3,n-a*.4,6,a*.8,2),l.fill(),l.beginPath(),l.roundRect(e-a*.4,n-3,a*.8,6,2),l.fill();break;case y.ROGUE:l.strokeStyle="white",l.lineWidth=3,l.lineCap="round",l.beginPath(),l.moveTo(e-a*.4,n-a*.4),l.lineTo(e+a*.4,n+a*.4),l.stroke(),l.beginPath(),l.moveTo(e+a*.4,n-a*.4),l.lineTo(e-a*.4,n+a*.4),l.stroke(),l.fillStyle="white",l.beginPath(),l.arc(e-a*.35,n-a*.35,3,0,Math.PI*2),l.fill(),l.beginPath(),l.arc(e+a*.35,n-a*.35,3,0,Math.PI*2),l.fill();break;case y.PALADIN:l.fillStyle="white",l.globalAlpha=.9,l.beginPath(),l.moveTo(e,n-a*.45),l.lineTo(e+a*.35,n-a*.2),l.lineTo(e+a*.35,n+a*.1),l.lineTo(e,n+a*.45),l.lineTo(e-a*.35,n+a*.1),l.lineTo(e-a*.35,n-a*.2),l.closePath(),l.fill(),l.globalAlpha=1,l.strokeStyle=f,l.lineWidth=2,l.beginPath(),l.moveTo(e,n-a*.25),l.lineTo(e,n+a*.25),l.stroke(),l.beginPath(),l.moveTo(e-a*.2,n-a*.05),l.lineTo(e+a*.2,n-a*.05),l.stroke();break;case y.NECROMANCER:l.fillStyle="white",l.globalAlpha=.9,l.beginPath(),l.ellipse(e,n-a*.1,a*.35,a*.3,0,0,Math.PI*2),l.fill(),l.fillStyle=f,l.beginPath(),l.arc(e-a*.15,n-a*.15,4,0,Math.PI*2),l.fill(),l.beginPath(),l.arc(e+a*.15,n-a*.15,4,0,Math.PI*2),l.fill(),l.fillStyle="white",l.beginPath(),l.roundRect(e-a*.2,n+a*.1,a*.4,a*.2,2),l.fill(),l.globalAlpha=1;break;case y.RANGER:l.strokeStyle="white",l.lineWidth=3,l.lineCap="round",l.beginPath(),l.moveTo(e-a*.1,n-a*.45),l.quadraticCurveTo(e-a*.4,n,e-a*.1,n+a*.45),l.stroke(),l.lineWidth=1.5,l.beginPath(),l.moveTo(e-a*.1,n-a*.45),l.lineTo(e-a*.1,n+a*.45),l.stroke(),l.lineWidth=2,l.beginPath(),l.moveTo(e-a*.1,n),l.lineTo(e+a*.4,n),l.stroke(),l.fillStyle="white",l.beginPath(),l.moveTo(e+a*.4,n-4),l.lineTo(e+a*.5,n),l.lineTo(e+a*.4,n+4),l.closePath(),l.fill();break;case y.BERSERKER:l.fillStyle="white",[-.25,0,.25].forEach((t,s)=>{l.globalAlpha=.9-s*.1,l.beginPath(),l.moveTo(e+t*a,n+a*.3),l.quadraticCurveTo(e+t*a-a*.15,n,e+t*a,n-a*.4),l.quadraticCurveTo(e+t*a+a*.15,n,e+t*a,n+a*.3),l.fill()}),l.globalAlpha=.8,l.fillStyle="#FEF08A",l.beginPath(),l.arc(e,n,a*.15,0,Math.PI*2),l.fill(),l.globalAlpha=1;break;case y.MONK:l.fillStyle="white",l.beginPath(),l.arc(e,n,a*.4,0,Math.PI*2),l.fill(),l.fillStyle=f,l.beginPath(),l.arc(e,n,a*.4,Math.PI*.5,Math.PI*1.5),l.arc(e,n-a*.2,a*.2,Math.PI*1.5,Math.PI*.5,!0),l.arc(e,n+a*.2,a*.2,Math.PI*1.5,Math.PI*.5),l.fill(),l.fillStyle="white",l.beginPath(),l.arc(e,n-a*.2,3,0,Math.PI*2),l.fill(),l.fillStyle=f,l.beginPath(),l.arc(e,n+a*.2,3,0,Math.PI*2),l.fill();break}}function _l(l,i,e,n,a,f=!1,o=!1){const h=r.find(b=>b.id===i);if(!h)return;const{baseColor:t,accentColor:s}=h;l.beginPath(),l.arc(e,n,a+2,0,Math.PI*2),l.strokeStyle=s,l.lineWidth=2,l.globalAlpha=.5,l.stroke(),l.globalAlpha=1,l.beginPath(),l.arc(e,n,a,0,Math.PI*2),l.fillStyle=f?"#fbbf24":t,l.fill(),o?(l.strokeStyle="#f97316",l.lineWidth=4):(l.strokeStyle=s,l.lineWidth=2),l.stroke(),l.beginPath(),l.arc(e-a*.2,n-a*.2,a*.3,0,Math.PI*2),l.fillStyle="white",l.globalAlpha=.2,l.fill(),l.globalAlpha=1,tl(l,i,e,n,a,s)}function tl(l,i,e,n,a,f){switch(i){case D.GOBLIN_FRIENDLY:fl(l,e,n,a,f),l.beginPath(),l.moveTo(e-a*.2,n+a*.25),l.quadraticCurveTo(e,n+a*.4,e+a*.2,n+a*.25),l.strokeStyle="#1F2937",l.lineWidth=2,l.lineCap="round",l.stroke();break;case D.GOBLIN_ANGRY:l.fillStyle="#FBBF24",l.beginPath(),l.arc(e+a*.35,n-a*.35,a*.25,0,Math.PI*2),l.fill(),l.fillStyle=f,l.beginPath(),l.moveTo(e-a*.45,n-a*.1),l.lineTo(e-a*.55,n-a*.5),l.lineTo(e-a*.25,n-a*.2),l.closePath(),l.fill(),l.beginPath(),l.moveTo(e+a*.45,n-a*.1),l.lineTo(e+a*.55,n-a*.5),l.lineTo(e+a*.25,n-a*.2),l.closePath(),l.fill(),l.strokeStyle=f,l.lineWidth=3,l.lineCap="round",l.beginPath(),l.moveTo(e-a*.35,n-a*.15),l.lineTo(e-a*.1,n-a*.25),l.stroke(),l.beginPath(),l.moveTo(e+a*.35,n-a*.15),l.lineTo(e+a*.1,n-a*.25),l.stroke(),l.fillStyle="white",l.beginPath(),l.ellipse(e-a*.2,n,4,3,0,0,Math.PI*2),l.fill(),l.beginPath(),l.ellipse(e+a*.2,n,4,3,0,0,Math.PI*2),l.fill(),l.fillStyle="#1F2937",l.beginPath(),l.arc(e-a*.18,n,2,0,Math.PI*2),l.arc(e+a*.22,n,2,0,Math.PI*2),l.fill(),l.beginPath(),l.moveTo(e-a*.2,n+a*.35),l.quadraticCurveTo(e,n+a*.2,e+a*.2,n+a*.35),l.strokeStyle="#1F2937",l.lineWidth=2,l.stroke();break;case D.GOBLIN_FIERCE:l.fillStyle=f,l.beginPath(),l.moveTo(e-a*.45,n-a*.1),l.lineTo(e-a*.55,n-a*.5),l.lineTo(e-a*.25,n-a*.2),l.closePath(),l.fill(),l.beginPath(),l.moveTo(e+a*.45,n-a*.1),l.lineTo(e+a*.55,n-a*.5),l.lineTo(e+a*.25,n-a*.2),l.closePath(),l.fill(),l.strokeStyle=f,l.lineWidth=4,l.lineCap="round",l.beginPath(),l.moveTo(e-a*.4,n-a*.1),l.lineTo(e-a*.05,n-a*.25),l.stroke(),l.beginPath(),l.moveTo(e+a*.4,n-a*.1),l.lineTo(e+a*.05,n-a*.25),l.stroke(),l.fillStyle="white",l.beginPath(),l.ellipse(e-a*.2,n,5,2,0,0,Math.PI*2),l.fill(),l.beginPath(),l.ellipse(e+a*.2,n,5,2,0,0,Math.PI*2),l.fill(),l.fillStyle="#EF4444",l.beginPath(),l.arc(e-a*.18,n,1.5,0,Math.PI*2),l.arc(e+a*.22,n,1.5,0,Math.PI*2),l.fill(),l.fillStyle="#1F2937",l.beginPath(),l.moveTo(e-a*.25,n+a*.25),l.lineTo(e-a*.1,n+a*.35),l.lineTo(e,n+a*.25),l.lineTo(e+a*.1,n+a*.35),l.lineTo(e+a*.25,n+a*.25),l.fill(),l.fillStyle="white",l.beginPath(),l.moveTo(e-a*.15,n+a*.25),l.lineTo(e-a*.1,n+a*.15),l.lineTo(e-a*.05,n+a*.25),l.fill(),l.beginPath(),l.moveTo(e+a*.15,n+a*.25),l.lineTo(e+a*.1,n+a*.15),l.lineTo(e+a*.05,n+a*.25),l.fill();break;case D.GOBLIN_SCOUT:l.fillStyle=f,l.beginPath(),l.moveTo(e-a*.45,n-a*.1),l.lineTo(e-a*.55,n-a*.5),l.lineTo(e-a*.25,n-a*.2),l.closePath(),l.fill(),l.beginPath(),l.moveTo(e+a*.45,n-a*.1),l.lineTo(e+a*.55,n-a*.5),l.lineTo(e+a*.25,n-a*.2),l.closePath(),l.fill(),l.fillStyle="#8B4513",l.fillRect(e-a*.5,n-a*.35,a,a*.15),l.fillStyle="#FFD700",l.beginPath(),l.arc(e,n-a*.28,a*.08,0,Math.PI*2),l.fill(),l.fillStyle="white",l.beginPath(),l.arc(e-a*.2,n+a*.05,4,0,Math.PI*2),l.fill(),l.beginPath(),l.arc(e+a*.2,n+a*.05,4,0,Math.PI*2),l.fill(),l.fillStyle="#1F2937",l.beginPath(),l.arc(e-a*.15,n+a*.05,2,0,Math.PI*2),l.arc(e+a*.25,n+a*.05,2,0,Math.PI*2),l.fill(),l.strokeStyle="#1F2937",l.lineWidth=2,l.lineCap="round",l.beginPath(),l.moveTo(e-a*.15,n+a*.3),l.lineTo(e+a*.15,n+a*.3),l.stroke();break;case D.ORC:l.strokeStyle=f,l.lineWidth=3,l.lineCap="round",l.beginPath(),l.moveTo(e-a*.35,n-a*.2),l.lineTo(e-a*.1,n-a*.3),l.stroke(),l.beginPath(),l.moveTo(e+a*.35,n-a*.2),l.lineTo(e+a*.1,n-a*.3),l.stroke(),l.fillStyle="#FEF08A",l.beginPath(),l.arc(e-a*.2,n-a*.05,3,0,Math.PI*2),l.arc(e+a*.2,n-a*.05,3,0,Math.PI*2),l.fill(),l.strokeStyle="white",l.lineWidth=3,l.beginPath(),l.moveTo(e-a*.15,n+a*.15),l.lineTo(e-a*.2,n+a*.4),l.stroke(),l.beginPath(),l.moveTo(e+a*.15,n+a*.15),l.lineTo(e+a*.2,n+a*.4),l.stroke();break;case D.SKELETON:l.fillStyle=f,l.globalAlpha=.3,l.beginPath(),l.ellipse(e,n-a*.05,a*.4,a*.35,0,0,Math.PI*2),l.fill(),l.globalAlpha=1,l.fillStyle=f,l.beginPath(),l.ellipse(e-a*.15,n-a*.1,5,6,0,0,Math.PI*2),l.ellipse(e+a*.15,n-a*.1,5,6,0,0,Math.PI*2),l.fill(),l.beginPath(),l.moveTo(e,n+a*.05),l.lineTo(e-a*.08,n+a*.2),l.lineTo(e+a*.08,n+a*.2),l.closePath(),l.fill(),[-.2,-.07,.07,.2].forEach(o=>{l.fillRect(e+o*a-2,n+a*.28,4,6)});break;case D.SLIME:l.fillStyle=f,l.globalAlpha=.5,l.beginPath(),l.ellipse(e,n+a*.1,a*.5,a*.35,0,0,Math.PI*2),l.fill(),l.globalAlpha=1,l.fillStyle="white",l.globalAlpha=.5,l.beginPath(),l.arc(e-a*.15,n-a*.1,5,0,Math.PI*2),l.fill(),l.globalAlpha=.4,l.beginPath(),l.arc(e+a*.2,n,3,0,Math.PI*2),l.fill(),l.globalAlpha=1,l.fillStyle="white",l.beginPath(),l.ellipse(e-a*.15,n-a*.15,3,4,0,0,Math.PI*2),l.ellipse(e+a*.15,n-a*.15,3,4,0,0,Math.PI*2),l.fill(),l.fillStyle=f,l.beginPath(),l.arc(e-a*.15,n-a*.12,2,0,Math.PI*2),l.arc(e+a*.15,n-a*.12,2,0,Math.PI*2),l.fill();break;case D.BAT:l.fillStyle=f,l.globalAlpha=.8,l.beginPath(),l.moveTo(e-a*.1,n),l.quadraticCurveTo(e-a*.5,n-a*.2,e-a*.55,n-a*.4),l.lineTo(e-a*.35,n-a*.15),l.lineTo(e-a*.45,n-a*.35),l.lineTo(e-a*.2,n-a*.1),l.closePath(),l.fill(),l.beginPath(),l.moveTo(e+a*.1,n),l.quadraticCurveTo(e+a*.5,n-a*.2,e+a*.55,n-a*.4),l.lineTo(e+a*.35,n-a*.15),l.lineTo(e+a*.45,n-a*.35),l.lineTo(e+a*.2,n-a*.1),l.closePath(),l.fill(),l.globalAlpha=1,l.beginPath(),l.moveTo(e-a*.15,n-a*.1),l.lineTo(e-a*.25,n-a*.4),l.lineTo(e-a*.05,n-a*.15),l.fill(),l.beginPath(),l.moveTo(e+a*.15,n-a*.1),l.lineTo(e+a*.25,n-a*.4),l.lineTo(e+a*.05,n-a*.15),l.fill(),l.fillStyle="#FEF08A",l.beginPath(),l.arc(e-a*.1,n+a*.05,3,0,Math.PI*2),l.arc(e+a*.1,n+a*.05,3,0,Math.PI*2),l.fill();break;case D.SPIDER:l.fillStyle=f,l.globalAlpha=.6,l.beginPath(),l.ellipse(e,n+a*.1,a*.25,a*.2,0,0,Math.PI*2),l.fill(),l.globalAlpha=.4,l.beginPath(),l.arc(e,n-a*.15,a*.2,0,Math.PI*2),l.fill(),l.globalAlpha=1,l.strokeStyle=f,l.lineWidth=2,[-.35,-.15,.05,.25].forEach((o,h)=>{l.beginPath(),l.moveTo(e-a*.15,n+o*a),l.quadraticCurveTo(e-a*.4,n+(o-.1)*a,e-a*.5,n+(o+(h%2===0?-.15:.15))*a),l.stroke(),l.beginPath(),l.moveTo(e+a*.15,n+o*a),l.quadraticCurveTo(e+a*.4,n+(o-.1)*a,e+a*.5,n+(o+(h%2===0?-.15:.15))*a),l.stroke()}),l.fillStyle="#EF4444",[[-.12,-.2],[.12,-.2],[-.08,-.1],[.08,-.1]].forEach(([o,h])=>{l.beginPath(),l.arc(e+o*a,n+h*a,2,0,Math.PI*2),l.fill()});break}}function fl(l,i,e,n,a){l.fillStyle=a,l.beginPath(),l.moveTo(i-n*.45,e-n*.1),l.lineTo(i-n*.55,e-n*.5),l.lineTo(i-n*.25,e-n*.2),l.closePath(),l.fill(),l.beginPath(),l.moveTo(i+n*.45,e-n*.1),l.lineTo(i+n*.55,e-n*.5),l.lineTo(i+n*.25,e-n*.2),l.closePath(),l.fill(),l.fillStyle="white",l.beginPath(),l.ellipse(i-n*.2,e-n*.05,4,3,0,0,Math.PI*2),l.ellipse(i+n*.2,e-n*.05,4,3,0,0,Math.PI*2),l.fill(),l.fillStyle="#1F2937",l.beginPath(),l.arc(i-n*.18,e-n*.05,2,0,Math.PI*2),l.arc(i+n*.22,e-n*.05,2,0,Math.PI*2),l.fill()}function bl(l,i,e,n,a,f){const o=Math.min(n*2.5,1),h=Math.max(0,(n-.4)/.3),t=Math.max(0,(n-.6)/.4),s=i-e*.8,b=i+e*.2,g=i-e*.1;let m;if(o<1?m=s+(b-s)*o:m=b+(g-b)*h,l.globalAlpha=1-t,n<.5){l.globalAlpha=.5*(1-n*2);for(let P=1;P<=4;P++)l.beginPath(),l.moveTo(m-e*.3-P*6,i-e*.1),l.lineTo(m-e*.3-P*6-8,i-e*.1),l.strokeStyle=a,l.lineWidth=3-P*.5,l.lineCap="round",l.stroke()}if(l.globalAlpha=1-t,l.beginPath(),l.ellipse(m,i,e*.22,e*.18,0,0,Math.PI*2),l.fillStyle=a,l.fill(),l.strokeStyle=f,l.lineWidth=2,l.stroke(),l.fillStyle=f,l.beginPath(),l.arc(m+e*.12,i-e*.05,3,0,Math.PI*2),l.arc(m+e*.12,i+e*.05,3,0,Math.PI*2),l.fill(),n>.35&&n<.7){const P=(n-.35)/.35;l.globalAlpha=1-P;const p=i+e*.3;for(let T=0;T<8;T++){const A=T*Math.PI*2/8,w=e*.1,R=e*.25+e*.15*P;l.beginPath(),l.moveTo(p+Math.cos(A)*w,i+Math.sin(A)*w),l.lineTo(p+Math.cos(A)*R,i+Math.sin(A)*R),l.strokeStyle=T%2===0?"white":a,l.lineWidth=3-P*2,l.stroke()}l.font=`bold ${8+P*4}px sans-serif`,l.fillStyle="white",l.textAlign="center",l.textBaseline="middle",l.globalAlpha=(1-P)*.8,l.fillText("!",p,i)}l.globalAlpha=1}function gl(l,i,e,n,a,f,o){const h=Math.min(i*2.5,1),t=Math.max(0,(i-.4)/.3),s=Math.max(0,(i-.6)/.4),b=f.x-a.x,g=f.y-a.y,m=Math.sqrt(b*b+g*g),P=Math.atan2(g,b),p=m*.9,T=m*.7;let A;h<1?A=p*h:A=p+(T-p)*t;const w=a.x+Math.cos(P)*A,R=a.y+Math.sin(P)*A,d=(o==null?void 0:o.fistSize)??12;if(l.globalAlpha=1-s,i<.5){l.globalAlpha=.5*(1-i*2);for(let k=1;k<=4;k++){const u=A-k*8;if(u>0){const I=a.x+Math.cos(P)*u,E=a.y+Math.sin(P)*u;l.beginPath(),l.moveTo(I,E),l.lineTo(I-Math.cos(P)*8,E-Math.sin(P)*8),l.strokeStyle=e,l.lineWidth=3-k*.5,l.lineCap="round",l.stroke()}}}if(l.globalAlpha=1-s,l.save(),l.translate(w,R),l.rotate(P),l.beginPath(),l.ellipse(0,0,d,d*.8,0,0,Math.PI*2),l.fillStyle=e,l.fill(),l.strokeStyle=n,l.lineWidth=2,l.stroke(),l.fillStyle=n,l.beginPath(),l.arc(d*.5,-d*.25,2,0,Math.PI*2),l.arc(d*.5,d*.25,2,0,Math.PI*2),l.fill(),l.restore(),i>.35&&i<.7){const k=(i-.35)/.35;l.globalAlpha=1-k;const u=f.x,I=f.y,E=(o==null?void 0:o.impactRays)??8;for(let S=0;S<E;S++){const F=S*Math.PI*2/E,W=5,j=15+10*k;l.beginPath(),l.moveTo(u+Math.cos(F)*W,I+Math.sin(F)*W),l.lineTo(u+Math.cos(F)*j,I+Math.sin(F)*j),l.strokeStyle=S%2===0?"white":e,l.lineWidth=3-k*2,l.stroke()}}l.globalAlpha=1}const K=80,J=10,Pl=8,ml=8;function Z(l,i,e,n,a,f,o,h){const t=Math.min(a*2,1),s=Math.max(0,(a-.5)*2),b=Math.PI*(((h==null?void 0:h.arcStartAngle)??K)/100),g=Math.PI*(((h==null?void 0:h.arcEndAngle)??J)/100),m=(h==null?void 0:h.trailWidth)??Pl,P=(h==null?void 0:h.impactRays)??ml,p=h==null?void 0:h.fistSize,T=b-(b-g)*t,A=n*.55,w=p??n*.2,R=p?p*.8:n*.16,d=(h==null?void 0:h.showArcTrail)??!0;if(l.globalAlpha=1-s,d&&t>.15){const E=b-(b-g)*Math.max(0,t-.25);l.beginPath(),l.arc(i,e,A,T,E,!0),l.strokeStyle=f,l.lineWidth=p?Math.max(4,w*.6):m,l.lineCap="round",l.globalAlpha=.3*(1-s),l.stroke(),l.beginPath(),l.arc(i,e,A,T,E,!0),l.strokeStyle="white",l.lineWidth=p?Math.max(2,w*.3):Math.max(2,m*.4),l.globalAlpha=.5*(1-s),l.stroke()}l.globalAlpha=1-s;const k=i+Math.cos(T)*A,u=e+Math.sin(T)*A;l.beginPath(),l.ellipse(k,u,w,R,T,0,Math.PI*2),l.fillStyle=f,l.fill(),l.strokeStyle=o,l.lineWidth=2,l.stroke(),l.fillStyle="white",l.globalAlpha=.6*(1-s);const I=w*.6;if(l.beginPath(),l.arc(k+Math.cos(T)*I,u+Math.sin(T)*I,Math.max(2,w*.25),0,Math.PI*2),l.fill(),t>.7&&t<=1){const E=(t-.7)/.3,S=i+Math.cos(g)*A,F=e+Math.sin(g)*A;l.globalAlpha=(1-E)*(1-s);const W=p?p*2:n*.2;for(let j=0;j<P;j++){const C=j*Math.PI*2/P+Math.PI*.125,_=W*.3,B=W+W*E;l.beginPath(),l.moveTo(S+Math.cos(C)*_,F+Math.sin(C)*_),l.lineTo(S+Math.cos(C)*B,F+Math.sin(C)*B),l.strokeStyle=j%2===0?"white":f,l.lineWidth=p?3:3-E*2,l.stroke()}}l.globalAlpha=1}const L=.55,pl=10;function Ml(l,i,e,n,a,f,o){const h=(o==null?void 0:o.arcStartAngle)??K,t=(o==null?void 0:o.arcEndAngle)??J,s=Math.PI*(h/100),b=Math.PI*(t/100),g=(o==null?void 0:o.fistSize)??pl,m=(o==null?void 0:o.arcCenterX)??0,P=(o==null?void 0:o.arcCenterY)??0,p=(o==null?void 0:o.showArcGuide)??!1,T=(o==null?void 0:o.lockArcPosition)??!1,A=(o==null?void 0:o.arcRadius)??60,w=(o==null?void 0:o.arcRotation)??0;let R,d,k,u;if(T)d=m,k=P,R=A/L,u=w*Math.PI/180;else{const I=Math.cos(s),E=Math.sin(s),S=Math.cos(b),F=f.x-a.x,W=f.y-a.y;u=Math.atan2(W,F);const j=S-I,_=Math.sqrt(F*F+W*W)/j;R=_/L;const B=-I*_,O=-E*_,H=Math.cos(u),q=Math.sin(u);d=a.x+B*H-O*q,k=a.y+B*q+O*H}if(l.save(),l.translate(d,k),l.rotate(u),p){const I=R*L;l.beginPath(),l.arc(0,0,I,b,s,!0),l.strokeStyle=e,l.lineWidth=2,l.globalAlpha=.4,l.setLineDash([4,4]),l.stroke(),l.setLineDash([]);const E=Math.cos(s)*I,S=Math.sin(s)*I,F=Math.cos(b)*I,W=Math.sin(b)*I;l.globalAlpha=.6,l.beginPath(),l.arc(E,S,4,0,Math.PI*2),l.fillStyle="#22c55e",l.fill(),l.beginPath(),l.arc(F,W,4,0,Math.PI*2),l.fillStyle="#ef4444",l.fill(),l.beginPath(),l.arc(0,0,3,0,Math.PI*2),l.fillStyle="#3b82f6",l.fill(),l.globalAlpha=1}Z(l,0,0,R,i,e,n,{...o,fistSize:g}),l.restore()}function Tl(l,i,e,n,a,f){const o=Math.min(n*2,1),h=Math.max(0,(n-.5)*2);l.globalAlpha=1-h;const t=-Math.PI*.7,s=Math.PI*.3,b=t+(s-t)*o;if(o>.1){const d=t+(s-t)*Math.max(0,o-.3);l.beginPath(),l.arc(i,i,e*.6,d,b,!1),l.strokeStyle=a,l.lineWidth=6,l.lineCap="round",l.globalAlpha=.4*(1-h),l.stroke(),l.beginPath(),l.arc(i,i,e*.6,d,b,!1),l.strokeStyle="white",l.lineWidth=2,l.globalAlpha=.6*(1-h),l.stroke()}l.globalAlpha=1-h;const g=e*.08,m=i+Math.cos(b)*e*.75,P=i+Math.sin(b)*e*.75,p=i+Math.cos(b)*e*.2,T=i+Math.sin(b)*e*.2,A=b+Math.PI/2,w=Math.cos(A)*g,R=Math.sin(A)*g;if(l.beginPath(),l.moveTo(p-w,T-R),l.lineTo(p+w,T+R),l.lineTo(m,P),l.closePath(),l.fillStyle=a,l.fill(),l.strokeStyle=f,l.lineWidth=1,l.stroke(),l.beginPath(),l.moveTo(p,T),l.lineTo(m,P),l.strokeStyle="white",l.lineWidth=2,l.globalAlpha=.7*(1-h),l.stroke(),l.globalAlpha=1-h,l.beginPath(),l.arc(p,T,e*.08,0,Math.PI*2),l.fillStyle=f,l.fill(),o>.3&&o<.9){const d=(o-.3)/.6;l.globalAlpha=(1-d)*(1-h);for(let k=0;k<3;k++){const u=b+(k-1)*.3,I=e*.85+k*3,E=i+Math.cos(u)*I,S=i+Math.sin(u)*I;l.beginPath(),l.arc(E,S,2,0,Math.PI*2),l.fillStyle="white",l.fill()}}l.globalAlpha=1}function Sl(l,i,e,n,a){const f=Math.min(n*2,1),o=Math.max(0,(n-.5)*2);l.globalAlpha=1-o,l.beginPath(),l.moveTo(i-e*.6,i-e*.4);const h=i-e*.6+e*1.2*f,t=i-e*.4+e*.8*f;l.lineTo(h,t),l.strokeStyle="white",l.lineWidth=4,l.lineCap="round",l.stroke(),l.beginPath(),l.moveTo(i+e*.5,i-e*.5);const s=i+e*.5-e*1*f,b=i-e*.5+e*1*f;if(l.lineTo(s,b),l.strokeStyle=a,l.lineWidth=3,l.stroke(),n>.3){const g=(n-.3)/.4;l.globalAlpha=Math.max(0,1-g);for(let m=0;m<8;m++){const P=m*Math.PI*2/8,p=e*.3,T=e*.7,A=p+(T-p)*g;l.beginPath(),l.moveTo(i+Math.cos(P)*p,i+Math.sin(P)*p),l.lineTo(i+Math.cos(P)*A,i+Math.sin(P)*A),l.strokeStyle="white",l.lineWidth=2,l.stroke()}}l.globalAlpha=1}function Al(l,i,e,n,a){const f=n<.3?n/.3:n>.7?1-(n-.7)/.3:1;l.globalAlpha=f,l.fillStyle="white",l.fillRect(i-4,i-e*.4,8,e*.8),l.fillRect(i-e*.4,i-4,e*.8,8),l.globalAlpha=1-n,[-.3,-.1,.1,.3].forEach((s,b)=>{const g=b*.1,m=Math.max(0,Math.min(1,(n-g)/.6)),P=i+e*.3-e*.8*m,p=3*(1-m);l.beginPath(),l.arc(i+s*e,P,p,0,Math.PI*2),l.fillStyle=a,l.globalAlpha=1-m,l.fill()});const h=Math.min(n*2,1),t=e*.2+e*.4*h;l.globalAlpha=1-h,l.beginPath(),l.arc(i,i,t,0,Math.PI*2),l.strokeStyle=a,l.lineWidth=4*(1-h)+1,l.stroke(),l.globalAlpha=1}function kl(l,i,e,n,a,f){const o=Math.min(n*3,1),h=e*.1+e*.7*o;l.globalAlpha=o<.5?o*2:2-o*2,l.beginPath(),l.arc(i,i,h,0,Math.PI*2),l.fillStyle="white",l.fill();const t=n<.3?n/.3:1-(n-.3)/.7;l.globalAlpha=t;for(let s=0;s<12;s++){const b=s*Math.PI*2/12,g=s%2===0?.8:.5;l.beginPath(),l.moveTo(i,i),l.lineTo(i+Math.cos(b)*e*g,i+Math.sin(b)*e*g),l.strokeStyle=s%2===0?a:f,l.lineWidth=s%2===0?3:2,l.stroke()}l.globalAlpha=t,l.font="bold 10px sans-serif",l.fillStyle="white",l.textAlign="center",l.textBaseline="middle",l.fillText("!",i,i),l.globalAlpha=1}function Il(l,i,e,n,a){const f=n<.2?n/.2:n>.6?1-(n-.6)/.4:1;l.globalAlpha=f*.8,l.beginPath(),l.ellipse(i,i-e*.1,e*.25,e*.2,0,0,Math.PI*2),l.fillStyle="white",l.fill(),l.fillStyle=a,l.beginPath(),l.arc(i-e*.1,i-e*.15,2,0,Math.PI*2),l.arc(i+e*.1,i-e*.15,2,0,Math.PI*2),l.fill(),[-.2,0,.2].forEach((h,t)=>{const s=t*.12,b=Math.max(0,Math.min(1,(n-s)/.5)),g=i+e*.7*b,m=4*(1-b*.5);l.globalAlpha=.9*(1-b),l.beginPath(),l.arc(i+h*e,g,m,0,Math.PI*2),l.fillStyle=a,l.fill()}),l.globalAlpha=1}function wl(l,i,e,n,a){[0,.15,.3].forEach(o=>{const h=Math.max(0,Math.min(1,(n-o)/.5)),t=e*.3+e*.5*h;l.globalAlpha=.8*(1-h),l.beginPath(),l.arc(i,i,t,0,Math.PI*2),l.strokeStyle=a,l.lineWidth=2,l.stroke()});const f=n<.2?n/.2:n>.6?1-(n-.6)/.4:1;l.globalAlpha=f*.9,l.beginPath(),l.moveTo(i,i-e*.35),l.lineTo(i+e*.3,i-e*.15),l.lineTo(i+e*.3,i+e*.1),l.lineTo(i,i+e*.35),l.lineTo(i-e*.3,i+e*.1),l.lineTo(i-e*.3,i-e*.15),l.closePath(),l.fillStyle="white",l.fill(),l.globalAlpha=1}function dl(l,i,e,n,a){const f=n<.2?n/.2:1-(n-.2)/.8;l.globalAlpha=f,[0,120,240].forEach(h=>{const t=(h+n*360)*Math.PI/180,s=e*.4,b=i+Math.cos(t)*s,g=i+Math.sin(t)*s;l.beginPath();for(let m=0;m<8;m++){const P=m*Math.PI*2/8,p=m%2===0?5:2,T=b+Math.cos(P)*p,A=g+Math.sin(P)*p;m===0?l.moveTo(T,A):l.lineTo(T,A)}l.closePath(),l.fillStyle=a,l.fill()});const o=n<.2?n/.2:n>.6?1-(n-.6)/.4:1;l.globalAlpha=o,l.beginPath(),l.moveTo(i,i),l.quadraticCurveTo(i+e*.1,i-e*.1,i+e*.15,i),l.quadraticCurveTo(i+e*.1,i+e*.15,i,i+e*.1),l.strokeStyle="white",l.lineWidth=2,l.lineCap="round",l.stroke(),l.globalAlpha=1}function El(l,i,e,n,a,f){const o=i-e*.6+e*1.2*n,h=i,t=e*.25,s=5;for(let g=0;g<s;g++){const m=Math.max(0,n-g*.05),P=i-e*.6+e*1.2*m,p=t*(1-g*.15),T=(1-g/s)*(1-n*.5);l.globalAlpha=T,l.beginPath(),l.arc(P,h,p,0,Math.PI*2),l.fillStyle=g%2===0?a:f,l.fill()}l.globalAlpha=1-n*.3,l.beginPath(),l.arc(o,h,t,0,Math.PI*2);const b=l.createRadialGradient(o,h,0,o,h,t);if(b.addColorStop(0,"white"),b.addColorStop(.4,a),b.addColorStop(1,f),l.fillStyle=b,l.fill(),n<.8){l.globalAlpha=.8*(1-n);for(let g=0;g<4;g++){const m=g*Math.PI/2+n*Math.PI*2,P=o+Math.cos(m)*t*.8,p=h+Math.sin(m)*t*.8;l.beginPath(),l.arc(P,p,2,0,Math.PI*2),l.fillStyle="white",l.fill()}}l.globalAlpha=1}function ul(l,i,e,n,a,f){const o=i-e*.7+e*1.4*n,h=i,t=e*.5;if(l.globalAlpha=1-n*.2,n>.1&&n<.9){l.globalAlpha=.3;for(let s=1;s<=3;s++)l.beginPath(),l.moveTo(o-t-s*8,h),l.lineTo(o-t-s*8-6,h),l.strokeStyle=a,l.lineWidth=2-s*.5,l.stroke()}l.globalAlpha=1-n*.2,l.beginPath(),l.moveTo(o-t,h),l.lineTo(o,h),l.strokeStyle=f,l.lineWidth=3,l.lineCap="round",l.stroke(),l.beginPath(),l.moveTo(o,h),l.lineTo(o+e*.15,h-e*.1),l.lineTo(o+e*.25,h),l.lineTo(o+e*.15,h+e*.1),l.closePath(),l.fillStyle=a,l.fill(),l.beginPath(),l.moveTo(o-t,h),l.lineTo(o-t-e*.1,h-e*.08),l.moveTo(o-t,h),l.lineTo(o-t-e*.1,h+e*.08),l.strokeStyle=a,l.lineWidth=2,l.stroke(),l.globalAlpha=1}function Rl(l,i,e,n,a){const f=Math.min(n*2,1),o=Math.max(0,(n-.4)/.6);l.globalAlpha=1-o;const h=i-e*.5,t=i-e*.3,s=i+e*.6,b=i+e*.2,g=[{x:h,y:t},{x:h+(s-h)*.2+e*.08,y:t+(b-t)*.2-e*.1},{x:h+(s-h)*.4-e*.05,y:t+(b-t)*.4+e*.12},{x:h+(s-h)*.6+e*.1,y:t+(b-t)*.6-e*.05},{x:h+(s-h)*.8-e*.03,y:t+(b-t)*.8+e*.08},{x:s,y:b}];l.beginPath(),l.moveTo(g[0].x,g[0].y);const m=Math.ceil(g.length*f);for(let P=1;P<m;P++)l.lineTo(g[P].x,g[P].y);if(l.strokeStyle="white",l.lineWidth=4,l.lineCap="round",l.lineJoin="round",l.stroke(),l.strokeStyle=a,l.lineWidth=8,l.globalAlpha=.4*(1-o),l.stroke(),f>.5){l.globalAlpha=.6*(1-o);const P=g[2];l.beginPath(),l.moveTo(P.x,P.y),l.lineTo(P.x+e*.25,P.y-e*.2),l.strokeStyle=a,l.lineWidth=2,l.stroke()}if(n>.3&&n<.6){const P=1-Math.abs(n-.45)/.15;l.globalAlpha=P*.5,l.beginPath(),l.arc(s,b,e*.2,0,Math.PI*2),l.fillStyle="white",l.fill()}l.globalAlpha=1}function jl(l,i,e,n,a,f){for(let s=0;s<3;s++){const b=s*.15,g=Math.max(0,Math.min(1,(n-b)/.7)),m=e*.1+e*.8*g,P=.9*(1-g),p=4*(1-g*.7);l.globalAlpha=P,l.beginPath(),l.arc(i,i,m,0,Math.PI*2),l.strokeStyle=s%2===0?a:f,l.lineWidth=p,l.stroke()}const h=Math.min(n*3,1),t=e*.15*(1-h);if(l.globalAlpha=1-h,l.beginPath(),l.arc(i,i,t,0,Math.PI*2),l.fillStyle="white",l.fill(),n<.6){l.globalAlpha=.7*(1-n/.6);for(let s=0;s<8;s++){const b=s*Math.PI*2/8,g=e*.2+e*.4*n,m=g+e*.15;l.beginPath(),l.moveTo(i+Math.cos(b)*g,i+Math.sin(b)*g),l.lineTo(i+Math.cos(b)*m,i+Math.sin(b)*m),l.strokeStyle=a,l.lineWidth=2,l.stroke()}}l.globalAlpha=1}function Wl(l,i,e,n,a,f){const o=Math.min(n*3,1),h=Math.max(0,(n-.2)/.6),t=Math.max(0,(n-.7)/.3);if(n<.4){const s=e*.15*o;l.globalAlpha=o,l.beginPath(),l.arc(i-e*.4,i,s,0,Math.PI*2);const b=l.createRadialGradient(i-e*.4,i,0,i-e*.4,i,s);b.addColorStop(0,"white"),b.addColorStop(1,a),l.fillStyle=b,l.fill();for(let g=0;g<6;g++){const m=g*Math.PI*2/6+n*Math.PI*4,P=e*.3*(1-o*.5),p=i-e*.4+Math.cos(m)*P,T=i+Math.sin(m)*P;l.beginPath(),l.arc(p,T,2,0,Math.PI*2),l.fillStyle=f,l.globalAlpha=o*.7,l.fill()}}if(h>0){const s=e*1.2*Math.min(h*2,1),b=e*.12*(1-t*.5),g=i-e*.4;if(l.globalAlpha=1-t,l.beginPath(),l.moveTo(g,i-b*1.5),l.lineTo(g+s,i-b*.5),l.lineTo(g+s,i+b*.5),l.lineTo(g,i+b*1.5),l.closePath(),l.fillStyle=f,l.globalAlpha=.3*(1-t),l.fill(),l.beginPath(),l.moveTo(g,i-b),l.lineTo(g+s,i-b*.3),l.lineTo(g+s,i+b*.3),l.lineTo(g,i+b),l.closePath(),l.fillStyle=a,l.globalAlpha=.8*(1-t),l.fill(),l.beginPath(),l.moveTo(g,i-b*.4),l.lineTo(g+s,i),l.lineTo(g,i+b*.4),l.closePath(),l.fillStyle="white",l.globalAlpha=.9*(1-t),l.fill(),h>.5&&h<1){const m=g+s;l.globalAlpha=(1-Math.abs(h-.75)/.25)*(1-t),l.beginPath(),l.arc(m,i,e*.15,0,Math.PI*2),l.fillStyle="white",l.fill()}}l.globalAlpha=1}function V(l,i,e,n,a,f,o,h,t,s){const b=h!==void 0&&t!==void 0;switch(i){case"attack":Sl(l,e,n,a,f);break;case"heal":Al(l,e,n,a,f);break;case"critical":kl(l,e,n,a,f,o);break;case"poison":Il(l,e,n,a,f);break;case"shield":wl(l,e,n,a,f);break;case"stun":dl(l,e,n,a,f);break;case"punch":b?gl(l,a,f,o,h,t,s):bl(l,e,n,a,f,o);break;case"hook_punch":b?Ml(l,a,f,o,h,t,s):Z(l,e,e,n,a,f,o,s);break;case"sword_swing":Tl(l,e,n,a,f,o);break;case"fireball":El(l,e,n,a,f,o);break;case"arrow":ul(l,e,n,a,f,o);break;case"lightning":Rl(l,e,n,a,f);break;case"shockwave":jl(l,e,n,a,f,o);break;case"beam":Wl(l,e,n,a,f,o);break}}const Bl={status:{label:"Status Effects",color:"text-amber-600"},physical:{label:"Physical Attacks",color:"text-orange-600"},projectile:{label:"Projectile Effects",color:"text-cyan-600"}},Y=[{id:"attack",name:"Attack",baseColor:"#EF4444",accentColor:"#991B1B",icon:"âš”ï¸",description:"Basic attack slash",category:"status"},{id:"heal",name:"Heal",baseColor:"#22C55E",accentColor:"#166534",icon:"ðŸ’š",description:"Healing sparkles",category:"status"},{id:"critical",name:"Critical",baseColor:"#F59E0B",accentColor:"#B45309",icon:"ðŸ’¥",description:"Critical hit burst",category:"status"},{id:"poison",name:"Poison",baseColor:"#A855F7",accentColor:"#7E22CE",icon:"â˜ ï¸",description:"Toxic drip effect",category:"status"},{id:"shield",name:"Shield",baseColor:"#3B82F6",accentColor:"#1E40AF",icon:"ðŸ›¡ï¸",description:"Protective barrier",category:"status"},{id:"stun",name:"Stun",baseColor:"#FBBF24",accentColor:"#D97706",icon:"â­",description:"Dazed stars",category:"status"},{id:"punch",name:"Punch",baseColor:"#FB923C",accentColor:"#EA580C",icon:"ðŸ‘Š",description:"Heavy fist strike",category:"physical"},{id:"hook_punch",name:"Hook Punch",baseColor:"#DC2626",accentColor:"#991B1B",icon:"ðŸ¥Š",description:"Swinging arc punch",category:"physical"},{id:"sword_swing",name:"Sword Swing",baseColor:"#94A3B8",accentColor:"#475569",icon:"ðŸ—¡ï¸",description:"Wide blade arc",category:"physical"},{id:"fireball",name:"Fireball",baseColor:"#F97316",accentColor:"#C2410C",icon:"ðŸ”¥",description:"Blazing projectile",category:"projectile"},{id:"arrow",name:"Arrow",baseColor:"#84CC16",accentColor:"#4D7C0F",icon:"ðŸ¹",description:"Swift ranged shot",category:"projectile"},{id:"lightning",name:"Lightning",baseColor:"#38BDF8",accentColor:"#0284C7",icon:"âš¡",description:"Electric bolt strike",category:"projectile"},{id:"shockwave",name:"Shockwave",baseColor:"#EC4899",accentColor:"#BE185D",icon:"ðŸ’«",description:"Expanding force wave",category:"projectile"},{id:"beam",name:"Beam",baseColor:"#14B8A6",accentColor:"#0F766E",icon:"âœ¨",description:"Concentrated energy ray",category:"projectile"}],Xl={status:Y.filter(l=>l.category==="status"),physical:Y.filter(l=>l.category==="physical"),projectile:Y.filter(l=>l.category==="projectile")},Fl=600;function Ll({design:l,size:i=60,width:e,height:n,selected:a,onClick:f,sourcePos:o,targetPos:h,noCircle:t=!1,overrides:s}){const b=v.useRef(null),g=v.useRef(null),m=v.useRef(0),P=e??i,p=n??i,T=o!==void 0&&h!==void 0,A=(s==null?void 0:s.baseColor)??l.baseColor,w=(s==null?void 0:s.accentColor)??l.accentColor,R=Fl*(100/((s==null?void 0:s.animationSpeed)??100)),d=v.useCallback(I=>{const E=b.current;if(!E)return;const S=E.getContext("2d");if(!S)return;const F=I-m.current,W=Math.min(F/R,1);S.clearRect(0,0,P,p);const j=Math.min(P,p)/2,C=j-4;!T&&!t&&(S.beginPath(),S.arc(j,j,C+2,0,Math.PI*2),S.strokeStyle=w,S.lineWidth=2,S.globalAlpha=.5,S.stroke(),S.beginPath(),S.arc(j,j,C,0,Math.PI*2),S.fillStyle=A,S.globalAlpha=.3,S.fill(),S.strokeStyle=w,S.lineWidth=2,S.globalAlpha=.5,S.stroke()),S.globalAlpha=1,T?V(S,l.id,j,C,W,A,w,o,h,s):V(S,l.id,j,C,W,A,w,void 0,void 0,s),W<1&&(g.current=requestAnimationFrame(d))},[l.id,P,p,T,t,o,h,A,w,R,s]),k=v.useCallback(()=>{g.current&&cancelAnimationFrame(g.current),m.current=performance.now(),g.current=requestAnimationFrame(d)},[d]);v.useEffect(()=>(k(),()=>{g.current&&cancelAnimationFrame(g.current)}),[k]);const u=I=>{I.stopPropagation(),k(),f==null||f()};return M.jsx("canvas",{ref:b,width:P,height:p,onClick:u,"data-test":`effect-canvas-${l.id}`,className:`cursor-pointer transition-transform hover:scale-110 ${a?"ring-2 ring-offset-2 ring-purple-400 rounded-full":""}`,style:{width:P,height:p}})}function G({field:l,value:i,onChange:e,allValues:n,labelClassName:a,fieldClassName:f}){if(l.hidden)return null;const o=()=>{switch(l.type){case"text":case"email":case"password":case"tel":case"url":return M.jsx(z,{"data-test":`field-${l.name}`,type:l.type,value:i??"",onChange:h=>e(h.target.value),placeholder:l.placeholder,disabled:l.disabled,className:N("h-8 text-sm",f,l.className)});case"number":return M.jsx(z,{"data-test":`field-${l.name}`,type:"number",value:i??"",onChange:h=>e(parseFloat(h.target.value)||0),placeholder:l.placeholder,min:l.min,max:l.max,step:l.step,disabled:l.disabled,className:N("h-8 text-sm",f,l.className)});case"select":return M.jsxs(el,{value:String(i??""),onValueChange:h=>e(h),disabled:l.disabled,children:[M.jsx(nl,{"data-test":`field-${l.name}`,className:N("h-8 text-sm",f,l.className),children:M.jsx(il,{placeholder:l.placeholder??`Select ${l.label.toLowerCase()}`})}),M.jsx(ol,{children:l.options.map(h=>M.jsx(hl,{value:String(h.value),children:h.label},String(h.value)))})]});case"textarea":return M.jsx("textarea",{"data-test":`field-${l.name}`,value:i??"",onChange:h=>e(h.target.value),placeholder:l.placeholder,rows:l.rows??3,disabled:l.disabled,className:N("flex w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",f,l.className)});case"checkbox":return M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(al,{"data-test":`field-${l.name}`,checked:i??!1,onCheckedChange:h=>e(h),disabled:l.disabled,className:l.className}),M.jsx(X,{className:N("text-sm font-normal cursor-pointer",a),onClick:()=>!l.disabled&&e(!i),children:l.label}),l.description&&M.jsx("span",{className:"text-xs text-gray-500",children:l.description})]});case"slider":{const h=i??l.min,t=l.format?l.format(h,n):String(h);return M.jsxs("div",{className:"space-y-2",children:[M.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[M.jsx("span",{children:l.label}),M.jsx("span",{className:"font-medium",children:t})]}),M.jsx(ll,{"data-test":`field-${l.name}`,value:[h],onValueChange:([s])=>e(s),min:l.min,max:l.max,step:l.step??1,disabled:l.disabled,className:N("w-full",l.className)})]})}case"radio":{const h=l.direction??"horizontal";return M.jsx("div",{className:"space-y-2",children:M.jsx(c,{"data-test":`field-${l.name}`,value:String(i??""),onValueChange:t=>{const s=l.options.find(b=>String(b.value)===t);e((s==null?void 0:s.value)??t)},disabled:l.disabled,className:N(h==="horizontal"?"flex gap-4":"flex flex-col gap-2",l.className),children:l.options.map(t=>M.jsxs("div",{className:"flex items-center gap-1.5",children:[M.jsx(x,{"data-test":`field-${l.name}-${t.value}`,value:String(t.value),id:`${l.name}-${t.value}`,className:"h-3.5 w-3.5"}),M.jsx(X,{htmlFor:`${l.name}-${t.value}`,className:N("text-sm font-normal cursor-pointer",a),children:t.label})]},String(t.value)))})})}case"color":return M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("input",{"data-test":`field-${l.name}`,type:"color",value:i??"#000000",onChange:h=>e(h.target.value),disabled:l.disabled,className:N("w-8 h-8 rounded border border-input cursor-pointer",l.className)}),M.jsx("span",{className:"text-xs text-gray-500 font-mono",children:i??"#000000"})]});default:return null}};return l.type==="checkbox"?M.jsx("div",{"data-test":`field-wrapper-${l.name}`,children:o()}):l.type==="slider"?M.jsx("div",{"data-test":`field-wrapper-${l.name}`,children:o()}):M.jsxs("div",{"data-test":`field-wrapper-${l.name}`,className:"space-y-1",children:[M.jsx(X,{className:N("text-xs text-gray-600",a),children:l.label}),o(),l.description&&M.jsx("p",{className:"text-xs text-gray-500",children:l.description})]})}function Nl(l){const i=[];let e,n=[];for(const a of l)a.row&&a.row===e?n.push(a):(n.length>0&&i.push(n),n=[a],e=a.row);return n.length>0&&i.push(n),i}function U({section:l,values:i,onChange:e,labelClassName:n,fieldClassName:a}){const f=Nl(l.fields);return M.jsxs("div",{"data-test":`section-${l.id}`,className:N("space-y-3",l.className),children:[M.jsx("h3",{className:"text-sm font-semibold text-purple-700",children:l.label}),l.description&&M.jsx("p",{className:"text-xs text-gray-500",children:l.description}),M.jsx("div",{className:"space-y-3",children:f.map((o,h)=>{if(o.length===1){const t=o[0];return M.jsx(G,{field:t,value:$(i,t.name),onChange:s=>e(t.name,s),allValues:i,labelClassName:n,fieldClassName:a},t.name)}return M.jsx("div",{"data-test":`field-row-${o[0].row}`,className:"flex gap-3",children:o.map(t=>M.jsx("div",{className:"flex-1 min-w-0",children:M.jsx(G,{field:t,value:$(i,t.name),onChange:s=>e(t.name,s),allValues:i,labelClassName:n,fieldClassName:a})},t.name))},`row-${h}-${o[0].row}`)})})]})}function $(l,i){return i.split(".").reduce((e,n)=>{if(e&&typeof e=="object"&&n in e)return e[n]},l)}function Yl({schema:l,values:i,onChange:e,className:n,sectionClassName:a,fieldClassName:f,labelClassName:o,activeTab:h}){const t=v.useCallback((s,b)=>{e(s,b)},[e]);if(l.fields)return M.jsx("div",{"data-test":"easy-form-v2",className:N("space-y-4",n),children:l.fields.map(s=>M.jsx(G,{field:s,value:$(i,s.name),onChange:b=>t(s.name,b),allValues:i,labelClassName:o,fieldClassName:f},s.name))});if(l.sections)return M.jsx("div",{"data-test":"easy-form-v2",className:N("space-y-6",n),children:l.sections.map(s=>M.jsx(U,{section:s,values:i,onChange:t,labelClassName:o,fieldClassName:f},s.id))});if(l.tabs){const s=l.tabs.find(b=>b.id===h)??l.tabs[0];return s?M.jsx("div",{"data-test":"easy-form-v2",className:N("space-y-6",n),children:s.sections.map(b=>M.jsx(U,{section:b,values:i,onChange:t,labelClassName:o,fieldClassName:f},b.id))}):null}return null}function Gl(l){return l}export{Xl as E,_l as a,Ll as b,Bl as c,vl as d,Yl as e,Y as f,Ml as g,Gl as h};
