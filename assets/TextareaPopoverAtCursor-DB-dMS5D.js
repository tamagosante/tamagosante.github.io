import{r as d,j as i}from"./react-vendor-Byz07MLO.js";import{g as m}from"./cursorPosition-otMhJ5rZ.js";function x({inputRef:t,show:o,children:c,updateOn:u,className:l="",offset:n={top:0,left:0}}){const[s,a]=d.useState(null);return d.useEffect(()=>{if(!o||!t.current){a(null);return}const e=()=>{if(!t.current)return;const p=m(t.current);p&&a({top:p.top+(n.top??0),left:p.left+(n.left??0)})};e();const r=t.current;return r.addEventListener("scroll",e),r.addEventListener("select",e),r.addEventListener("mouseup",e),r.addEventListener("keyup",e),document.addEventListener("selectionchange",e),()=>{r.removeEventListener("scroll",e),r.removeEventListener("select",e),r.removeEventListener("mouseup",e),r.removeEventListener("keyup",e),document.removeEventListener("selectionchange",e)}},[o,t,u,n.top,n.left]),!o||!s?null:i.jsx("div",{className:`popover-at-cursor absolute z-50 ${l}`,style:{top:`${s.top}px`,left:`${s.left}px`},"data-test":"textarea-popover-at-cursor",children:c})}function f({items:t,selectedIndex:o=-1,gridColumns:c=7,onItemClick:u,itemClassName:l="",selectedItemClassName:n="bg-primary text-primary-foreground",unselectedItemClassName:s="bg-muted"}){return i.jsx("div",{className:"popover-grid grid gap-1",style:{gridTemplateColumns:`repeat(${c}, minmax(0, 1fr))`},"data-test":"popover-grid",children:t.map((a,e)=>i.jsx("button",{onClick:()=>u(a,e),className:`grid-item w-8 h-8 flex items-center justify-center rounded hover:bg-accent hover:text-accent-foreground transition-colors text-lg font-medium ${e===o?n:s} ${l}`,"data-test":`popover-grid-item-${e}`,children:a},e))})}function E({children:t,className:o=""}){return i.jsx("div",{className:`keyboard-hints text-xs text-muted-foreground mt-2 text-center ${o}`,"data-test":"popover-keyboard-hints",children:t})}export{f as P,x as T,E as a};
