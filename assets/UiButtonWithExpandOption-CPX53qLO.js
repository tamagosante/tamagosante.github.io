import{r,j as n}from"./react-vendor-Byz07MLO.js";import{H as i,a as q,a2 as z}from"./index-hTFRJyrx.js";import{g as A,O as F,f as G,V as J}from"./icons-yhbeTEay.js";const K={left:J,up:G,right:F,down:A},Z=({children:y,expandContent:R,expandTitle:j,onClick:c,variant:E="outline",size:P="icon",popoverSize:m={width:320,height:400},resizable:N=!0,headerActions:k,className:I,disabled:s=!1,title:B,dataTest:e,expandDirection:a="left",onHoldRepeat:f,holdRepeatInterval:v=300})=>{const[w,p]=r.useState(!1),[O,S]=r.useState(null),U=r.useRef(null),h=r.useRef(null),o=r.useRef(null),g=r.useRef(!1);r.useEffect(()=>()=>{o.current&&clearInterval(o.current)},[]);const $=r.useCallback(()=>{!f||s||(g.current=!0,o.current=setInterval(()=>{g.current&&!s&&f()},v))},[f,v,s]),d=r.useCallback(()=>{g.current=!1,o.current&&(clearInterval(o.current),o.current=null)},[]),H=K[a],V=C=>{if(C.stopPropagation(),w){p(!1);return}if(h.current){const t=h.current.getBoundingClientRect(),{width:x,height:b}=m;let u,l;switch(a){case"up":u=t.left+t.width/2-x/2,l=t.top-b-8;break;case"down":u=t.left+t.width/2-x/2,l=t.bottom+8;break;case"right":u=t.right+8,l=t.top+t.height/2-b/2;break;case"left":default:u=t.left-x-8,l=t.top+t.height/2-b/2;break}S({x:u,y:l})}p(!0)},L=C=>{s||c==null||c()},M=()=>{switch(a){case"up":return"top-0 left-0 right-0 -translate-y-full flex-col";case"down":return"bottom-0 left-0 right-0 translate-y-full flex-col-reverse";case"right":return"right-0 top-0 bottom-0 translate-x-full flex-row-reverse";case"left":default:return"left-0 top-0 bottom-0 -translate-x-full flex-row"}},W=()=>{switch(a){case"up":return"py-1 rounded-t-md";case"down":return"py-1 rounded-b-md";case"right":return"px-1 rounded-r-md";case"left":default:return"px-1 rounded-l-md"}},_=()=>{switch(a){case"up":case"down":return"h-[3px] w-full";case"right":case"left":default:return"w-[3px] h-full"}};return n.jsxs("div",{ref:U,className:i("relative inline-flex group",I),"data-test":e?`${e}-container`:"ui-button-with-expand-container",children:[n.jsxs("div",{className:i("absolute flex items-stretch",M(),"opacity-0 group-hover:opacity-100 transition-opacity duration-150","pointer-events-none group-hover:pointer-events-auto"),"data-test":e?`${e}-expand-trigger`:"ui-button-expand-trigger",children:[n.jsx("button",{type:"button",onClick:V,className:i("flex items-center justify-center",W(),"bg-foreground/5 hover:bg-foreground/10","transition-colors duration-150","cursor-pointer"),"aria-label":"Expand options",title:"Expand options","data-test":e?`${e}-caret-button`:"ui-button-caret-button",children:n.jsx(H,{className:"h-3 w-3 text-foreground/60"})}),n.jsx("div",{className:i("bg-foreground/10",_()),"data-test":e?`${e}-strip`:"ui-button-strip"})]}),n.jsx(q,{ref:h,variant:E,size:P,onClick:L,onPointerDown:$,onPointerUp:d,onPointerLeave:d,onPointerCancel:d,disabled:s,title:B,"data-test":e||"ui-button-with-expand-main",children:y}),n.jsx(z,{isVisible:w,onClose:()=>p(!1),title:j,triggerPosition:O??void 0,initialSize:m,resizable:N,shouldCloseManually:!0,headerActions:k,children:R})]})};export{Z as U};
