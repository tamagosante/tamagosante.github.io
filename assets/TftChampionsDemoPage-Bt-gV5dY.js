import{r as u,j as e,h as z}from"./react-vendor-Byz07MLO.js";import{B as O}from"./Breadcrumbs-KCfVAlqp.js";import{a as k,I as L,m as H,n as q,o as f,p as b}from"./index-CJ-Awmlc.js";import{u as A,a as W,U as I,b as J,c as K,d as E,T as Q}from"./UiDataTableColumnFilter-D9W5N310.js";import{g as X,O as Y,l as Z,d as ee}from"./icons-Detj0uxE.js";import{T as te}from"./TftCardTabs-DP2w7Gz4.js";import"./radix-ui-B6r6BEmy.js";import"./utils-DjFvUtuq.js";import"./ui-utils-BxIQ3qGg.js";import"./SFSService-Ce-En6iC.js";const R="http://localhost:3030",$=`${R}/api/tft`,se=`${R}/api/tft-champion-image`,ae=`${R}/api/tft-item-image`,ne=`${R}/api/tft-trait-image`,j=[{id:"name",label:"Name",type:"string"},{id:"cost",label:"Cost",type:"string"},{id:"traits",label:"Traits",type:"string"},{id:"type",label:"Type",type:"string"},{id:"unlockCondition",label:"Unlock",type:"string"},{id:"ability.name",label:"Ability Name",type:"string"},{id:"ability.manaCost",label:"Mana Cost",type:"string"},{id:"ability.description",label:"Description",type:"string"},{id:"ability.activation.kind",label:"Act. Kind",type:"string"},{id:"ability.activation.type",label:"Act. Type",type:"string"},{id:"ability.activation.value",label:"Act. Value",type:"string"},{id:"ability.activation.valuePerLevel",label:"Per Level",type:"string"}],ie=[{field:"cost",label:"Cost",type:"string"},{field:"type",label:"Type",type:"string"},{field:"traits",label:"Traits",type:"string"}],N=[{id:"id",label:"ID",type:"string"},{id:"name",label:"Name",type:"string"}];function v(t,s="splash"){return`${se}?name=${encodeURIComponent(t)}&type=${s}`}function B(t){return`${ae}?name=${encodeURIComponent(t)}`}function M(t){return`${ne}?name=${encodeURIComponent(t)}`}function re(t){const s=new Map;for(const a of t){const m=a.traits.split(", ").filter(Boolean);for(const o of m)s.has(o)||s.set(o,[]),s.get(o).push(a.name)}return Array.from(s.entries()).map(([a,m])=>({name:a,championCount:m.length,champions:m.sort()})).sort((a,m)=>a.name.localeCompare(m.name))}function oe(t){return{id:t.id,name:t.name,image:t.image}}function le(t){const s=t.ability.activation[0];return{name:t.name,cost:t.cost,traits:t.traits.join(", "),type:t.type,unlockCondition:t.unlockCondition,"ability.name":t.ability.name,"ability.manaCost":t.ability.manaCost,"ability.description":t.ability.description,"ability.activation.kind":(s==null?void 0:s.kind)??"","ability.activation.type":(s==null?void 0:s.type)??"","ability.activation.value":(s==null?void 0:s.value)??"","ability.activation.valuePerLevel":(s==null?void 0:s.valuePerLevel)??""}}function ce(t){return{name:t.name,cost:parseInt(t.cost,10)||0,traits:t.traits.map(s=>({name:s,iconUrl:M(s)})),type:t.type,unlockCondition:t.unlockCondition||void 0,ability:{name:t.ability.name,manaCost:t.ability.manaCost,description:t.ability.description,activation:t.ability.activation.map(s=>({kind:s.kind,type:s.type,value:s.value,valuePerLevel:s.valuePerLevel}))},imageUrl:v(t.name,"splash"),abilityIconUrl:v(t.name,"square")}}function de({logger:t}={}){const[s,a]=u.useState([]),[m,o]=u.useState([]),[c,l]=u.useState(!0),[d,n]=u.useState(null),i=u.useCallback(async()=>{l(!0),n(null);try{const p=await fetch(`${$}/champions`);if(!p.ok)throw new Error(`API error: ${p.status}`);const r=await p.json();o(r.champions);const h=r.champions.map(le);a(h),t==null||t.debug(`Fetched ${r.count} TFT champions`)}catch(p){const r=p instanceof Error?p.message:"Failed to fetch champions";n(r),t==null||t.error(`TFT API error: ${r}`)}finally{l(!1)}},[t]);return u.useEffect(()=>{i()},[i]),{champions:s,rawChampions:m,loading:c,error:d,fetchChampions:i}}function me({logger:t}={}){const[s,a]=u.useState([]),[m,o]=u.useState(!0),[c,l]=u.useState(null),d=u.useCallback(async()=>{o(!0),l(null);try{const n=await fetch(`${$}/items`);if(!n.ok)throw new Error(`API error: ${n.status}`);const i=await n.json(),p=i.items.map(oe);a(p),t==null||t.debug(`Fetched ${i.count} TFT items`)}catch(n){const i=n instanceof Error?n.message:"Failed to fetch items";l(i),t==null||t.error(`TFT Items API error: ${i}`)}finally{o(!1)}},[t]);return u.useEffect(()=>{d()},[d]),{items:s,loading:m,error:c,fetchItems:d}}const pe={id:"image",header:"Image",cellRenderer:t=>e.jsx("img",{src:v(t.name,"square"),alt:t.name,className:"w-12 h-12 object-contain",onError:s=>{s.target.style.display="none"}})},ue=[pe,...j.map(t=>({id:t.id,accessorKey:t.id,header:t.label}))];function he({champions:t}){const s=A({data:t}),a=W({data:s.computed.processedData,groupableFields:ie}),[m,o]=u.useState({}),[c,l]=u.useState(!1),d=u.useCallback(r=>{const h=j.find(x=>x.id===r);return(h==null?void 0:h.type)??"string"},[]),n=u.useCallback((r,h)=>{const x=s.state.filters.find(g=>g.field===r);x&&s.actions.removeFilter(x.id),s.actions.addFilter({...h,field:r}),o(g=>({...g,[r]:h}))},[s.actions,s.state.filters]),i=u.useCallback(r=>{const h=s.state.filters.find(x=>x.field===r);h&&s.actions.removeFilter(h.id),o(x=>{const g={...x};return delete g[r],g})},[s.actions,s.state.filters]),p=u.useCallback(r=>r in m,[m]);return e.jsxs("div",{className:"border rounded-lg p-4","data-test":"table-section",children:[e.jsx("div",{className:"mb-4","data-test":"filter-section",children:e.jsx(I,{columns:j,filters:s.state.filters,searchTerm:s.state.searchTerm,caseSensitive:s.state.caseSensitive,exactMatch:s.state.exactMatch,onSearchChange:s.actions.setSearchTerm,onCaseSensitiveChange:s.actions.setCaseSensitive,onExactMatchChange:s.actions.setExactMatch,onAddFilter:s.actions.addFilter,onRemoveFilter:s.actions.removeFilter,onClearFilters:s.actions.clearFilters})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4","data-test":"table-toolbar",children:[e.jsx(k,{variant:c?"default":"outline",size:"sm",onClick:()=>l(!c),"data-test":"compact-mode-toggle",children:"Compact"}),e.jsx(J,{groupableFields:a.computed.groupableFields,selectedField:a.state.groupConfig.primaryField,secondaryFields:a.state.groupConfig.secondaryFields,onFieldSelect:a.actions.setGroupBy,onAddSecondary:a.actions.addGroupLevel,onRemoveSecondary:r=>a.actions.removeGroupLevel(r+1)}),e.jsx(K,{enabled:a.state.sliceConfig.enabled,currentSlice:a.state.sliceConfig.currentSlice,totalSlices:a.computed.totalSlices,sliceSize:a.state.sliceConfig.sliceSize,sliceSizeOptions:a.state.sliceConfig.sliceSizeOptions,onToggle:a.actions.toggleSlicing,onSliceSizeChange:a.actions.setSliceSize,onNextSlice:a.actions.nextSlice,onPreviousSlice:a.actions.previousSlice,hasNext:a.computed.hasNextSlice,hasPrevious:a.computed.hasPreviousSlice,sliceDisplay:a.computed.sliceDisplay})]}),e.jsxs("div",{className:"mb-4 text-sm text-muted-foreground","data-test":"table-row-count",children:[s.computed.filteredCount," ",s.computed.filteredCount===1?"champion":"champions",a.tableProps.isGrouped&&` in ${a.computed.totalGroups} groups`]}),e.jsx("div",{className:"rounded-md border overflow-x-auto","data-test":"table-container",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{"data-test":"header-row",children:[e.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium uppercase tracking-wider w-16","data-test":"column-header-image",children:"Image"}),j.map(r=>{var g,w;const h=((g=s.state.sort)==null?void 0:g.field)===r.id,x=h?(w=s.state.sort)==null?void 0:w.direction:null;return e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer select-none hover:bg-muted/80","data-test":`column-header-${r.id}`,onClick:()=>s.actions.toggleSort(r.id),children:e.jsxs("div",{className:"flex items-center gap-1",children:[r.label,h&&e.jsx("span",{"data-test":`sort-indicator-${r.id}`,children:x==="asc"?"▲":"▼"}),e.jsx(E,{columnId:r.id,columnLabel:r.label,columnType:d(r.id),currentFilter:m[r.id],onApplyFilter:y=>n(r.id,y),onClearFilter:()=>i(r.id),isActive:p(r.id)})]})},r.id)})]})}),a.tableProps.isGrouped?e.jsx(Q,{rows:a.tableProps.data,columns:ue,onToggleGroup:a.actions.toggleGroup}):e.jsx(xe,{data:a.state.sliceConfig.enabled?a.tableProps.data.map(r=>r.data):s.computed.processedData,compactMode:c})]})})]})}function xe({data:t,compactMode:s}){if(t.length===0)return e.jsx("tbody",{"data-test":"table-body",children:e.jsx("tr",{children:e.jsx("td",{colSpan:j.length+1,className:"px-4 py-8 text-center text-sm text-muted-foreground","data-test":"no-results-message",children:"No champions found"})})});const a=s?"px-4 py-1 text-sm max-w-[150px] truncate":"px-4 py-3 text-sm",m=s?"w-8 h-8 object-contain":"w-12 h-12 object-contain";return e.jsx("tbody",{"data-test":"table-body",className:"bg-background divide-y divide-border",children:t.map((o,c)=>e.jsxs("tr",{"data-test":`data-row-${c}`,className:"hover:bg-muted",children:[e.jsx("td",{className:"px-2 py-1","data-test":`image-cell-${c}`,children:e.jsx("img",{src:v(o.name,"square"),alt:o.name,className:m,onError:l=>{l.target.style.display="none"}})}),j.map(l=>e.jsx("td",{className:a,title:s?String(o[l.id]??""):void 0,children:String(o[l.id]??"")},l.id))]},c))})}function ge({items:t}){const s=A({data:t}),[a,m]=u.useState({}),o=u.useCallback(n=>{const i=N.find(p=>p.id===n);return(i==null?void 0:i.type)??"string"},[]),c=u.useCallback((n,i)=>{const p=s.state.filters.find(r=>r.field===n);p&&s.actions.removeFilter(p.id),s.actions.addFilter({...i,field:n}),m(r=>({...r,[n]:i}))},[s.actions,s.state.filters]),l=u.useCallback(n=>{const i=s.state.filters.find(p=>p.field===n);i&&s.actions.removeFilter(i.id),m(p=>{const r={...p};return delete r[n],r})},[s.actions,s.state.filters]),d=u.useCallback(n=>n in a,[a]);return e.jsxs("div",{className:"border rounded-lg p-4","data-test":"items-table-section",children:[e.jsx("div",{className:"mb-4","data-test":"items-filter-section",children:e.jsx(I,{columns:N,filters:s.state.filters,searchTerm:s.state.searchTerm,caseSensitive:s.state.caseSensitive,exactMatch:s.state.exactMatch,onSearchChange:s.actions.setSearchTerm,onCaseSensitiveChange:s.actions.setCaseSensitive,onExactMatchChange:s.actions.setExactMatch,onAddFilter:s.actions.addFilter,onRemoveFilter:s.actions.removeFilter,onClearFilters:s.actions.clearFilters})}),e.jsxs("div",{className:"mb-4 text-sm text-muted-foreground","data-test":"items-row-count",children:[s.computed.filteredCount," ",s.computed.filteredCount===1?"item":"items"]}),e.jsx("div",{className:"rounded-md border overflow-x-auto","data-test":"items-table-container",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{"data-test":"items-header-row",children:[e.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium uppercase tracking-wider w-16","data-test":"items-column-header-image",children:"Image"}),N.map(n=>{var r,h;const i=((r=s.state.sort)==null?void 0:r.field)===n.id,p=i?(h=s.state.sort)==null?void 0:h.direction:null;return e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer select-none hover:bg-muted/80","data-test":`items-column-header-${n.id}`,onClick:()=>s.actions.toggleSort(n.id),children:e.jsxs("div",{className:"flex items-center gap-1",children:[n.label,i&&e.jsx("span",{"data-test":`items-sort-indicator-${n.id}`,children:p==="asc"?"▲":"▼"}),e.jsx(E,{columnId:n.id,columnLabel:n.label,columnType:o(n.id),currentFilter:a[n.id],onApplyFilter:x=>c(n.id,x),onClearFilter:()=>l(n.id),isActive:d(n.id)})]})},n.id)})]})}),e.jsx(fe,{data:s.computed.processedData})]})})]})}function fe({data:t}){return t.length===0?e.jsx("tbody",{"data-test":"items-table-body",children:e.jsx("tr",{children:e.jsx("td",{colSpan:N.length+1,className:"px-4 py-8 text-center text-sm text-muted-foreground","data-test":"items-no-results-message",children:"No items found"})})}):e.jsx("tbody",{"data-test":"items-table-body",className:"bg-background divide-y divide-border",children:t.map((s,a)=>e.jsxs("tr",{"data-test":`items-data-row-${a}`,className:"hover:bg-muted",children:[e.jsx("td",{className:"px-2 py-1","data-test":`items-image-cell-${a}`,children:e.jsx("img",{src:B(s.name),alt:s.name,className:"w-12 h-12 object-contain",onError:m=>{m.target.style.display="none"}})}),N.map(m=>e.jsx("td",{className:"px-4 py-3 text-sm",children:String(s[m.id]??"")},m.id))]},a))})}const be=["B.F. Sword","Recurve Bow","Chain Vest","Negatron Cloak","Giant's Belt","Needlessly Large Rod","Tear of the Goddess","Sparring Gloves"],P=[{result:"Deathblade",component1:"B.F. Sword",component2:"B.F. Sword",description:"Grants bonus Attack Damage"},{result:"Giant Slayer",component1:"B.F. Sword",component2:"Recurve Bow",description:"Deals bonus damage to high-health enemies"},{result:"Guardian Angel",component1:"B.F. Sword",component2:"Chain Vest",description:"Revives on first death"},{result:"Bloodthirster",component1:"B.F. Sword",component2:"Negatron Cloak",description:"Heals for damage dealt"},{result:"Sterak's Gage",component1:"B.F. Sword",component2:"Giant's Belt",description:"Grants shield when low health"},{result:"Hextech Gunblade",component1:"B.F. Sword",component2:"Needlessly Large Rod",description:"Heals for damage dealt by abilities"},{result:"Spear of Shojin",component1:"B.F. Sword",component2:"Tear of the Goddess",description:"Grants mana on attack"},{result:"Infinity Edge",component1:"B.F. Sword",component2:"Sparring Gloves",description:"Abilities can critically strike"},{result:"Red Buff",component1:"Recurve Bow",component2:"Chain Vest",description:"Attacks burn enemies"},{result:"Rapid Firecannon",component1:"Recurve Bow",component2:"Recurve Bow",description:"Increases attack range"},{result:"Runaan's Hurricane",component1:"Recurve Bow",component2:"Negatron Cloak",description:"Attacks hit additional enemies"},{result:"Titan's Resolve",component1:"Recurve Bow",component2:"Giant's Belt",description:"Stacks damage and armor on attack"},{result:"Guinsoo's Rageblade",component1:"Recurve Bow",component2:"Needlessly Large Rod",description:"Attacks grant stacking attack speed"},{result:"Statikk Shiv",component1:"Recurve Bow",component2:"Tear of the Goddess",description:"Attacks deal chain lightning"},{result:"Last Whisper",component1:"Recurve Bow",component2:"Sparring Gloves",description:"Attacks shred armor"},{result:"Bramble Vest",component1:"Chain Vest",component2:"Chain Vest",description:"Reflects damage to attackers"},{result:"Gargoyle Stoneplate",component1:"Chain Vest",component2:"Negatron Cloak",description:"Grants armor and MR per enemy"},{result:"Sunfire Cape",component1:"Chain Vest",component2:"Giant's Belt",description:"Burns nearby enemies"},{result:"Locket of the Iron Solari",component1:"Chain Vest",component2:"Needlessly Large Rod",description:"Shields nearby allies"},{result:"Frozen Heart",component1:"Chain Vest",component2:"Tear of the Goddess",description:"Slows nearby enemies' attack speed"},{result:"Steadfast Heart",component1:"Chain Vest",component2:"Sparring Gloves",description:"Grants crit reduction and damage reduction"},{result:"Dragon's Claw",component1:"Negatron Cloak",component2:"Negatron Cloak",description:"Reduces magic damage taken"},{result:"Warmog's Armor",component1:"Negatron Cloak",component2:"Giant's Belt",description:"Regenerates health"},{result:"Ionic Spark",component1:"Negatron Cloak",component2:"Needlessly Large Rod",description:"Shreds magic resist on enemies"},{result:"Chalice of Power",component1:"Negatron Cloak",component2:"Tear of the Goddess",description:"Grants ability power to allies"},{result:"Quicksilver",component1:"Negatron Cloak",component2:"Sparring Gloves",description:"Immune to crowd control"},{result:"Redemption",component1:"Giant's Belt",component2:"Tear of the Goddess",description:"Heals allies when wearer dies"},{result:"Morellonomicon",component1:"Giant's Belt",component2:"Needlessly Large Rod",description:"Abilities burn enemies"},{result:"Warmog's Armor",component1:"Giant's Belt",component2:"Giant's Belt",description:"Regenerates health"},{result:"Protector's Vow",component1:"Giant's Belt",component2:"Sparring Gloves",description:"Shields lowest health ally"},{result:"Rabadon's Deathcap",component1:"Needlessly Large Rod",component2:"Needlessly Large Rod",description:"Greatly increases ability power"},{result:"Archangel's Staff",component1:"Needlessly Large Rod",component2:"Tear of the Goddess",description:"Grants AP per cast"},{result:"Jeweled Gauntlet",component1:"Needlessly Large Rod",component2:"Sparring Gloves",description:"Abilities can crit with bonus damage"},{result:"Blue Buff",component1:"Tear of the Goddess",component2:"Tear of the Goddess",description:"Restores mana after casting"},{result:"Hand of Justice",component1:"Tear of the Goddess",component2:"Sparring Gloves",description:"Grants AD/AP and healing or damage"},{result:"Thief's Gloves",component1:"Sparring Gloves",component2:"Sparring Gloves",description:"Equips random items each round"}];function je(){const[t,s]=u.useState(""),[a,m]=u.useState(null),o=u.useMemo(()=>{let c=P;if(a&&(c=c.filter(l=>l.component1===a||l.component2===a)),t){const l=t.toLowerCase();c=c.filter(d=>d.result.toLowerCase().includes(l)||d.component1.toLowerCase().includes(l)||d.component2.toLowerCase().includes(l)||d.description.toLowerCase().includes(l))}return c},[t,a]);return e.jsxs("div",{className:"border rounded-lg p-4","data-test":"recipes-table-section",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap gap-4","data-test":"recipes-filter-section",children:[e.jsx(L,{placeholder:"Search recipes...",value:t,onChange:c=>s(c.target.value),className:"max-w-xs","data-test":"recipes-search-input"}),e.jsxs("div",{className:"flex flex-wrap gap-2","data-test":"component-filter-buttons",children:[e.jsx("button",{onClick:()=>m(null),className:`px-3 py-1 rounded text-sm ${a===null?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,"data-test":"filter-all",children:"All"}),be.map(c=>e.jsxs("button",{onClick:()=>m(a===c?null:c),className:`px-3 py-1 rounded text-sm flex items-center gap-1 ${a===c?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,"data-test":`filter-${c.replace(/\s+/g,"-").toLowerCase()}`,children:[e.jsx(C,{name:c,size:"sm"}),e.jsx("span",{className:"hidden sm:inline",children:c})]},c))]})]}),e.jsxs("div",{className:"mb-4 text-sm text-muted-foreground","data-test":"recipes-row-count",children:[o.length," ",o.length===1?"recipe":"recipes"]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4","data-test":"recipes-grid",children:o.map((c,l)=>e.jsx(ve,{recipe:c,index:l},l))}),o.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-test":"recipes-no-results",children:"No recipes found"})]})}function ve({recipe:t,index:s}){return e.jsxs("div",{className:"border rounded-lg p-4 bg-card hover:bg-muted/50 transition-colors","data-test":"recipe-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3","data-test":"recipe-result",children:[e.jsx(C,{name:t.result,size:"lg"}),e.jsx("span",{className:"font-medium",children:t.result})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3","data-test":"recipe-formula",children:[e.jsx(C,{name:t.component1,size:"md"}),e.jsx("span",{className:"text-muted-foreground",children:"+"}),e.jsx(C,{name:t.component2,size:"md"}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx(C,{name:t.result,size:"md"})]}),e.jsx("p",{className:"text-sm text-muted-foreground","data-test":"recipe-description",children:t.description})]})}function C({name:t,size:s}){const a={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"};return e.jsx("img",{src:B(t),alt:t,title:t,className:`${a[s]} object-contain`,onError:m=>{m.target.style.display="none"},"data-test":`item-icon-${t.replace(/\s+/g,"-").toLowerCase()}`})}const F=[{id:"result",label:"Result",type:"string"},{id:"component1",label:"Component 1",type:"string"},{id:"component2",label:"Component 2",type:"string"},{id:"description",label:"Description",type:"string"}];function ye(){const t=A({data:P}),[s,a]=u.useState({}),m=u.useCallback(d=>{const n=F.find(i=>i.id===d);return(n==null?void 0:n.type)??"string"},[]),o=u.useCallback((d,n)=>{const i=t.state.filters.find(p=>p.field===d);i&&t.actions.removeFilter(i.id),t.actions.addFilter({...n,field:d}),a(p=>({...p,[d]:n}))},[t.actions,t.state.filters]),c=u.useCallback(d=>{const n=t.state.filters.find(i=>i.field===d);n&&t.actions.removeFilter(n.id),a(i=>{const p={...i};return delete p[d],p})},[t.actions,t.state.filters]),l=u.useCallback(d=>d in s,[s]);return e.jsxs("div",{className:"border rounded-lg p-4","data-test":"recipes-table-view-section",children:[e.jsx("div",{className:"mb-4","data-test":"recipes-table-filter-section",children:e.jsx(I,{columns:F,filters:t.state.filters,searchTerm:t.state.searchTerm,caseSensitive:t.state.caseSensitive,exactMatch:t.state.exactMatch,onSearchChange:t.actions.setSearchTerm,onCaseSensitiveChange:t.actions.setCaseSensitive,onExactMatchChange:t.actions.setExactMatch,onAddFilter:t.actions.addFilter,onRemoveFilter:t.actions.removeFilter,onClearFilters:t.actions.clearFilters})}),e.jsxs("div",{className:"mb-4 text-sm text-muted-foreground","data-test":"recipes-table-row-count",children:[t.computed.filteredCount," ",t.computed.filteredCount===1?"recipe":"recipes"]}),e.jsx("div",{className:"rounded-md border overflow-x-auto","data-test":"recipes-table-container",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{"data-test":"recipes-table-header-row",children:F.map(d=>{var p,r;const n=((p=t.state.sort)==null?void 0:p.field)===d.id,i=n?(r=t.state.sort)==null?void 0:r.direction:null;return e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer select-none hover:bg-muted/80","data-test":`recipes-table-column-header-${d.id}`,onClick:()=>t.actions.toggleSort(d.id),children:e.jsxs("div",{className:"flex items-center gap-1",children:[d.label,n&&e.jsx("span",{"data-test":`recipes-table-sort-indicator-${d.id}`,children:i==="asc"?"▲":"▼"}),e.jsx(E,{columnId:d.id,columnLabel:d.label,columnType:m(d.id),currentFilter:s[d.id],onApplyFilter:h=>o(d.id,h),onClearFilter:()=>c(d.id),isActive:l(d.id)})]})},d.id)})})}),e.jsx(Ce,{data:t.computed.processedData})]})})]})}function Ce({data:t}){return t.length===0?e.jsx("tbody",{"data-test":"recipes-table-body",children:e.jsx("tr",{children:e.jsx("td",{colSpan:F.length,className:"px-4 py-8 text-center text-sm text-muted-foreground","data-test":"recipes-table-no-results-message",children:"No recipes found"})})}):e.jsx("tbody",{"data-test":"recipes-table-body",className:"bg-background divide-y divide-border",children:t.map((s,a)=>e.jsxs("tr",{"data-test":`recipes-table-row-${a}`,className:"hover:bg-muted",children:[e.jsx("td",{className:"px-4 py-3 text-sm","data-test":`recipes-table-result-${a}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{name:s.result}),e.jsx("span",{children:s.result})]})}),e.jsx("td",{className:"px-4 py-3 text-sm","data-test":`recipes-table-component1-${a}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{name:s.component1}),e.jsx("span",{children:s.component1})]})}),e.jsx("td",{className:"px-4 py-3 text-sm","data-test":`recipes-table-component2-${a}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{name:s.component2}),e.jsx("span",{children:s.component2})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground","data-test":`recipes-table-description-${a}`,children:s.description})]},a))})}function G({name:t}){return e.jsx("img",{src:B(t),alt:t,title:t,className:"w-8 h-8 object-contain",onError:s=>{s.target.style.display="none"}})}function Ne({traits:t}){const[s,a]=u.useState(""),[m,o]=u.useState(new Set),c=u.useMemo(()=>{if(!s)return t;const i=s.toLowerCase();return t.filter(p=>p.name.toLowerCase().includes(i)||p.champions.some(r=>r.toLowerCase().includes(i)))},[t,s]),l=i=>{o(p=>{const r=new Set(p);return r.has(i)?r.delete(i):r.add(i),r})},d=()=>{o(new Set(c.map(i=>i.name)))},n=()=>{o(new Set)};return t.length===0?e.jsx("div",{className:"border rounded-lg p-4","data-test":"traits-table-section",children:e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-test":"traits-no-data",children:"No traits available. Load champions data first."})}):e.jsxs("div",{className:"border rounded-lg p-4","data-test":"traits-table-section",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap gap-4 items-center","data-test":"traits-filter-section",children:[e.jsx(L,{placeholder:"Search traits or champions...",value:s,onChange:i=>a(i.target.value),className:"max-w-xs","data-test":"traits-search-input"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:d,className:"px-3 py-1 rounded text-sm bg-muted hover:bg-muted/80","data-test":"expand-all-button",children:"Expand All"}),e.jsx("button",{onClick:n,className:"px-3 py-1 rounded text-sm bg-muted hover:bg-muted/80","data-test":"collapse-all-button",children:"Collapse All"})]})]}),e.jsxs("div",{className:"mb-4 text-sm text-muted-foreground","data-test":"traits-row-count",children:[c.length," ",c.length===1?"trait":"traits"]}),e.jsx("div",{className:"rounded-md border overflow-x-auto","data-test":"traits-table-container",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{"data-test":"traits-header-row",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider w-10"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Trait"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider w-32",children:"Champions"})]})}),e.jsx("tbody",{className:"bg-background divide-y divide-border","data-test":"traits-table-body",children:c.map((i,p)=>e.jsx(we,{trait:i,index:p,isExpanded:m.has(i.name),onToggle:()=>l(i.name)},i.name))})]})}),c.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-test":"traits-no-results",children:"No traits found"})]})}function we({trait:t,index:s,isExpanded:a,onToggle:m}){return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-muted cursor-pointer",onClick:m,"data-test":"trait-row",children:[e.jsx("td",{className:"px-4 py-3",children:a?e.jsx(X,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:M(t.name),alt:t.name,className:"w-8 h-8 object-contain bg-slate-800 rounded p-0.5",onError:o=>{o.target.style.display="none"}}),e.jsx("span",{className:"font-medium",children:t.name})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:[t.championCount," ",t.championCount===1?"champion":"champions"]})]}),a&&e.jsx("tr",{"data-test":"trait-expanded-row",children:e.jsx("td",{colSpan:3,className:"px-4 py-3 bg-muted/50",children:e.jsx("div",{className:"flex flex-wrap gap-2","data-test":"trait-champions-list",children:t.champions.map(o=>e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-background rounded border","data-test":`trait-champion-${o}`,children:[e.jsx("img",{src:v(o),alt:o,className:"w-6 h-6 object-contain",onError:c=>{c.target.style.display="none"}}),e.jsx("span",{className:"text-sm",children:o})]},o))})})})]})}function Se({champion:t}){const{name:s,cost:a,traits:m,type:o,unlockCondition:c,ability:l,imageUrl:d,abilityIconUrl:n}=t;return s.toLowerCase().replace(/\s+/g,"-"),e.jsxs("div",{className:"rounded text-white1 w-[291px] flex flex-col h-full bg-bg","data-test":"champion-card",children:[e.jsx("a",{className:"no-webkit-preview","data-test":"champion-link",children:e.jsxs("div",{className:"relative rounded-[6px] border-[3px] border-primary-6",children:[e.jsx(Te,{name:s,cost:a}),e.jsx(Fe,{name:s,imageUrl:d}),e.jsx(ke,{traits:m})]})}),e.jsxs("div",{className:"p-3 flex flex-col text-sm","data-test":"champion-details",children:[c&&e.jsx(Re,{condition:c}),e.jsx(Ge,{type:o}),e.jsx(Le,{name:l.name,manaCost:l.manaCost,iconUrl:n}),e.jsx(Ae,{description:l.description}),e.jsx("hr",{className:"my-[10px] mx-1 border-white2"}),e.jsx(Ie,{activations:l.activation})]}),e.jsx(te,{})]})}function Te({name:t,cost:s}){return e.jsxs("div",{className:"relative flex justify-between p-[9px] bg-bg text-[18px] font-montserrat font-semibold rounded-[3px]","data-test":"champion-header",children:[e.jsx("span",{"data-test":"champion-name",children:t}),e.jsxs("div",{className:"flex items-end text-[16px]","data-test":"champion-cost",children:[s,e.jsx("img",{className:"ml-[2px] pb-[1px]",alt:"gold",height:"13",src:"https://cdn.tft.tools/general/gold.png?width=13",width:"13"})]})]})}function Fe({name:t,imageUrl:s}){return e.jsx("img",{className:"mt-[-3px] z-[-1] aspect-[9/4] object-cover",alt:t,src:s,width:"290","data-test":"champion-image"})}function ke({traits:t}){return e.jsx("div",{className:"absolute text-lg leading-snug bottom-[6px] left-[6px]","data-test":"traits-list",children:t.map(s=>e.jsxs("div",{className:"flex items-center sm:pt-1 font-montserrat font-bold text-[15px]","data-test":"trait-item",children:[e.jsx("img",{alt:s.name,className:"aspect-square w-[21px]",src:s.iconUrl,style:{opacity:.87}}),e.jsx("div",{className:"pl-1",children:s.name})]},s.name))})}function Re({condition:t}){return e.jsxs("div",{className:"leading-snug pb-3","data-test":"unlock-condition",children:[e.jsx("span",{className:"font-medium",children:"Unlock: "}),e.jsx("div",{className:"leading-tight inline",children:e.jsx("span",{children:t})})]})}function Ge({type:t}){return e.jsx("div",{className:"mb-2 bg-bg2 rounded-lg px-2 py-1 font-montserrat font-medium self-start","data-test":"champion-type",children:t})}function Le({name:t,manaCost:s,iconUrl:a}){return e.jsxs("div",{className:"flex items-center mt-1 mb-2","data-test":"ability-header",children:[e.jsx("img",{className:"rounded flex-shrink-0 w-[22px] h-[22px]",height:"22",src:a,width:"22",alt:t,"data-test":"ability-icon"}),e.jsxs("div",{className:"flex items-center pl-2 leading-none",children:[e.jsx("div",{className:"font-medium text-sm","data-test":"ability-name",children:t}),e.jsxs("div",{className:"flex items-center pt-[2px] h-[18px] text-sm pl-2","data-test":"ability-mana",children:[e.jsx("div",{className:"mt-[-1px] mr-[2px] w-[14px] h-[14px]",children:e.jsx("img",{alt:"Mana",height:"14",src:"https://cdn.tft.tools/general/mana.png",width:"14"})}),e.jsx("div",{className:"pt-[1px]",children:s})]})]})]})}function Ae({description:t}){return e.jsx("div",{className:"leading-tight","data-test":"ability-description",dangerouslySetInnerHTML:{__html:t}})}function Ie({activations:t}){return t.length===0?null:e.jsx("div",{className:"flex flex-col gap-[2px]","data-test":"activations-list",children:t.map((s,a)=>e.jsxs("div",{className:"flex flex-wrap justify-between","data-test":"activation-item",children:[e.jsxs("div",{className:"leading-tight",children:[e.jsxs("span",{children:[s.kind,": "]}),s.calculation&&e.jsx("span",{className:"text-sky-11",children:s.calculation})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("span",{className:"text-white2",children:s.valuePerLevel})})]},`${s.kind}-${a}`))})}function Ee({champions:t,rawChampions:s}){const[a,m]=u.useState(""),[o,c]=u.useState(!1),l=u.useMemo(()=>{if(!a)return t;const n=a.toLowerCase();return t.filter(i=>i.name.toLowerCase().includes(n))},[t,a]),d=u.useMemo(()=>{if(!a)return s;const n=a.toLowerCase();return s.filter(i=>i.name.toLowerCase().includes(n))},[s,a]);return e.jsxs("div",{className:"border rounded-lg p-4","data-test":"champions-grid-section",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4","data-test":"champions-grid-controls",children:[e.jsx(L,{placeholder:"Search champions...",value:a,onChange:n=>m(n.target.value),className:"max-w-xs","data-test":"champions-grid-search"}),e.jsx(k,{variant:o?"default":"outline",size:"sm",onClick:()=>c(!o),"data-test":"card-mode-toggle",children:"Card Mode"})]}),e.jsxs("div",{className:"mb-4 text-sm text-muted-foreground","data-test":"champions-grid-count",children:[l.length," ",l.length===1?"champion":"champions"]}),o?e.jsx($e,{champions:d}):e.jsx(Be,{champions:l}),l.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-test":"champions-grid-no-results",children:"No champions found"})]})}function Be({champions:t}){return e.jsx("div",{className:"grid gap-4 grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12","data-test":"champions-grid",children:t.map((s,a)=>e.jsxs("div",{className:"flex flex-col items-center gap-1","data-test":`champion-icon-${a}`,children:[e.jsx("img",{src:v(s.name,"square"),alt:s.name,className:"w-16 h-16 object-cover rounded border",onError:m=>{m.target.style.display="none"}}),e.jsx("span",{className:"text-xs text-center truncate w-full",title:s.name,children:s.name})]},s.name))})}function $e({champions:t}){const s=u.useMemo(()=>t.map(ce),[t]);return e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5","data-test":"champions-card-grid",children:s.map((a,m)=>e.jsx("div",{"data-test":`champion-card-${m}`,children:e.jsx(Se,{champion:a})},a.name))})}const Me=[{label:"Home",href:"/"},{label:"Demo",href:"/demo"},{label:"TFT Champions"}],Pe=["champions","champions-grid","items","traits","recipes","recipes-table"],De="champions";function Ue(t){return t!==null&&Pe.includes(t)}function Ye({logger:t}){const[s,a]=z(),m=s.get("tab"),o=Ue(m)?m:De,c=V=>{a({tab:V})},{champions:l,rawChampions:d,loading:n,error:i,fetchChampions:p}=de({logger:t}),{items:r,loading:h,error:x,fetchItems:g}=me({logger:t}),w=re(l),y=o==="champions"||o==="champions-grid"||o==="traits",D=y?n:o==="items"?h:!1,U=y?p:o==="items"?g:()=>{},_=y||o==="items";return e.jsxs("div",{className:"tft-champions-demo-page flex-1 flex flex-col h-full","data-test":"tft-champions-demo-page",children:[e.jsx(_e,{loading:D,onRefresh:U,showRefresh:_}),e.jsx("div",{className:"page-content flex-1 overflow-y-auto min-h-0 p-6","data-test":"page-content",children:e.jsxs(H,{value:o,onValueChange:c,"data-test":"tft-tabs",children:[e.jsxs(q,{"data-test":"tft-tabs-list",children:[e.jsx(f,{value:"champions","data-test":"tab-champions",children:"Champions"}),e.jsx(f,{value:"champions-grid","data-test":"tab-champions-grid",children:"Champions Grid"}),e.jsx(f,{value:"items","data-test":"tab-items",children:"Items"}),e.jsx(f,{value:"traits","data-test":"tab-traits",children:"Traits"}),e.jsx(f,{value:"recipes","data-test":"tab-recipes",children:"Recipes"}),e.jsx(f,{value:"recipes-table","data-test":"tab-recipes-table",children:"Recipes Table"})]}),e.jsxs(b,{value:"champions",className:"mt-4","data-test":"tab-content-champions",children:[n&&l.length===0&&e.jsx(S,{}),i&&e.jsx(T,{error:i,onRetry:p}),l.length>0&&e.jsx(he,{champions:l})]}),e.jsxs(b,{value:"champions-grid",className:"mt-4","data-test":"tab-content-champions-grid",children:[n&&l.length===0&&e.jsx(S,{}),i&&e.jsx(T,{error:i,onRetry:p}),l.length>0&&e.jsx(Ee,{champions:l,rawChampions:d})]}),e.jsxs(b,{value:"items",className:"mt-4","data-test":"tab-content-items",children:[h&&r.length===0&&e.jsx(S,{}),x&&e.jsx(T,{error:x,onRetry:g}),r.length>0&&e.jsx(ge,{items:r})]}),e.jsxs(b,{value:"traits",className:"mt-4","data-test":"tab-content-traits",children:[n&&l.length===0&&e.jsx(S,{}),i&&e.jsx(T,{error:i,onRetry:p}),l.length>0&&e.jsx(Ne,{traits:w})]}),e.jsx(b,{value:"recipes",className:"mt-4","data-test":"tab-content-recipes",children:e.jsx(je,{})}),e.jsx(b,{value:"recipes-table",className:"mt-4","data-test":"tab-content-recipes-table",children:e.jsx(ye,{})})]})})]})}function _e({loading:t,onRefresh:s,showRefresh:a}){return e.jsx("div",{className:"page-header p-6 pb-0 flex-shrink-0","data-test":"page-header",children:e.jsxs("div",{className:"breadcrumb-section flex justify-between","data-test":"breadcrumb-section",children:[e.jsx(O,{items:Me}),a&&e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(k,{onClick:s,disabled:t,variant:"outline","data-test":"refresh-button",children:[e.jsx(Z,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]})})]})})}function S(){return e.jsxs("div",{className:"flex items-center justify-center h-64","data-test":"loading-state",children:[e.jsx(ee,{className:"w-8 h-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading champions..."})]})}function T({error:t,onRetry:s}){return e.jsxs("div",{className:"p-4 mb-6 bg-destructive/10 border border-destructive/30 rounded-md text-destructive","data-test":"error-message",children:[t,e.jsx(k,{onClick:s,variant:"outline",size:"sm",className:"ml-4",children:"Retry"})]})}export{Ye as TftChampionsDemoPage};
