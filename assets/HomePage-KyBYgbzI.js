import{R as b,j as e,r as d}from"./react-vendor-CrhW4DYn.js";import{az as x,B as c}from"./index-CgyRe94A.js";import{a6 as g,ar as j,_ as w,O as N}from"./icons-6Gjq1X59.js";import{r as C}from"./recordingStorage-XzvoUejy.js";import"./utils-DPdF7W5J.js";import"./radix-ui-BcQf1l4u.js";import"./ui-utils-BxIQ3qGg.js";const m={showDebugPanel:!1,debugPanelCollapsedByDefault:!0},D=({logs:a,onCopy:i,onClear:o,className:r="",title:t="Debug Log",collapsible:n=!0,defaultCollapsed:p=m.debugPanelCollapsedByDefault,show:f=m.showDebugPanel})=>{const[l,u]=b.useState(()=>{const s=x.get("debugPanel");return(s==null?void 0:s.isOpen)!==void 0?!s.isOpen:p}),h=s=>{u(s),x.update("debugPanel",{isOpen:!s})},v=s=>{switch(s){case"error":return"text-red-600";case"warning":return"text-yellow-600";case"debug":return"text-gray-500";default:return"text-gray-800"}},y=s=>{switch(s){case"error":return"‚ùå";case"warning":return"‚ö†Ô∏è";case"debug":return"üîç";default:return"‚ÑπÔ∏è"}};return f?e.jsxs("div",{className:`w-full ${r}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-700",children:t}),n&&e.jsx(c,{onClick:()=>h(!l),variant:"ghost",size:"sm",className:"ml-2 h-5 w-5 p-0",children:l?e.jsx(g,{className:"w-3 h-3"}):e.jsx(j,{className:"w-3 h-3"})}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",a.length,")"]})]})}),!l&&e.jsxs("div",{className:"bg-gray-50 border rounded-lg",children:[e.jsx("div",{className:"p-3 h-32 overflow-y-auto",children:a.length===0?e.jsx("p",{className:"text-gray-500 text-xs text-left",children:"No events yet..."}):e.jsx("div",{className:"space-y-1",children:a.map(s=>e.jsxs("div",{className:`text-xs font-mono text-left flex items-start gap-1 ${v(s.level)}`,children:[e.jsx("span",{className:"flex-shrink-0 w-4",children:y(s.level)}),e.jsxs("span",{className:"text-gray-500",children:["[",s.timestamp,"]"]}),e.jsx("span",{className:"flex-1",children:s.message})]},s.id))})}),e.jsxs("div",{className:"border-t bg-gray-100 p-2 flex justify-end gap-2",children:[e.jsxs(c,{onClick:i,variant:"outline",size:"sm",className:"h-6 px-2 text-xs",disabled:a.length===0,children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),"Copy"]}),e.jsxs(c,{onClick:o,variant:"outline",size:"sm",className:"h-6 px-2 text-xs",disabled:a.length===0,children:[e.jsx(N,{className:"w-3 h-3 mr-1"}),"Clear"]})]})]})]}):null};function L({logger:a,logs:i}){const o=d.useCallback(async()=>{try{const r=a.export();if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function")await navigator.clipboard.writeText(r),a.info("Logs copied to clipboard");else{const t=document.createElement("textarea");t.value=r,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),a.info("Logs copied to clipboard (fallback method)")}catch{a.warning("Copy failed - please select and copy manually")}document.body.removeChild(t)}}catch(r){a.error(`Failed to copy logs: ${String(r)}`)}},[a]);return d.useEffect(()=>{a.info("Debug app mounted"),a.info(`User Agent: ${navigator.userAgent}`),navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function"?a.info("‚úÖ navigator.mediaDevices.getUserMedia available"):a.warning("‚ö†Ô∏è navigator.mediaDevices.getUserMedia not available"),typeof MediaRecorder<"u"?a.info("‚úÖ MediaRecorder API available"):a.warning("‚ö†Ô∏è MediaRecorder API not available"),navigator.clipboard&&typeof navigator.clipboard.writeText=="function"?a.info("‚úÖ Modern clipboard API available"):a.warning("‚ö†Ô∏è Modern clipboard API not available, using fallback"),(async()=>{})(),(async()=>{try{const n=await C.getStorageUsage();a.info(`Loaded ${n.count} saved recordings (${(n.totalSize/1024/1024).toFixed(2)} MB)`)}catch(n){a.error(`Failed to load recordings: ${String(n)}`)}})()},[]),e.jsx("div",{className:"flex flex-col h-full",children:e.jsx("div",{className:"flex-1 flex flex-col px-4 py-6 overflow-y-auto",children:e.jsx(D,{logs:i,onCopy:o,onClear:a.clear,className:"mb-6"})})})}export{L as HomePage};
