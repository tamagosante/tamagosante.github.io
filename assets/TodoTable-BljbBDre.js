import{r as N,j as e}from"./react-vendor-Byz07MLO.js";import{T,a as A,b as o,c as r,d as C,e as s}from"./table-Cr_drED-.js";import{B as u,at as d,au as p}from"./index-BEUYSeX_.js";import{ai as E,W as S}from"./icons-Detj0uxE.js";import"./utils-DjFvUtuq.js";import"./radix-ui-B6r6BEmy.js";import"./ui-utils-BxIQ3qGg.js";function H({todos:x,columnVisibility:a}){const h=N.useMemo(()=>{const t=new Set;return x.forEach(n=>{n.customProps&&Object.keys(n.customProps).forEach(l=>t.add(l))}),Array.from(t).sort()},[x]),m=t=>{if(!t)return"-";try{return new Date(t.value).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"-"}},g=t=>{switch(t){case d.FREEZER:return"secondary";case d.BACKLOG:return"outline";case d.SELECTED:return"default";case d.DOING:return"default";case d.DONE:return"default";case d.ARCHIVE:return"secondary";default:return"outline"}},f=t=>{switch(t){case p.URGENT:return"destructive";case p.HIGH:return"default";case p.MEDIUM:return"secondary";case p.LOW:return"outline";default:return"outline"}},i=t=>t==null?"-":typeof t=="boolean"?t?"✓":"✗":typeof t=="object"?JSON.stringify(t):String(t),w=N.useMemo(()=>{let t=Object.values(a).filter(Boolean).length;return t+=h.length,t},[a,h]);return e.jsx("div",{className:"table-container w-full overflow-auto","data-test":"todo-table-container",children:e.jsxs(T,{"data-test":"todo-table",children:[e.jsx(A,{"data-test":"todo-table-header",children:e.jsxs(o,{className:"h-10","data-test":"todo-table-header-row",children:[a.id&&e.jsx(r,{className:"w-[80px]",children:"ID"}),a.title&&e.jsx(r,{className:"w-[200px] max-w-[200px]",children:"Title"}),a.description&&e.jsx(r,{className:"w-[300px] max-w-[300px]",children:"Description"}),a.status&&e.jsx(r,{className:"w-[120px]",children:"Status"}),a.priority&&e.jsx(r,{className:"w-[100px]",children:"Priority"}),a.category&&e.jsx(r,{className:"w-[120px]",children:"Category"}),a.space&&e.jsx(r,{className:"w-[100px]",children:"Space"}),a.dueDate&&e.jsx(r,{className:"w-[150px]",children:"Due Date"}),a.createdAt&&e.jsx(r,{className:"w-[180px]",children:"Created At"}),a.updatedAt&&e.jsx(r,{className:"w-[180px]",children:"Updated At"}),a.completedAt&&e.jsx(r,{className:"w-[180px]",children:"Completed At"}),a.tags&&e.jsx(r,{className:"w-[200px]",children:"Tags"}),a.subtasks&&e.jsx(r,{className:"w-[100px]",children:"Subtasks"}),h.map(t=>e.jsx(r,{className:"w-[150px]",children:t},t))]})}),e.jsx(C,{"data-test":"todo-table-body",children:x.length===0?e.jsx(o,{className:"h-10","data-test":"todo-table-empty-row",children:e.jsx(s,{colSpan:w,className:"text-center text-muted-foreground py-8","data-test":"todo-table-empty-cell",children:"No todos found"})}):x.map(t=>{const n=t.subtasks.filter(c=>c.isCompleted).length,l=t.subtasks.length;return e.jsxs(o,{className:"hover:bg-muted/50 h-10","data-test":"todo-table-row",children:[a.id&&e.jsx(s,{className:"font-mono text-xs truncate",children:t.id.value.slice(0,8)}),a.title&&e.jsx(s,{className:"font-medium max-w-[200px]",title:t.title,children:e.jsx("div",{className:"truncate",children:t.title})}),a.description&&e.jsx(s,{className:"text-sm text-muted-foreground max-w-[300px]",title:t.description??"",children:e.jsx("div",{className:"truncate",children:t.description??"-"})}),a.status&&e.jsx(s,{children:e.jsx(u,{variant:g(t.status),className:"truncate",children:t.status})}),a.priority&&e.jsx(s,{children:e.jsx(u,{variant:f(t.priority),className:"truncate",children:t.priority})}),a.category&&e.jsx(s,{children:e.jsx(u,{variant:"outline",className:"truncate",children:t.category})}),a.space&&e.jsx(s,{className:"text-sm truncate",children:t.space??"-"}),a.dueDate&&e.jsx(s,{className:"text-sm truncate",children:m(t.dueDate)}),a.createdAt&&e.jsx(s,{className:"text-sm truncate",children:m(t.createdAt)}),a.updatedAt&&e.jsx(s,{className:"text-sm truncate",children:m(t.updatedAt)}),a.completedAt&&e.jsx(s,{className:"text-sm truncate",children:m(t.completedAt)}),a.tags&&e.jsx(s,{children:e.jsxs("div",{className:"flex gap-1 truncate",title:t.tags.join(", "),children:[t.tags.length>0?t.tags.slice(0,2).map(c=>e.jsx(u,{variant:"secondary",className:"text-xs",children:c},c)):"-",t.tags.length>2&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",t.tags.length-2]})]})}),a.subtasks&&e.jsx(s,{children:e.jsx("div",{className:"flex items-center gap-1 text-sm",children:l>0?e.jsxs(e.Fragment,{children:[n===l?e.jsx(E,{className:"h-4 w-4 text-green-600 flex-shrink-0"}):e.jsx(S,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[n,"/",l]})]}):"-"})}),h.map(c=>{var j;return e.jsx(s,{className:"text-sm truncate",children:i((j=t.customProps)==null?void 0:j[c])},c)})]},t.id.value)})})]})})}export{H as TodoTable};
