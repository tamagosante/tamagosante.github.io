import{r as w,j as e}from"./react-vendor-CrhW4DYn.js";import{W as P,w as v,B as g,ao as J,ap as X,aq as Y,z as x,S as D,a as O,b as k,c as F,d as f,q as Z,E as V,ar as Q,as as I,C as m,r as C,s as S,t as L,u as h,at as W,N as ee}from"./index-CgyRe94A.js";import{B as se}from"./Breadcrumbs-DwpmWO_t.js";import{a2 as ae,X as te,ar as ie,a6 as ne,a1 as le,O as de,M as _,as as re}from"./icons-6Gjq1X59.js";import"./utils-DPdF7W5J.js";import"./radix-ui-BcQf1l4u.js";import"./ui-utils-BxIQ3qGg.js";const ce=[{value:"id",label:"Session ID"},{value:"name",label:"Session Name"},{value:"customName",label:"Custom Name"},{value:"cwd",label:"Working Directory"},{value:"firstMessage",label:"First Message"}],H=[{value:"contains",label:"Contains",description:"Text contains substring"},{value:"exact",label:"Exact Match",description:"Exact text match"},{value:"startsWith",label:"Starts With",description:"Text starts with substring"},{value:"endsWith",label:"Ends With",description:"Text ends with substring"},{value:"fuzzy",label:"Fuzzy Match",description:"Approximate string matching (typo-tolerant)"},{value:"regex",label:"Regex",description:"Regular expression match"}],oe=[{value:"lastModified",label:"Last Modified"},{value:"name",label:"Name"},{value:"messageCount",label:"Message Count"}],q=w.forwardRef(({searchQuery:u,onSearchChange:p,onAdvancedSearch:j,className:T},B)=>{const[y,A]=w.useState(!1),[n,o]=w.useState({fieldConditions:[],conditionLogic:"OR",sortBy:"lastModified",sortOrder:"desc",pageSize:11}),M=w.useMemo(()=>{const{fieldConditions:s,sortBy:l,sortOrder:d,pageSize:i,conditionLogic:R,...U}=n,G=s&&s.length>0,K=Object.values(U).some($=>$!==void 0);return G||K||(l!=="lastModified"||d!=="desc")},[n]),N=()=>{const s={id:Math.random().toString(36).substring(7),field:"name",operator:"contains",value:"",caseSensitive:!1};o(l=>({...l,fieldConditions:[...l.fieldConditions||[],s]}))},b=(s,l)=>{o(d=>{var i;return{...d,fieldConditions:(i=d.fieldConditions)==null?void 0:i.map(R=>R.id===s?{...R,...l}:R)}})},t=s=>{o(l=>{var d;return{...l,fieldConditions:(d=l.fieldConditions)==null?void 0:d.filter(i=>i.id!==s)}})},a=(s,l)=>{o(d=>({...d,[s]:l}))},r=()=>{j&&j(u,n),A(!1)},c=()=>{o({fieldConditions:[],conditionLogic:"OR",sortBy:"lastModified",sortOrder:"desc",pageSize:11})},z=s=>{s.key==="Enter"&&j&&j(u,n)},E=()=>{p("")};return e.jsx("div",{ref:B,className:P("sessions-search-advanced-container relative",T),"data-test":"sessions-search-advanced-container",children:e.jsxs("div",{className:"search-input-wrapper relative flex items-center gap-1","data-test":"sessions-search-advanced-input-wrapper",children:[e.jsx(ae,{className:"search-icon absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none z-10","data-test":"sessions-search-advanced-icon"}),e.jsx(v,{type:"text",placeholder:"Quick search...",value:u,onChange:s=>p(s.target.value),onKeyDown:z,className:P("search-input pl-9",u?"pr-16":"pr-10"),"data-test":"sessions-search-advanced-input"}),u&&e.jsx(g,{variant:"ghost",size:"icon",onClick:E,className:"clear-button absolute right-9 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0 hover:bg-muted","aria-label":"Clear search","data-test":"sessions-search-advanced-clear-button",children:e.jsx(te,{className:"h-4 w-4"})}),M&&e.jsx("div",{className:P("filter-indicator absolute top-1/2 -translate-y-1/2 h-2 w-2 rounded-full bg-primary pointer-events-none z-10",u?"right-17":"right-11"),"data-test":"sessions-search-advanced-filter-indicator"}),e.jsxs(J,{open:y,onOpenChange:A,children:[e.jsx(X,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"expand-button absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0","aria-label":y?"Collapse advanced search":"Expand advanced search","data-test":"sessions-search-advanced-expand-button",children:y?e.jsx(ie,{className:"h-4 w-4"}):e.jsx(ne,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"start",className:"advanced-search-panel w-[500px] max-h-[600px] overflow-y-auto","data-test":"sessions-search-advanced-panel",children:[e.jsxs("div",{className:"panel-header space-y-2 pb-3 border-b","data-test":"sessions-search-advanced-panel-header",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Advanced Search"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:c,className:"h-7 text-xs","data-test":"sessions-search-advanced-clear-filters-button",children:"Clear All"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure fine-grained field-based search with operators and filters"})]}),e.jsxs("div",{className:"panel-content space-y-4 py-4","data-test":"sessions-search-advanced-panel-content",children:[e.jsxs("div",{className:"field-conditions-section space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm font-medium",children:"Field Conditions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{value:n.conditionLogic,onValueChange:s=>a("conditionLogic",s),children:[e.jsx(O,{className:"h-7 w-20 text-xs",children:e.jsx(k,{})}),e.jsxs(F,{children:[e.jsx(f,{value:"OR",children:"OR"}),e.jsx(f,{value:"AND",children:"AND"})]})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:N,className:"h-7 text-xs",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Add"]})]})]}),n.fieldConditions&&n.fieldConditions.length>0?e.jsx("div",{className:"conditions-list space-y-2 mt-2",children:n.fieldConditions.map((s,l)=>{var d;return e.jsxs("div",{className:"condition-item p-2 border rounded-md space-y-2 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",className:"text-xs shrink-0",children:l+1}),e.jsxs(D,{value:s.field,onValueChange:i=>b(s.id,{field:i}),children:[e.jsx(O,{className:"h-7 flex-1 text-xs",children:e.jsx(k,{})}),e.jsx(F,{children:ce.map(i=>e.jsx(f,{value:i.value,children:i.label},i.value))})]}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>t(s.id),className:"h-7 w-7 shrink-0",children:e.jsx(de,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{value:s.operator,onValueChange:i=>b(s.id,{operator:i}),children:[e.jsx(O,{className:"h-7 w-32 text-xs",children:e.jsx(k,{})}),e.jsx(F,{children:H.map(i=>e.jsx(f,{value:i.value,children:i.label},i.value))})]}),e.jsx(v,{placeholder:"Search value...",value:s.value,onChange:i=>b(s.id,{value:i.target.value}),className:"h-7 text-xs flex-1"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:(d=H.find(i=>i.value===s.operator))==null?void 0:d.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{htmlFor:`case-${s.id}`,className:"text-xs cursor-pointer",children:"Case sensitive"}),e.jsx(V,{id:`case-${s.id}`,checked:s.caseSensitive??!1,onCheckedChange:i=>b(s.id,{caseSensitive:i}),className:"scale-75"})]})]})]},s.id)})}):e.jsx("div",{className:"empty-state text-xs text-muted-foreground text-center py-4 border rounded-md",children:'No field conditions. Click "Add" to create one.'})]}),e.jsxs("div",{className:"active-filter space-y-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Sessions Only"}),e.jsx(V,{checked:n.isActive??!1,onCheckedChange:s=>a("isActive",s?!0:void 0)})]})]}),e.jsxs("div",{className:"message-count-filter space-y-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Message Count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{type:"number",placeholder:"Min",min:"0",value:n.minMessages??"",onChange:s=>a("minMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),e.jsx(v,{type:"number",placeholder:"Max",min:"0",value:n.maxMessages??"",onChange:s=>a("maxMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"})]})]}),e.jsxs("div",{className:"date-range-filter space-y-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Modified Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(x,{htmlFor:"date-after",className:"text-xs text-muted-foreground",children:"After"}),e.jsx(v,{id:"date-after",type:"datetime-local",value:n.modifiedAfter??"",onChange:s=>a("modifiedAfter",s.target.value||void 0),className:"h-8"})]}),e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(x,{htmlFor:"date-before",className:"text-xs text-muted-foreground",children:"Before"}),e.jsx(v,{id:"date-before",type:"datetime-local",value:n.modifiedBefore??"",onChange:s=>a("modifiedBefore",s.target.value||void 0),className:"h-8"})]})]})]}),e.jsxs("div",{className:"sorting-section space-y-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Sort By"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{value:n.sortBy,onValueChange:s=>a("sortBy",s),children:[e.jsx(O,{className:"h-8 flex-1",children:e.jsx(k,{})}),e.jsx(F,{children:oe.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]}),e.jsxs(D,{value:n.sortOrder,onValueChange:s=>a("sortOrder",s),children:[e.jsx(O,{className:"h-8 w-32",children:e.jsx(k,{})}),e.jsxs(F,{children:[e.jsx(f,{value:"desc",children:"Descending"}),e.jsx(f,{value:"asc",children:"Ascending"})]})]})]})]}),e.jsxs("div",{className:"pagination-section space-y-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Results Per Page"}),e.jsx(v,{type:"number",min:"1",max:"100",value:n.pageSize??11,onChange:s=>a("pageSize",s.target.value?parseInt(s.target.value):11),className:"h-8"})]})]}),e.jsxs("div",{className:"panel-footer flex items-center gap-2 pt-3 border-t","data-test":"sessions-search-advanced-panel-footer",children:[e.jsx(g,{onClick:r,className:"flex-1",size:"sm","data-test":"sessions-search-advanced-apply-button",children:"Apply Search"}),e.jsx(g,{onClick:()=>A(!1),variant:"outline",size:"sm","data-test":"sessions-search-advanced-cancel-button",children:"Cancel"})]})]})]})]})})});q.displayName="SessionsSearchAdvanced";const me=[];function Ne(u){const{update:p,getState:j}=Q(),[T,B]=w.useState(""),y=(t,a)=>{console.log("Advanced Search:",{query:t,filters:a})},A=[{label:"Home",href:"/"},{label:"Demo",href:"/demo"},{label:"Claude Sessions"}],n=I(t=>{var a,r,c;return((c=(r=(a=t.app)==null?void 0:a.claude)==null?void 0:r.data)==null?void 0:c.sessions)??me}),o=n.slice(0,10),M=I(t=>{var a,r,c;return((c=(r=(a=t.app)==null?void 0:a.claude)==null?void 0:r.ui)==null?void 0:c.loadingSessions)??!1}),N=I(t=>{var a,r,c;return((c=(r=(a=t.app)==null?void 0:a.claude)==null?void 0:r.ui)==null?void 0:c.sessionsError)??null});w.useEffect(()=>{(async()=>{var r,c,z;const a=(r=j().app)==null?void 0:r.claude;if(!((c=a==null?void 0:a.ui)!=null&&c.loadingSessions||(z=a==null?void 0:a.data)!=null&&z.sessions&&a.data.sessions.length>0))try{p("app",{claude:{...a,ui:{...a==null?void 0:a.ui,loadingSessions:!0,sessionsError:null}}});const s=[...(await ee.getSessions()).sessions].sort((l,d)=>new Date(d.lastModified).getTime()-new Date(l.lastModified).getTime());p("app",{claude:{data:{sessions:s},ui:{...a==null?void 0:a.ui,loadingSessions:!1,sessionsError:null}}})}catch(E){p("app",{claude:{data:{sessions:[]},ui:{...a==null?void 0:a.ui,loadingSessions:!1,sessionsError:E instanceof Error?E.message:"Failed to load sessions"}}})}})()},[p,j]);const b=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"claude-components-demo-page flex-1 flex flex-col h-full",children:[e.jsxs("div",{className:"page-header p-6 pb-0 flex-shrink-0",children:[e.jsx("div",{className:"breadcrumb-section mb-4",children:e.jsx(se,{items:A})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Claude Sessions Demo"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Displaying the first 10 Claude sessions from the global store. This demonstrates reactive state management with RxJS."})]}),e.jsx("div",{className:"page-content flex-1 p-6 overflow-y-auto min-h-0",children:e.jsxs("div",{className:"demo-section space-y-6",children:[e.jsxs(m,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"Project Selector Component"}),e.jsx(L,{children:"Two variants of the ClaudeProjectsSelector component demonstrating project selection"})]}),e.jsxs(h,{className:"space-y-6",children:[e.jsxs("div",{className:"variant-demo space-y-3",children:[e.jsxs("div",{className:"variant-header",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Badge Variant"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Compact badge with dropdown selector"})]}),e.jsx("div",{className:"variant-content",children:e.jsx(W,{variant:"badge"})})]}),e.jsxs("div",{className:"variant-demo space-y-3",children:[e.jsxs("div",{className:"variant-header",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Select Variant"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Full-width select dropdown with detailed project info"})]}),e.jsx("div",{className:"variant-content",children:e.jsx(W,{variant:"select",className:"w-full max-w-md"})})]})]})]}),e.jsxs(m,{children:[e.jsxs(C,{children:[e.jsx(S,{children:"Advanced Sessions Search"}),e.jsx(L,{children:"Fine-grained search with per-field operators (exact, contains, startsWith, endsWith, regex)"})]}),e.jsxs(h,{children:[e.jsx(q,{searchQuery:T,onSearchChange:B,onAdvancedSearch:y}),e.jsxs("div",{className:"demo-info mt-4 p-3 bg-muted rounded-md text-xs",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Features:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"Add multiple field conditions with AND/OR logic"}),e.jsx("li",{children:"Choose operators: Contains, Exact Match, Starts/Ends With, Regex"}),e.jsx("li",{children:"Case-sensitive toggle per condition"}),e.jsx("li",{children:"Filter by active status, message count, and date ranges"}),e.jsx("li",{children:"Sort by multiple fields with asc/desc order"})]})]})]})]}),M&&e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading sessions..."})})}),N&&e.jsx(m,{className:"border-destructive",children:e.jsx(h,{className:"p-6",children:e.jsxs("p",{className:"text-destructive",children:["Error: ",N]})})}),!M&&!N&&o.length===0&&e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsx("p",{className:"text-muted-foreground",children:"No sessions found. Visit the Claude page to create sessions."})})}),!M&&!N&&o.length>0&&e.jsxs("div",{className:"sessions-grid space-y-4",children:[e.jsxs("div",{className:"stats-overview grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(m,{children:[e.jsx(C,{className:"pb-3",children:e.jsx(S,{className:"text-sm font-medium text-muted-foreground",children:"Total Sessions (Shown)"})}),e.jsx(h,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[o.length," / ",n.length]})})]}),e.jsxs(m,{children:[e.jsx(C,{className:"pb-3",children:e.jsx(S,{className:"text-sm font-medium text-muted-foreground",children:"Active Sessions"})}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.filter(t=>t.isActive).length})})]}),e.jsxs(m,{children:[e.jsx(C,{className:"pb-3",children:e.jsx(S,{className:"text-sm font-medium text-muted-foreground",children:"Total Messages"})}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.reduce((t,a)=>t+a.messageCount,0)})})]})]}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Session List"}),e.jsx("div",{className:"sessions-list space-y-3",children:o.map(t=>e.jsxs(m,{className:"session-card",children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),t.name]}),e.jsx(L,{className:"mt-2",children:t.firstMessage})]}),t.isActive&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:"Active"})]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.messageCount," messages"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:b(t.lastModified)})]}),t.cwd&&e.jsx("div",{className:"flex items-center gap-1 text-xs",children:e.jsx("span",{className:"font-mono truncate max-w-[300px]",children:t.cwd})})]})})]},t.id))}),n.length>10&&e.jsx(m,{className:"mt-6",children:e.jsxs(h,{className:"p-4 text-center text-muted-foreground",children:["Showing 10 of ",n.length," sessions. Visit the Claude page to see all sessions."]})})]})]})})]})}export{Ne as ClaudeComponentsDemoPage};
