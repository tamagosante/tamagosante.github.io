import{r as l,j as a}from"./react-vendor-Byz07MLO.js";import{B as k}from"./Breadcrumbs-D-EeNrHD.js";import{a as u}from"./index-BEUYSeX_.js";import{u as D,a as T,U as M,b as w,c as E,d as G,T as P}from"./UiDataTableColumnFilter-B8Ji59pC.js";import{f as A,X as U}from"./icons-Detj0uxE.js";import"./radix-ui-B6r6BEmy.js";import"./utils-DjFvUtuq.js";import"./ui-utils-BxIQ3qGg.js";import"./SFSService-cYgO5WK9.js";const L=[{field:"name",label:"Name",type:"string"},{field:"category",label:"Category",type:"string"},{field:"price",label:"Price",type:"number"},{field:"inStock",label:"In Stock",type:"boolean"},{field:"rating",label:"Rating",type:"number"}],p=[{id:"name",label:"name",type:"string"},{id:"category",label:"category",type:"string"},{id:"price",label:"price",type:"number"},{id:"inStock",label:"inStock",type:"boolean"},{id:"rating",label:"rating",type:"number"}],z=[{id:1,name:"Laptop Pro",category:"Electronics",price:1299.99,inStock:!0,rating:4.5},{id:2,name:"Wireless Mouse",category:"Electronics",price:29.99,inStock:!0,rating:4.2},{id:3,name:"Office Chair",category:"Furniture",price:299.99,inStock:!1,rating:4.8},{id:4,name:"Standing Desk",category:"Furniture",price:599.99,inStock:!0,rating:4.6},{id:5,name:"Keyboard Mechanical",category:"Electronics",price:149.99,inStock:!0,rating:4.7},{id:6,name:"Monitor 27 inch",category:"Electronics",price:399.99,inStock:!1,rating:4.4},{id:7,name:"Desk Lamp",category:"Furniture",price:49.99,inStock:!0,rating:4.3},{id:8,name:"USB Hub",category:"Electronics",price:24.99,inStock:!0,rating:4.1},{id:9,name:"Mystery Item",category:null,price:9.99,inStock:!0,rating:3}];function Z({logger:c}){const e=D({data:z}),r=T({data:e.computed.processedData,groupableFields:L}),[m,g]=l.useState({}),b=l.useCallback(t=>{const s=p.find(i=>i.id===t);return(s==null?void 0:s.type)??"string"},[]),x=l.useCallback(t=>{const s=p.find(i=>i.id===t);return(s==null?void 0:s.label)??t},[]),S=l.useCallback((t,s)=>{const i=e.state.filters.find(o=>o.field===t&&o.id.startsWith("col-"));i&&e.actions.removeFilter(i.id),e.actions.addFilter({...s,field:t}),g(o=>({...o,[t]:s}))},[e.actions,e.state.filters]),f=l.useCallback(t=>{const s=e.state.filters.find(i=>i.field===t);s&&e.actions.removeFilter(s.id),g(i=>{const o={...i};return delete o[t],o})},[e.actions,e.state.filters]),y=l.useCallback(t=>t in m,[m]),d=l.useMemo(()=>[{accessorKey:"name",header:"Name"},{accessorKey:"category",header:"Category"},{accessorKey:"price",header:"Price"},{accessorKey:"inStock",header:"In Stock"},{accessorKey:"rating",header:"Rating"}],[]),v=l.useCallback((t,s)=>{if(s.shiftKey)e.actions.addMultiSort(t);else if(e.state.multiSort.length>0){const i=e.state.multiSort.find(o=>o.field===t);i?i.direction==="desc"?e.actions.removeMultiSort(t):e.actions.addMultiSort(t):(e.actions.clearMultiSort(),e.actions.toggleSort(t))}else e.actions.toggleSort(t)},[e.actions,e.state.multiSort]),C=l.useCallback(t=>{var i;const s=e.state.multiSort.findIndex(o=>o.field===t);return s!==-1?{isSorted:!0,direction:e.state.multiSort[s].direction,order:s+1,isMultiSort:e.state.multiSort.length>1}:((i=e.state.sort)==null?void 0:i.field)===t?{isSorted:!0,direction:e.state.sort.direction,order:1,isMultiSort:!1}:{isSorted:!1,direction:null,order:0,isMultiSort:!1}},[e.state.multiSort,e.state.sort]),j=l.useCallback(()=>{e.actions.clearSort(),e.actions.clearMultiSort()},[e.actions]),F=e.state.sort!==null||e.state.multiSort.length>0,h=l.useMemo(()=>e.state.multiSort.length>0?e.state.multiSort:e.state.sort?[e.state.sort]:[],[e.state.multiSort,e.state.sort]);l.useEffect(()=>{c==null||c.debug("UiDataTableEnhancedDemoPage mounted with product data")},[c]);const N=[{label:"Home",href:"/"},{label:"Demo",href:"/demo"},{label:"Data Table Enhanced"}];return a.jsxs("div",{className:"ui-data-table-enhanced-page flex-1 flex flex-col h-full","data-test":"ui-data-table-enhanced-page",children:[a.jsxs("div",{className:"page-header p-6 pb-0 flex-shrink-0","data-test":"page-header",children:[a.jsx("div",{className:"breadcrumb-section mb-4","data-test":"breadcrumb-section",children:a.jsx(k,{items:N})}),a.jsx("h1",{className:"text-3xl font-bold mb-2","data-test":"page-title",children:"Data Table Enhanced (SFS + CG)"}),a.jsx("p",{className:"text-gray-600 mb-4","data-test":"page-description",children:"UiDataTable with Search, Filter, Sort, Grouping, and Slicing capabilities."})]}),a.jsx("div",{className:"page-content flex-1 p-6 overflow-y-auto min-h-0","data-test":"page-content",children:a.jsxs("div",{className:"border rounded-lg p-4","data-test":"ui-data-table-enhanced-demo",children:[a.jsx("div",{className:"mb-4","data-test":"filter-section",children:a.jsx(M,{columns:p,filters:e.state.filters,searchTerm:e.state.searchTerm,caseSensitive:e.state.caseSensitive,exactMatch:e.state.exactMatch,onSearchChange:e.actions.setSearchTerm,onCaseSensitiveChange:e.actions.setCaseSensitive,onExactMatchChange:e.actions.setExactMatch,onAddFilter:e.actions.addFilter,onRemoveFilter:e.actions.removeFilter,onClearFilters:e.actions.clearFilters})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4","data-test":"table-toolbar",children:[a.jsx(w,{groupableFields:r.computed.groupableFields,selectedField:r.state.groupConfig.primaryField,secondaryFields:r.state.groupConfig.secondaryFields,onFieldSelect:r.actions.setGroupBy,onAddSecondary:r.actions.addGroupLevel,onRemoveSecondary:t=>r.actions.removeGroupLevel(t+1)}),a.jsx(E,{enabled:r.state.sliceConfig.enabled,currentSlice:r.state.sliceConfig.currentSlice,totalSlices:r.computed.totalSlices,sliceSize:r.state.sliceConfig.sliceSize,sliceSizeOptions:r.state.sliceConfig.sliceSizeOptions,onToggle:r.actions.toggleSlicing,onSliceSizeChange:r.actions.setSliceSize,onNextSlice:r.actions.nextSlice,onPreviousSlice:r.actions.previousSlice,hasNext:r.computed.hasNextSlice,hasPrevious:r.computed.hasPreviousSlice,sliceDisplay:r.computed.sliceDisplay})]}),F&&a.jsxs("div",{className:"mb-4 p-3 bg-muted rounded-md flex items-center gap-2 flex-wrap","data-test":"active-sorts-panel",children:[a.jsx("span",{className:"text-sm font-medium","data-test":"sorts-label",children:"Sort:"}),h.map((t,s)=>a.jsxs("div",{className:"flex items-center gap-1 bg-background px-2 py-1 rounded border","data-test":`sort-chip-${t.field}`,children:[a.jsx("span",{className:"text-sm","data-test":`sort-chip-text-${t.field}`,children:t.field}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.direction==="asc"?"A-Z":"Z-A",")"]}),h.length>1&&s>0&&a.jsx(u,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>e.actions.reorderMultiSort(t.field,"up"),"data-test":`move-sort-up-${t.field}`,children:a.jsx(A,{className:"h-3 w-3"})}),a.jsx(u,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>e.actions.removeMultiSort(t.field),"data-test":`remove-sort-${t.field}`,children:a.jsx(U,{className:"h-3 w-3"})})]},t.field)),a.jsx(u,{variant:"outline",size:"sm",onClick:j,"data-test":"clear-all-sorts-button",children:"Clear all"})]}),a.jsxs("div",{className:"mb-4 text-sm text-muted-foreground","data-test":"table-row-count",children:[e.computed.filteredCount," ",e.computed.filteredCount===1?"row":"rows",r.tableProps.isGrouped&&` in ${r.computed.totalGroups} groups`]}),a.jsx("div",{className:"rounded-md border overflow-x-auto","data-test":"table-section",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-muted",children:a.jsx("tr",{"data-test":"header-row",children:d.map(t=>{const s=t.accessorKey||t.id,i=s,o=C(i);return a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer select-none hover:bg-muted/80","data-test":`column-header-${s}`,onClick:n=>v(i,n),children:a.jsxs("div",{className:"flex items-center gap-1",children:[t.header||s,o.isSorted&&a.jsxs(a.Fragment,{children:[a.jsx("span",{"data-test":`sort-indicator-${s}`,children:o.direction==="asc"?"▲":"▼"}),o.isMultiSort&&a.jsx("span",{className:"text-xs bg-primary text-primary-foreground rounded-full w-4 h-4 flex items-center justify-center","data-test":`sort-order-${s}`,children:o.order})]}),a.jsx(G,{columnId:i,columnLabel:x(i),columnType:b(i),currentFilter:m[i],onApplyFilter:n=>S(i,n),onClearFilter:()=>f(i),isActive:y(i)})]})},s)})})}),r.tableProps.isGrouped?a.jsx(P,{rows:r.tableProps.data,columns:d,onToggleGroup:r.actions.toggleGroup}):a.jsx("tbody",{"data-test":"table-body",className:"bg-white divide-y divide-gray-200",children:(()=>{const t=r.state.sliceConfig.enabled?r.tableProps.data.map(s=>s.data):e.computed.processedData;return t.length>0?t.map((s,i)=>a.jsx("tr",{"data-test":`data-row-${i}`,className:"hover:bg-gray-50",children:d.map(o=>{const n=o.accessorKey||o.id;return a.jsx("td",{className:"px-4 py-3 text-sm",children:String(s[n]??"")},n)})},i)):a.jsx("tr",{children:a.jsx("td",{colSpan:d.length,className:"px-4 py-8 text-center text-sm text-muted-foreground","data-test":"no-results-message",children:"No results found"})})})()})]})}),!r.state.sliceConfig.enabled&&a.jsx("div",{className:"mt-4","data-test":"pagination"})]})})]})}export{Z as UiDataTableEnhancedDemoPage};
