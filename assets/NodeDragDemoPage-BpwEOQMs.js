import{r as i,j as e}from"./react-vendor-Byz07MLO.js";import{B as w}from"./Breadcrumbs-D-EeNrHD.js";import"./radix-ui-B6r6BEmy.js";import"./index-BEUYSeX_.js";import"./utils-DjFvUtuq.js";import"./ui-utils-BxIQ3qGg.js";import"./icons-Detj0uxE.js";function C({logger:r}){const p=[{label:"Home",href:"/"},{label:"Demo",href:"/demo"},{label:"Node Drag (iPad)"}],a=i.useRef(null),[c,b]=i.useState([{id:"1",x:50,y:50,width:150,height:100,color:"bg-blue-500",label:"Drag Me!"},{id:"2",x:250,y:150,width:150,height:100,color:"bg-green-500",label:"Or Me!"},{id:"3",x:450,y:80,width:150,height:100,color:"bg-purple-500",label:"Touch Works!"}]),[n,m]=i.useState(null),[u,f]=i.useState([]),l=i.useCallback(t=>{f(s=>[...s.slice(-9),t]),r==null||r.log(t)},[r]),v=i.useCallback((t,s)=>{if(t.button!==0&&t.button!==-1)return;t.stopPropagation();const o=t.target.getBoundingClientRect(),d=t.clientX-o.left,h=t.clientY-o.top;m({nodeId:s.id,offsetX:d,offsetY:h}),l(`ðŸŸ¢ PointerDown: ${s.label} (${t.pointerType})`)},[l]),j=i.useCallback(t=>{if(!n||!a.current)return;const s=a.current.getBoundingClientRect(),o=t.clientX-s.left-n.offsetX,d=t.clientY-s.top-n.offsetY;b(h=>h.map(x=>x.id===n.nodeId?{...x,x:Math.max(0,o),y:Math.max(0,d)}:x))},[n]),y=i.useCallback(t=>{if(!n)return;const s=c.find(o=>o.id===n.nodeId);l(`ðŸ”´ PointerUp: ${s==null?void 0:s.label} (${t.pointerType})`),m(null)},[n,c,l]),[g,N]=i.useState(!1);return i.useEffect(()=>{N("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),e.jsxs("div",{className:"node-drag-demo-page flex-1 flex flex-col h-full",children:[e.jsxs("div",{className:"page-header p-6 pb-0 flex-shrink-0",children:[e.jsx("div",{className:"breadcrumb-section mb-4",children:e.jsx(w,{items:p})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Node Drag - iPad & Touch Support"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Testing PointerEvent-based dragging for iPad, tablets, and touch devices"}),e.jsx("div",{className:`device-info inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm ${g?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:g?"âœ… Touch Device Detected":"ðŸ–±ï¸ Mouse/Pointer Device"})]}),e.jsx("div",{className:"page-content flex-1 p-6 overflow-y-auto min-h-0",children:e.jsxs("div",{className:"demo-container max-w-5xl mx-auto",children:[e.jsxs("div",{className:"instructions-card bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2 text-amber-900",children:"How to Test:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-800",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Desktop:"})," Click and drag the colored boxes with your mouse"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"iPad/Tablet:"})," Touch and drag the boxes with your finger"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Multi-touch:"})," Try using multiple fingers on different boxes"]}),e.jsx("li",{children:"Watch the event log below to see which pointer type is detected"})]})]}),e.jsxs("div",{ref:a,className:"canvas-area relative bg-gray-100 rounded-lg border-2 border-gray-300 overflow-hidden",style:{height:"500px",touchAction:"none"},onPointerMove:j,onPointerUp:y,children:[e.jsx("div",{className:"canvas-label absolute top-2 left-2 text-gray-500 text-sm pointer-events-none",children:"Canvas Area (Drag nodes anywhere)"}),c.map(t=>e.jsx("div",{className:`draggable-node absolute ${t.color} rounded-lg shadow-lg cursor-move
                  flex items-center justify-center text-white font-bold select-none
                  ${(n==null?void 0:n.nodeId)===t.id?"opacity-70 scale-105":"hover:scale-105"}
                  transition-transform`,style:{left:`${t.x}px`,top:`${t.y}px`,width:`${t.width}px`,height:`${t.height}px`,touchAction:"none"},onPointerDown:s=>v(s,t),children:e.jsxs("div",{className:"node-content text-center",children:[e.jsx("div",{className:"node-label text-lg",children:t.label}),e.jsxs("div",{className:"node-id text-xs opacity-75",children:["ID: ",t.id]})]})},t.id))]}),e.jsxs("div",{className:"event-log-card bg-gray-50 border border-gray-200 rounded-lg p-4 mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Event Log"}),e.jsx("div",{className:"event-list bg-white rounded p-3 h-48 overflow-y-auto font-mono text-sm space-y-1",children:u.length===0?e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No events yet. Start dragging nodes!"}):u.map((t,s)=>e.jsx("div",{className:"event-item text-gray-700",children:t},s))})]}),e.jsxs("div",{className:"tech-info-card bg-blue-50 border border-blue-200 rounded-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Technical Details"}),e.jsxs("div",{className:"info-grid grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"âœ… Features Implemented:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700",children:[e.jsx("li",{children:"PointerEvent API (unified mouse/touch/pen)"}),e.jsx("li",{children:"Touch action prevention (touchAction: 'none')"}),e.jsx("li",{children:"Button check for primary input (0) and touch (-1)"}),e.jsx("li",{children:"Real-time position updates"}),e.jsx("li",{children:"Event type detection (mouse/touch/pen)"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ðŸŽ¯ Why It Works on iPad:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700",children:[e.jsx("li",{children:"PointerEvents work across all input types"}),e.jsx("li",{children:"No separate touch event handlers needed"}),e.jsx("li",{children:"Consistent API for mouse and touch"}),e.jsx("li",{children:"Native gesture prevention with touchAction"}),e.jsx("li",{children:"Multi-touch support (each pointer tracked separately)"})]})]})]}),e.jsxs("div",{className:"code-reference mt-4 p-4 bg-gray-800 text-gray-100 rounded text-sm overflow-x-auto",children:[e.jsx("div",{className:"mb-2 text-gray-400",children:"// Key implementation in useNodeDragHandler.ts:"}),e.jsx("code",{children:`// Changed from MouseEvent to PointerEvent
const handlePointerDown = (event: PointerEvent) => {
  // Accept primary button (0) and touch (-1)
  if (event.button !== 0 && event.button !== -1) return;
  // ... drag logic
};`})]})]})]})})]})}export{C as NodeDragDemoPage};
