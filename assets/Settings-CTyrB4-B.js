import{r as j,j as e}from"./react-vendor-CrhW4DYn.js";import{az as y,aT as b,I as g,B as f,aU as $,aa as O}from"./index-CgyRe94A.js";import{g as k}from"./format-utils-Ba8uG3XU.js";import{M as z,a1 as U,I as B,O as T,e as F,aM as J}from"./icons-6Gjq1X59.js";import"./utils-DPdF7W5J.js";import"./radix-ui-BcQf1l4u.js";import"./ui-utils-BxIQ3qGg.js";function M(n,l){const[r,c]=j.useState(()=>{const s=y.get(n);return s!==void 0?s:l}),d=j.useCallback(s=>{const p=typeof s=="function"?s(r):s;c(p),y.set(n,p)},[n,r]),o=j.useCallback(s=>{const p={...r,...s};c(p),y.update(n,s)},[n,r]);return[r,d,o]}const h=({label:n,required:l,error:r,children:c})=>e.jsxs("div",{className:"form-field","data-test":"form-field-container",children:[e.jsxs("label",{className:b.label,"data-test":"form-field-label",children:[n,l&&e.jsx("span",{className:"text-red-500 ml-1","data-test":"form-field-required-indicator",children:"*"})]}),c,r&&e.jsx("div",{className:b.error,"data-test":"form-field-error",children:r})]}),v=({value:n,onChange:l,placeholder:r,onClick:c,className:d="",type:o="text"})=>e.jsx("input",{type:o,value:n,onChange:s=>l(s.target.value),placeholder:r,onClick:c,className:`${b.input} ${d}`}),D=({value:n,onChange:l,placeholder:r,onClick:c,rows:d=4,className:o=""})=>e.jsx("textarea",{value:n,onChange:s=>l(s.target.value),placeholder:r,onClick:c,rows:d,className:`${b.textarea} ${o}`}),S=[{id:"default",name:"General Assistant",description:"A helpful AI assistant for general purposes",content:"You are a helpful AI assistant.",isDefault:!0,createdAt:new Date,updatedAt:new Date},{id:"code-helper",name:"Code Helper",description:"Specialized assistant for programming and development",content:"You are an expert software developer. You provide clear, concise code examples and explanations. Focus on best practices, clean code, and practical solutions.",isDefault:!1,createdAt:new Date,updatedAt:new Date},{id:"creative-writer",name:"Creative Writer",description:"Assist with creative writing and storytelling",content:"You are a creative writing assistant. Help users craft engaging stories, develop characters, and improve their writing style. Be imaginative and encouraging.",isDefault:!1,createdAt:new Date,updatedAt:new Date}];function Y({logger:n}){const[l,r]=j.useState([]),[c,d]=j.useState(""),[o,,s]=M("chatSettings",{isEditing:!1,editingPromptId:null,formData:{name:"",description:"",content:""}}),p=o.isEditing,m=o.editingPromptId&&l.find(t=>t.id===o.editingPromptId)||null,i=o.formData;j.useEffect(()=>{const t=localStorage.getItem("systemPrompts"),a=localStorage.getItem("selectedSystemPromptId");if(t){const x=JSON.parse(t);r(x)}else r(S),localStorage.setItem("systemPrompts",JSON.stringify(S));if(a)d(a);else{const x=S.find(u=>u.isDefault);x&&(d(x.id),localStorage.setItem("selectedSystemPromptId",x.id))}},[]);const I=()=>{s({isEditing:!0,editingPromptId:null,formData:{name:"",description:"",content:""}})},w=t=>{s({isEditing:!0,editingPromptId:t.id,formData:{name:t.name,description:t.description,content:t.content}})},A=t=>{const a=l.find(u=>u.id===t);if(a!=null&&a.isDefault){n.warning("Cannot delete the default system prompt");return}const x=l.filter(u=>u.id!==t);if(r(x),localStorage.setItem("systemPrompts",JSON.stringify(x)),c===t){const u=x.find(E=>E.isDefault);u&&(d(u.id),localStorage.setItem("selectedSystemPromptId",u.id))}n.info(`Deleted system prompt: ${a==null?void 0:a.name}`)},P=()=>{if(!i.name.trim()||!i.content.trim()){n.warning("Name and content are required");return}if(m){const t=l.map(a=>a.id===m.id?{...a,...i,updatedAt:new Date}:a);r(t),localStorage.setItem("systemPrompts",JSON.stringify(t)),n.info(`Updated system prompt: ${i.name}`)}else{const t={id:k(),name:i.name,description:i.description,content:i.content,isDefault:!1,createdAt:new Date,updatedAt:new Date},a=[...l,t];r(a),localStorage.setItem("systemPrompts",JSON.stringify(a)),n.info(`Created system prompt: ${i.name}`)}s({isEditing:!1,editingPromptId:null,formData:{name:"",description:"",content:""}})},C=()=>{s({isEditing:!1,editingPromptId:null,formData:{name:"",description:"",content:""}})},N=l.find(t=>t.id===c);return e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:`${g.md} text-primary`}),e.jsx("h2",{className:"text-xl font-semibold",children:"System Prompts"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Active Prompt"})]}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:(N==null?void 0:N.name)||"No prompt selected"}),N&&e.jsx("span",{className:"block text-xs text-blue-600 mt-1",children:N.description})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"All System Prompts"}),e.jsxs(f,{onClick:I,size:"sm",children:[e.jsx(U,{className:`${g.sm} mr-1`}),"New Prompt"]})]}),l.map(t=>e.jsxs("div",{className:`border rounded-lg transition-all ${t.id===c?"border-blue-300 bg-blue-50/50":"border-gray-200"} ${p&&(m==null?void 0:m.id)===t.id?"ring-2 ring-blue-500":""}`,children:[e.jsx("div",{className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${t.id===c?"hover:bg-blue-100/50":""}`,onClick:()=>{d(t.id),localStorage.setItem("selectedSystemPromptId",t.id),n.info(`Active system prompt changed to: ${t.name}`)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("input",{type:"radio",name:"activePrompt",checked:c===t.id,onChange:()=>{},className:"w-4 h-4 text-blue-600 pointer-events-none"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:t.name}),t.isDefault&&e.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:"Default"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 line-clamp-2",children:[t.content.substring(0,150),"..."]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",onClick:a=>a.stopPropagation(),children:[e.jsx(f,{onClick:()=>w(t),size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(B,{className:g.sm})}),!t.isDefault&&e.jsx(f,{onClick:()=>A(t.id),size:"sm",variant:"ghost",className:`h-8 w-8 p-0 ${$.deleteButton} hover:bg-red-50`,children:e.jsx(T,{className:g.sm})})]})]})}),p&&(m==null?void 0:m.id)===t.id&&e.jsxs("div",{className:"border-t bg-gray-50 p-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Edit Prompt"}),e.jsx(h,{label:"Name",children:e.jsx(v,{value:i.name,onChange:a=>s({formData:{...i,name:a}})})}),e.jsx(h,{label:"Description",children:e.jsx(v,{value:i.description,onChange:a=>s({formData:{...i,description:a}})})}),e.jsx(h,{label:"Content",children:e.jsx(D,{value:i.content,onChange:a=>s({formData:{...i,content:a}}),rows:6})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{onClick:P,size:"sm",children:"Save Changes"}),e.jsx(f,{onClick:C,variant:"outline",size:"sm",children:"Cancel"})]})]})]},t.id)),p&&!m&&e.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 space-y-4 bg-gray-50",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Create New Prompt"}),e.jsx(h,{label:"Name",children:e.jsx(v,{value:i.name,onChange:t=>s({formData:{...i,name:t}}),placeholder:"e.g., Code Helper, Creative Writer"})}),e.jsx(h,{label:"Description",children:e.jsx(v,{value:i.description,onChange:t=>s({formData:{...i,description:t}}),placeholder:"Brief description of this prompt's purpose"})}),e.jsx(h,{label:"Content",children:e.jsx(D,{value:i.content,onChange:t=>s({formData:{...i,content:t}}),placeholder:"Enter the system prompt content...",rows:6})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{onClick:P,size:"sm",children:"Create Prompt"}),e.jsx(f,{onClick:C,variant:"outline",size:"sm",children:"Cancel"})]})]})]}),e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:"âœ… All changes are saved automatically"})})]})}function G({logger:n}){return e.jsx("div",{className:"flex flex-col h-full max-h-[calc(100vh-8rem)]",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:`${g.lg} text-primary`}),e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure your application preferences and chat settings."})]}),e.jsx(Y,{logger:n}),e.jsx(O,{className:"my-8"}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(J,{className:`${g.md} text-primary`}),e.jsx("h2",{className:"text-xl font-semibold",children:"Debug Settings"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Debug configuration is currently managed through code. Future versions will include UI controls for debug flags."})})]})]})})})}export{G as Settings};
