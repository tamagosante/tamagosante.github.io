import{r as d,j as e,R as k}from"./react-vendor-Byz07MLO.js";import{R as y,d as T,O as R,C as S,T as h,D as C}from"./radix-ui-v9Pxfv0s.js";import{ab as x,V as n}from"./index-eHP58yiE.js";import{q as E,r as D}from"./icons-vtiX7BHn.js";const M=50,Y=({isOpen:f,onOpenChange:i,header:b,blocks:p})=>{const[s,c]=d.useState(null),o=d.useRef(null),[l,m]=d.useState(0),u=d.useRef(!1),g=t=>{o.current=t.touches[0].clientY,u.current=!0},j=t=>{if(o.current===null||!u.current)return;const r=t.touches[0].clientY-o.current;r>0&&m(r)},v=()=>{l>M&&(i(!1),setTimeout(()=>{c(null)},150)),o.current=null,u.current=!1,m(0)},N=t=>{t.subView?c(t.subView):t.onClick&&t.onClick()},w=()=>{c(null)};return e.jsx(y,{open:f,onOpenChange:i,children:e.jsxs(T,{children:[e.jsx(R,{className:n("fixed inset-0 bg-black/50","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"),style:{zIndex:x.mobileSheet},"data-test":"mobile-sheet-overlay"}),e.jsxs(S,{className:n("fixed inset-x-0 bottom-0","bg-background rounded-t-xl border-t shadow-lg","overflow-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","data-[state=closed]:duration-50 data-[state=open]:duration-200",l===0&&"transition-transform"),style:{zIndex:x.mobileSheet+1,maxHeight:"80vh",transform:l>0?`translateY(${l}px)`:void 0},onTouchStart:g,onTouchMove:j,onTouchEnd:v,"data-test":"mobile-sheet",children:[e.jsx("div",{className:"flex justify-center py-3 cursor-pointer",onClick:()=>i(!1),"data-test":"mobile-sheet-handle",children:e.jsx("div",{className:"w-10 h-1 rounded-full bg-muted-foreground/30"})}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsxs("div",{className:n("transition-transform duration-300 ease-in-out",s?"-translate-x-full":"translate-x-0"),"data-test":"mobile-sheet-main-view",children:[e.jsx("div",{className:"px-4 pb-4",children:e.jsx(h,{className:"text-lg font-semibold text-foreground leading-none m-0 p-0",children:b})}),e.jsx("div",{className:"px-4 pb-6 space-y-4","data-test":"mobile-sheet-blocks",children:p.map(t=>e.jsx("div",{className:"rounded-xl bg-muted/50 dark:bg-muted/30 overflow-hidden","data-test":`mobile-sheet-block-${t.id}`,children:t.items.map((a,r)=>e.jsxs(k.Fragment,{children:[r>0&&e.jsx("div",{className:"mx-4 border-t border-border/50"}),e.jsxs("button",{className:n("w-full flex items-center justify-between px-4 py-3","hover:bg-muted/80 dark:hover:bg-muted/50 active:bg-muted transition-colors","text-left"),onClick:()=>N(a),"data-test":`mobile-sheet-item-${a.id}`,children:[e.jsx("span",{className:"font-medium text-foreground",children:a.label}),a.subView?e.jsx(E,{className:"w-5 h-5 text-muted-foreground"}):a.icon?e.jsx(a.icon,{className:"w-5 h-5 text-muted-foreground"}):null]})]},a.id))},t.id))})]}),e.jsxs("div",{className:n("absolute inset-0 transition-transform duration-300 ease-in-out",s?"translate-x-0":"translate-x-full"),"data-test":"mobile-sheet-sub-view",children:[e.jsx("div",{className:"px-4 pb-4",children:e.jsxs(h,{className:"text-lg font-semibold text-foreground leading-none m-0 p-0 flex items-center gap-2",children:[e.jsx("button",{className:n("shrink-0 rounded-lg","hover:bg-muted/50 active:bg-muted transition-colors"),onClick:w,"data-test":"mobile-sheet-back-button",children:e.jsx(D,{className:"w-6 h-6"})}),s==null?void 0:s.header]})}),e.jsx("div",{className:"px-4 pb-6",children:s==null?void 0:s.content})]})]}),e.jsx(C,{className:"sr-only",children:"Mobile sheet with drill-down navigation"})]})]})})};Y.displayName="MobileSheet";export{Y as M};
