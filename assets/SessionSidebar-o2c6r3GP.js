import{r as D,j as e,u as le}from"./react-vendor-CrhW4DYn.js";import{aR as q,Q as $,W as _,w as A,B as E,ao as re,ap as oe,aq as ce,T as de,F as me,G as U,H as J,z as f,a8 as V,E as he,S as W,a as G,b as H,c as K,d as R,N as xe,y as ue,C as fe,r as pe,s as ge,aP as ve,u as je,al as Ne,aS as be}from"./index-CgyRe94A.js";import{R as we,a as X}from"./radio-group-yyvGmlz8.js";import{Tree as ye}from"./tree-YoeeSzP_.js";import{a4 as Ce,a2 as Se,X as Me,aH as Fe,a1 as ke,aI as Te,aJ as De,a6 as Ae,aB as ze,a7 as Be}from"./icons-6Gjq1X59.js";function Ee({sessions:d,onSessionSelect:g,selectedSessionId:j,formatDate:S,formatCwd:z,pathPrefix:M="",segmentsToStrip:i=0}){const{treeData:v,expandedIds:N}=D.useMemo(()=>{const n={sessions:[],children:new Map},T=M.trim()?M.trim().replace(/\/$/,""):"";d.forEach(x=>{if(!x.cwd)return;let y=x.cwd;T&&x.cwd.startsWith(T)&&(y=x.cwd.substring(T.length));let p=y.split("/").filter(Boolean);if(i>0&&p.length>i&&(p=p.slice(i)),p.length===0){n.sessions.push(x);return}let a=n;p.forEach((u,F)=>{a.children.has(u)||a.children.set(u,{path:p.slice(0,F+1).join("/"),sessions:[],children:new Map}),a=a.children.get(u)}),a.sessions.push(x)});const r=(x,y="")=>{const p=[];return Array.from(x.children.entries()).sort(([a],[u])=>a.localeCompare(u)).forEach(([a,u])=>{const F=y?`${y}/${a}`:a,l=r(u,F),t={id:`dir-${F}`,label:a,icon:e.jsx(Ce,{className:"h-4 w-4 text-blue-500"}),children:l};p.push(t)}),x.sessions.sort((a,u)=>new Date(u.lastModified).getTime()-new Date(a.lastModified).getTime()).forEach(a=>{p.push({id:a.id,label:a.name,data:a})}),p},B=r(n),o=new Set;if(j){const x=d.find(y=>y.id===j);if(x!=null&&x.cwd){let y=x.cwd;const p=M.trim()?M.trim().replace(/\/$/,""):"";p&&x.cwd.startsWith(p)&&(y=x.cwd.substring(p.length));let a=y.split("/").filter(Boolean);i>0&&a.length>i&&(a=a.slice(i));for(let u=0;u<a.length;u++){const F=a.slice(0,u+1).join("/");o.add(`dir-${F}`)}}}return{treeData:B,expandedIds:o}},[d,M,i,j]),w=(n,T,r)=>{const B=n.data;return B?e.jsx(q,{session:B,isSelected:T,onClick:r,formatDate:S,formatCwd:z}):null},O=n=>{n.id.startsWith("dir-")||g(n.id)};return e.jsx("div",{className:"directory-tree-container space-y-2","data-test":"directory-tree-container",children:e.jsx(ye,{data:v,onItemClick:O,className:"directory-tree",defaultExpandedIds:N,selectedId:j,renderLeaf:w,"data-test":"directory-tree"})})}function Le({sessions:d,onSessionSelect:g,selectedSessionId:j,formatDate:S,formatCwd:z,segmentsToStrip:M=3,onNameUpdated:i}){return e.jsx("div",{"data-test":"session-list-view",className:"session-items space-y-2",children:d.map(v=>e.jsx(q,{session:v,isSelected:j===v.id,onClick:()=>g(v.id),formatDate:S,formatCwd:z,segmentsToStrip:M,onNameUpdated:i},v.id))})}const Ie=[{value:"id",label:"Session ID"},{value:"name",label:"Session Name"},{value:"cwd",label:"Working Directory"},{value:"firstMessage",label:"First Message"}],Y=[{value:"user",label:"User Messages",description:"Pure user messages (no tool content)"},{value:"assistant",label:"Assistant Responses",description:"Pure assistant responses (no thinking/tool blocks)"},{value:"thinking",label:"Thinking Blocks",description:"Messages containing thinking blocks"},{value:"tools",label:"Tool Calls/Results",description:"Messages containing tool_use or tool_result blocks"}],Oe=[{value:"lastModified",label:"Last Modified"},{value:"name",label:"Name"},{value:"messageCount",label:"Message Count"}],Pe={fields:["name"],sortBy:"lastModified",sortOrder:"desc",pageSize:11},Re={messageType:[],sortOrder:"desc",pageSize:50},Z=D.forwardRef(({searchQuery:d,onSearchChange:g,onAdvancedSearch:j,onMessageSearch:S,className:z},M)=>{var b,C,L;const i=(L=(C=(b=$.getState().app)==null?void 0:b.claude)==null?void 0:C.ui)==null?void 0:L.advancedSearch,[v,N]=D.useState(!1),[w,O]=D.useState((i==null?void 0:i.activeTab)??"sessions"),[n,T]=D.useState({...Pe,...i==null?void 0:i.sessionFilters}),[r,B]=D.useState({...Re,...i==null?void 0:i.messageFilters});D.useEffect(()=>{var m,h,k;const s=$.getState();$.updateState({app:{...s.app,claude:{...(m=s.app)==null?void 0:m.claude,ui:{...(k=(h=s.app)==null?void 0:h.claude)==null?void 0:k.ui,advancedSearch:{activeTab:w,sessionFilters:n,messageFilters:r}}}}})},[w,n,r]);const o=D.useMemo(()=>{const{fields:s,messageTypes:m,sortBy:h,sortOrder:k,pageSize:I,...P}=n,Q=s&&(s.length!==1||s[0]!=="name"),ee=m&&m.length>0,se=Object.values(P).some(ne=>ne!==void 0),ae=Q||ee||se||(h!=="lastModified"||k!=="desc"),te=r.messageType&&r.messageType.length>0,ie=r.after||r.before;return ae||(te||ie)},[n,r]),x=(s,m)=>{T(h=>{const k=h.fields||[],I=m?[...k,s]:k.filter(P=>P!==s);return{...h,fields:I.length>0?I:void 0}})},y=(s,m)=>{B(h=>{const k=h.messageType||[],I=m?[...k,s]:k.filter(P=>P!==s);return{...h,messageType:I.length>0?I:void 0}})},p=(s,m)=>{T(h=>{const k=h.messageTypes||[],I=m?[...k,s]:k.filter(P=>P!==s);return{...h,messageTypes:I.length>0?I:void 0}})},a=(s,m)=>{T(h=>({...h,[s]:m}))},u=(s,m)=>{B(h=>({...h,[s]:m}))},F=()=>{w==="sessions"&&j?j(d,n):w==="messages"&&S&&S(d,r),N(!1)},l=()=>{w==="sessions"?T({fields:["name"],sortBy:"lastModified",sortOrder:"desc",pageSize:11}):B({messageType:[],sortOrder:"desc",pageSize:50})},t=s=>{s.key==="Enter"&&(w==="sessions"&&j?j(d,n):w==="messages"&&S&&S(d,r))},c=()=>{g("")};return e.jsx("div",{ref:M,className:_("sessions-search-container relative",z),"data-test":"sessions-search-container",children:e.jsxs("div",{className:"search-input-wrapper relative flex items-center gap-1","data-test":"sessions-search-input-wrapper",children:[e.jsx(Se,{className:"search-icon absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none z-10","data-test":"sessions-search-icon"}),e.jsx(A,{type:"text",placeholder:w==="sessions"?"Search sessions...":"Search messages...",value:d,onChange:s=>g(s.target.value),onKeyDown:t,className:_("search-input pl-9",d?"pr-16":"pr-10"),"data-test":"sessions-search-input"}),d&&e.jsx(E,{variant:"ghost",size:"icon",onClick:c,className:"clear-button absolute right-9 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0 hover:bg-muted","aria-label":"Clear search","data-test":"sessions-search-clear-button",children:e.jsx(Me,{className:"h-4 w-4"})}),o&&e.jsx("div",{className:_("filter-indicator absolute top-1/2 -translate-y-1/2 h-2 w-2 rounded-full bg-primary pointer-events-none z-10",d?"right-17":"right-11"),"data-test":"sessions-search-filter-indicator"}),e.jsxs(re,{open:v,onOpenChange:N,children:[e.jsx(oe,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"icon",className:"expand-button absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0","aria-label":v?"Collapse advanced search":"Expand advanced search","data-test":"sessions-search-expand-button",children:e.jsx(Fe,{className:"h-4 w-4"})})}),e.jsxs(ce,{align:"start",side:"bottom",avoidCollisions:!0,className:"advanced-search-panel w-96 max-h-[70vh] overflow-y-auto","data-test":"sessions-advanced-search-panel",children:[e.jsx("div",{className:"panel-header space-y-2 pb-3 border-b","data-test":"sessions-panel-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Advanced Search"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:l,className:"h-7 text-xs","data-test":"sessions-clear-filters-button",children:"Clear All"})]})}),e.jsxs(de,{value:w,onValueChange:s=>O(s),className:"mt-3",children:[e.jsxs(me,{className:"grid w-full grid-cols-2","data-test":"sessions-search-tabs",children:[e.jsx(U,{value:"sessions","data-test":"sessions-tab-sessions",children:"Sessions"}),e.jsx(U,{value:"messages","data-test":"sessions-tab-messages",children:"Messages"})]}),e.jsxs(J,{value:"sessions",className:"space-y-4 mt-4","data-test":"sessions-tab-content-sessions",children:[e.jsxs("div",{className:"field-selection space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Search Fields"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Select fields to search (OR logic across fields)"}),e.jsx("div",{className:"fields-grid space-y-2",children:Ie.map(s=>{var m;return e.jsxs("div",{className:"field-item flex items-center space-x-2",children:[e.jsx(V,{id:`field-${s.value}`,checked:(m=n.fields)==null?void 0:m.includes(s.value),onCheckedChange:h=>x(s.value,h===!0)}),e.jsx("label",{htmlFor:`field-${s.value}`,className:"text-sm cursor-pointer",children:s.label})]},s.value)})})]}),e.jsxs("div",{className:"message-types-selection space-y-2","data-test":"sessions-tab-message-types-section",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Types"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Filter by message type when searching in message content"}),e.jsx("div",{className:"message-types-grid space-y-2",children:Y.map(s=>{var m;return e.jsxs("div",{className:"message-type-item flex items-center space-x-2",children:[e.jsx(V,{id:`session-msgtype-${s.value}`,checked:(m=n.messageTypes)==null?void 0:m.includes(s.value),onCheckedChange:h=>p(s.value,h===!0),"data-test":`sessions-tab-msgtype-${s.value}`}),e.jsxs("label",{htmlFor:`session-msgtype-${s.value}`,className:"text-sm cursor-pointer flex-1",children:[e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground block",children:s.description})]})]},s.value)})})]}),e.jsxs("div",{className:"active-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Sessions Only"}),e.jsx(he,{checked:n.isActive??!1,onCheckedChange:s=>a("isActive",s?!0:void 0)})]})]}),e.jsxs("div",{className:"message-count-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:"number",placeholder:"Min",min:"0",value:n.minMessages??"",onChange:s=>a("minMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),e.jsx(A,{type:"number",placeholder:"Max",min:"0",value:n.maxMessages??"",onChange:s=>a("maxMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"})]})]}),e.jsxs("div",{className:"date-range-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Modified Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"session-date-after",className:"text-xs text-muted-foreground",children:"After"}),e.jsx(A,{id:"session-date-after",type:"datetime-local",value:n.modifiedAfter??"",onChange:s=>a("modifiedAfter",s.target.value||void 0),className:"h-8"})]}),e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"session-date-before",className:"text-xs text-muted-foreground",children:"Before"}),e.jsx(A,{id:"session-date-before",type:"datetime-local",value:n.modifiedBefore??"",onChange:s=>a("modifiedBefore",s.target.value||void 0),className:"h-8"})]})]})]}),e.jsxs("div",{className:"sorting-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Sort By"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{value:n.sortBy,onValueChange:s=>a("sortBy",s),children:[e.jsx(G,{className:"h-8 flex-1",children:e.jsx(H,{})}),e.jsx(K,{children:Oe.map(s=>e.jsx(R,{value:s.value,children:s.label},s.value))})]}),e.jsxs(W,{value:n.sortOrder,onValueChange:s=>a("sortOrder",s),children:[e.jsx(G,{className:"h-8 w-32",children:e.jsx(H,{})}),e.jsxs(K,{children:[e.jsx(R,{value:"desc",children:"Descending"}),e.jsx(R,{value:"asc",children:"Ascending"})]})]})]})]}),e.jsxs("div",{className:"pagination-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Results Per Page"}),e.jsx(A,{type:"number",min:"1",max:"100",value:n.pageSize??11,onChange:s=>a("pageSize",s.target.value?parseInt(s.target.value):11),className:"h-8"})]})]}),e.jsxs(J,{value:"messages",className:"space-y-4 mt-4","data-test":"sessions-tab-content-messages",children:[e.jsxs("div",{className:"message-types-selection space-y-2","data-test":"sessions-message-types-section",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Types"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Filter by message type (searches across all sessions)"}),e.jsx("div",{className:"message-types-grid space-y-2",children:Y.map(s=>{var m;return e.jsxs("div",{className:"message-type-item flex items-center space-x-2",children:[e.jsx(V,{id:`msgtype-${s.value}`,checked:(m=r.messageType)==null?void 0:m.includes(s.value),onCheckedChange:h=>y(s.value,h===!0),"data-test":`sessions-msgtype-${s.value}`}),e.jsxs("label",{htmlFor:`msgtype-${s.value}`,className:"text-sm cursor-pointer flex-1",children:[e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground block",children:s.description})]})]},s.value)})})]}),e.jsxs("div",{className:"date-range-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"msg-date-after",className:"text-xs text-muted-foreground",children:"After"}),e.jsx(A,{id:"msg-date-after",type:"datetime-local",value:r.after??"",onChange:s=>u("after",s.target.value||void 0),className:"h-8"})]}),e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"msg-date-before",className:"text-xs text-muted-foreground",children:"Before"}),e.jsx(A,{id:"msg-date-before",type:"datetime-local",value:r.before??"",onChange:s=>u("before",s.target.value||void 0),className:"h-8"})]})]})]}),e.jsxs("div",{className:"sorting-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Sort Order"}),e.jsxs(W,{value:r.sortOrder,onValueChange:s=>u("sortOrder",s),children:[e.jsx(G,{className:"h-8",children:e.jsx(H,{})}),e.jsxs(K,{children:[e.jsx(R,{value:"desc",children:"Newest First"}),e.jsx(R,{value:"asc",children:"Oldest First"})]})]})]}),e.jsxs("div",{className:"pagination-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Results Per Page"}),e.jsx(A,{type:"number",min:"1",max:"100",value:r.pageSize??50,onChange:s=>u("pageSize",s.target.value?parseInt(s.target.value):50),className:"h-8"})]})]})]}),e.jsxs("div",{className:"panel-footer flex items-center gap-2 pt-3 mt-4 border-t","data-test":"sessions-panel-footer",children:[e.jsx(E,{onClick:F,className:"flex-1",size:"sm","data-test":"sessions-apply-search-button",children:w==="sessions"?"Search Sessions":"Search Messages"}),e.jsx(E,{onClick:()=>N(!1),variant:"outline",size:"sm","data-test":"sessions-cancel-button",children:"Cancel"})]})]})]})]})})});Z.displayName="SessionsSearch";function $e({variant:d="ghost",size:g="icon",className:j="create-session-button",disabled:S=!1}){const z=le(),[M,i]=D.useState(!1),v=async()=>{try{i(!0);const N=await xe.createSession();if(N.success&&N.sessionId)z(`/claude/${N.sessionId}`);else throw new Error(N.error||"Failed to create session")}catch(N){console.error("Failed to create session:",N)}finally{i(!1)}};return e.jsx(E,{variant:d,size:g,onClick:v,disabled:S||M,className:j,title:"Create New Session","data-test":"create-new-claude-session-button",children:e.jsx(ke,{className:"h-4 w-4"})})}function Je({sessions:d,loading:g,error:j,onSessionSelect:S,selectedSessionId:z,onRefresh:M,pagination:i,currentPage:v=1,onPageChange:N,onLoadMore:w,onSearch:O,onMessageSearch:n,onNameUpdated:T}){const[r,B]=D.useState(""),[o,x]=D.useState(null),y=l=>{const t=new Date(l);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},p=l=>l?l.replace(/^\/home\/[^/]+\//,"~/"):"",a=(l,t)=>{console.log("Advanced search triggered:",{query:l,filters:t}),x(t),O&&O(l,t)},u=(l,t)=>{console.log("Message search triggered:",{query:l,filters:t}),n&&n(l,t)},F=D.useMemo(()=>{if(O||!r.trim())return d;const l=r.toLowerCase();let t=d;if(o!=null&&o.fields&&o.fields.length>0?t=d.filter(c=>o.fields.some(b=>{var C,L;switch(b){case"id":return c.id.toLowerCase().includes(l);case"name":return c.name.toLowerCase().includes(l);case"cwd":return(C=c.cwd)==null?void 0:C.toLowerCase().includes(l);case"firstMessage":return(L=c.firstMessage)==null?void 0:L.toLowerCase().includes(l);default:return!1}})):t=d.filter(c=>c.name.toLowerCase().includes(l)||c.id.toLowerCase().includes(l)),o){if(o.isActive!==void 0&&(t=t.filter(c=>c.isActive===o.isActive)),o.minMessages!==void 0&&(t=t.filter(c=>c.messageCount>=o.minMessages)),o.maxMessages!==void 0&&(t=t.filter(c=>c.messageCount<=o.maxMessages)),o.modifiedAfter!==void 0){const c=new Date(o.modifiedAfter);t=t.filter(b=>new Date(b.lastModified)>=c)}if(o.modifiedBefore!==void 0){const c=new Date(o.modifiedBefore);t=t.filter(b=>new Date(b.lastModified)<=c)}o.sortBy&&(t=[...t].sort((c,b)=>{let C=0;switch(o.sortBy){case"name":C=c.name.localeCompare(b.name);break;case"messageCount":C=c.messageCount-b.messageCount;break;case"lastModified":default:C=new Date(c.lastModified).getTime()-new Date(b.lastModified).getTime();break}return o.sortOrder==="asc"?C:-C}))}return t},[d,r,o,O]);return e.jsx(ue,{storageKey:"session-sidebar-config",initialConfig:{viewMode:"list",pathPrefix:"",segmentsToStrip:3},children:(l,t,c)=>{const{viewMode:b,pathPrefix:C,segmentsToStrip:L}=l;return e.jsxs(fe,{className:"session-list-card h-full flex flex-col overflow-hidden","data-test":"session-sidebar-card",children:[e.jsxs(pe,{className:"session-list-header flex flex-col space-y-3 pb-4 flex-shrink-0","data-test":"session-sidebar-header",children:[e.jsxs("div",{className:"header-top flex flex-row items-center justify-between","data-test":"session-sidebar-header-top",children:[e.jsx(ge,{className:"text-xl",children:"Claude Sessions"}),e.jsxs("div",{className:"header-actions flex items-center gap-1","data-test":"session-sidebar-header-actions",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:M,disabled:g,className:"refresh-button","data-test":"session-sidebar-refresh-button",children:e.jsx(Te,{className:`h-4 w-4 ${g?"animate-spin":""}`})}),e.jsx($e,{disabled:g}),e.jsx(ve,{disabled:g}),e.jsx(c,{icon:e.jsx(De,{className:"h-4 w-4"}),title:"View Options",variant:"ghost",size:"icon",contentClassName:"w-64",children:e.jsxs("div",{className:"view-options-content space-y-4",children:[e.jsxs("div",{className:"view-mode-selector space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Display Mode"}),e.jsxs(we,{value:b,onValueChange:s=>t({...l,viewMode:s}),children:[e.jsxs("div",{className:"view-option flex items-center space-x-2",children:[e.jsx(X,{value:"list",id:"view-list"}),e.jsx(f,{htmlFor:"view-list",className:"cursor-pointer",children:"List"})]}),e.jsxs("div",{className:"view-option flex items-center space-x-2",children:[e.jsx(X,{value:"tree",id:"view-tree"}),e.jsx(f,{htmlFor:"view-tree",className:"cursor-pointer",children:"Tree"})]})]})]}),e.jsxs("div",{className:"segments-to-strip-filter space-y-2",children:[e.jsx(f,{htmlFor:"segments-to-strip",className:"text-sm font-medium",children:"Segments to Strip"}),e.jsx(A,{id:"segments-to-strip",type:"number",min:"0",max:"10",value:L,onChange:s=>t({...l,segmentsToStrip:Number(s.target.value)}),className:"segments-to-strip-input"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strips first N path segments from session names"})]}),b==="tree"&&e.jsxs("div",{className:"path-prefix-filter space-y-2",children:[e.jsx(f,{htmlFor:"path-prefix",className:"text-sm font-medium",children:"Path Prefix (to strip)"}),e.jsx(A,{id:"path-prefix",type:"text",placeholder:"/home/user/path",value:C,onChange:s=>t({...l,pathPrefix:s.target.value}),className:"path-prefix-input"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strips this prefix from tree paths"})]})]})})]})]}),e.jsx(Z,{searchQuery:r,onSearchChange:B,onAdvancedSearch:a,onMessageSearch:u})]}),e.jsxs(je,{className:"session-list-content flex-1 min-h-0 p-0 overflow-hidden flex flex-col","data-test":"session-sidebar-content",children:[e.jsx("div",{className:"sessions-container flex-1 overflow-hidden","data-test":"session-sidebar-sessions-container",children:e.jsxs(Ne,{className:"session-scroll-area h-full w-full","data-test":"session-sidebar-scroll-area",children:[e.jsxs("div",{className:"space-y-2 min-w-max","data-test":"session-sidebar-sessions-list",children:[j&&e.jsx("div",{className:"error-message text-sm text-red-500 mb-2","data-test":"session-sidebar-error-message",children:j}),g&&F.length===0?e.jsx("div",{className:"loading-message text-sm text-muted-foreground","data-test":"session-sidebar-loading-message",children:"Loading sessions..."}):F.length===0?e.jsx("div",{className:"empty-state text-sm text-muted-foreground","data-test":"session-sidebar-empty-state",children:r?"No sessions match your search":"No sessions found"}):b==="tree"?e.jsx(Ee,{sessions:F,onSessionSelect:S,selectedSessionId:z,formatDate:y,formatCwd:p,pathPrefix:C,segmentsToStrip:L}):e.jsx(Le,{sessions:F,onSessionSelect:S,selectedSessionId:z,formatDate:y,formatCwd:p,segmentsToStrip:L,onNameUpdated:T})]}),e.jsx(be,{orientation:"horizontal"})]})}),i&&e.jsxs("div",{className:"pagination-controls flex flex-col gap-2 px-4 py-2 border-t flex-shrink-0","data-test":"session-sidebar-pagination-controls",children:[w&&v<i.totalPages&&e.jsxs(E,{variant:"outline",size:"sm",onClick:w,disabled:g,className:"load-more-button w-full","data-test":"session-sidebar-load-more-button",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Load More Sessions",e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",d.length," of ",i.totalCount,")"]})]}),N&&e.jsxs("div",{className:"pagination-nav flex items-center justify-between gap-2","data-test":"session-sidebar-pagination-nav",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>N(v-1),disabled:v===1||g,className:"pagination-prev","data-test":"session-sidebar-pagination-prev-button",children:[e.jsx(ze,{className:"h-4 w-4 mr-1"}),"Prev"]}),e.jsxs("div",{className:"pagination-info text-xs text-muted-foreground","data-test":"session-sidebar-pagination-info",children:["Page ",i.page," of ",i.totalPages]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>N(v+1),disabled:v>=i.totalPages||g,className:"pagination-next","data-test":"session-sidebar-pagination-next-button",children:["Next",e.jsx(Be,{className:"h-4 w-4 ml-1"})]})]})]})]})]})}})}export{Je as S};
