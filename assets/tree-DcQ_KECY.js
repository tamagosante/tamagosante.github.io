import{j as e,r as p}from"./react-vendor-Byz07MLO.js";import{V as x,P as d,$ as N,Q as y}from"./index-DPqC4dt9.js";import{g as w,O}from"./icons-Ce2OFwrV.js";import"./utils-CsrmMPoT.js";import"./radix-ui-CdiC0DQF.js";import"./ui-utils-BxIQ3qGg.js";function b({node:r,onItemClick:s,level:o=0,defaultExpandedIds:t,selectedId:m,renderLeaf:n}){var u;const[i,f]=p.useState((t==null?void 0:t.has(r.id))??!1),j=r.children&&r.children.length>0,a=m===r.id,c=p.useRef(null);p.useEffect(()=>{a&&c.current&&c.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[a]);const v=l=>{l.stopPropagation(),j&&f(!i)},g=l=>{l.stopPropagation(),s==null||s(r)},h={paddingLeft:`${o*1.5}rem`};return j?e.jsxs(d,{open:i,onOpenChange:f,children:[e.jsxs("div",{ref:c,className:x("tree-item-parent flex items-center py-2 px-3 rounded-sm transition-colors",a&&"bg-primary/10 border border-primary"),style:h,children:[e.jsx(N,{asChild:!0,children:e.jsx("div",{className:"tree-item-chevron w-4 h-4 mr-2 flex-shrink-0 cursor-pointer hover:bg-accent rounded",onClick:v,"data-test":"tree-item-toggle",children:i?e.jsx(w,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex items-center flex-1 cursor-pointer hover:text-accent-foreground",onClick:g,"data-test":"tree-item-label",children:[r.icon&&e.jsx("div",{className:"tree-item-custom-icon mr-2 flex-shrink-0",children:r.icon}),e.jsx("span",{className:"tree-item-label flex-1",children:r.label})]})]}),e.jsx(y,{children:e.jsx("div",{className:"tree-item-children",children:(u=r.children)==null?void 0:u.map(l=>e.jsx(b,{node:l,onItemClick:s,level:o+1,defaultExpandedIds:t,selectedId:m,renderLeaf:n},l.id))})})]}):n?e.jsx("div",{ref:c,style:h,children:n(r,a,()=>s==null?void 0:s(r))}):e.jsxs("div",{ref:c,className:x("tree-item-leaf flex items-center py-2 px-3 hover:bg-accent hover:text-accent-foreground cursor-pointer rounded-sm transition-colors",a&&"bg-primary/10 border border-primary"),style:h,onClick:g,children:[e.jsx("div",{className:"tree-item-icon w-4 h-4 mr-2 flex-shrink-0"}),r.icon&&e.jsx("div",{className:"tree-item-custom-icon mr-2 flex-shrink-0",children:r.icon}),e.jsx("span",{className:"tree-item-label flex-1",children:r.label})]})}function $({data:r,onItemClick:s,className:o,defaultExpandedIds:t,selectedId:m,renderLeaf:n}){return e.jsx("div",{className:x("tree-root",o),children:r.map(i=>e.jsx(b,{node:i,onItemClick:s,defaultExpandedIds:t,selectedId:m,renderLeaf:n},i.id))})}export{$ as Tree,b as TreeItem};
