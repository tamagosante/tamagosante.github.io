import{r as y,j as e,d as ce}from"./react-vendor-Byz07MLO.js";import{H as $,aW as Z,s as V,I as F,a as T,ar as me,as as he,at as xe,aq as ue,T as fe,m as pe,n as X,o as Y,L as f,a7 as _,l as J,S as W,h as G,i as H,j as K,k as P,g as ge,C as ve,b as je,c as Ne,aX as be,e as ye,aj as we,aY as Ce}from"./index-hTFRJyrx.js";import{s as Q,t as ee,v as Se}from"./radix-ui-9f16WUVy.js";import{W as Me,K as ke,a3 as Fe,X as Te,b0 as De,l as Ae,G as ze,b1 as Le,g as Oe,V as Ee,O as Ie}from"./icons-yhbeTEay.js";import{Tree as Be}from"./tree-CNsSXVP0.js";const se=y.forwardRef(({className:o,...p},v)=>e.jsx(Q,{className:$("grid gap-2",o),...p,ref:v}));se.displayName=Q.displayName;const U=y.forwardRef(({className:o,...p},v)=>e.jsx(ee,{ref:v,className:$("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",o),...p,children:e.jsx(Se,{className:"flex items-center justify-center",children:e.jsx(Me,{className:"h-3.5 w-3.5 fill-primary"})})}));U.displayName=ee.displayName;function Re({sessions:o,onSessionSelect:p,selectedSessionId:v,formatDate:C,formatCwd:z,pathPrefix:S="",segmentsToStrip:d=0}){const{treeData:j,expandedIds:D}=y.useMemo(()=>{const r={sessions:[],children:new Map},w=S.trim()?S.trim().replace(/\/$/,""):"";o.forEach(h=>{if(!h.cwd)return;let b=h.cwd;w&&h.cwd.startsWith(w)&&(b=h.cwd.substring(w.length));let a=b.split("/").filter(Boolean);if(d>0&&a.length>d&&(a=a.slice(d)),a.length===0){r.sessions.push(h);return}let i=r;a.forEach((u,k)=>{i.children.has(u)||i.children.set(u,{path:a.slice(0,k+1).join("/"),sessions:[],children:new Map}),i=i.children.get(u)}),i.sessions.push(h)});const x=(h,b="")=>{const a=[];return Array.from(h.children.entries()).sort(([i],[u])=>i.localeCompare(u)).forEach(([i,u])=>{const k=b?`${b}/${i}`:i,B=x(u,k),R={id:`dir-${k}`,label:i,icon:e.jsx(ke,{className:"h-4 w-4 text-blue-500"}),children:B};a.push(R)}),h.sessions.sort((i,u)=>new Date(u.lastModified).getTime()-new Date(i.lastModified).getTime()).forEach(i=>{a.push({id:i.id,label:i.name,data:i})}),a},M=x(r),E=new Set;if(v){const h=o.find(b=>b.id===v);if(h!=null&&h.cwd){let b=h.cwd;const a=S.trim()?S.trim().replace(/\/$/,""):"";a&&h.cwd.startsWith(a)&&(b=h.cwd.substring(a.length));let i=b.split("/").filter(Boolean);d>0&&i.length>d&&(i=i.slice(d));for(let u=0;u<i.length;u++){const k=i.slice(0,u+1).join("/");E.add(`dir-${k}`)}}}return{treeData:M,expandedIds:E}},[o,S,d,v]),N=(r,w,x)=>{const M=r.data;return M?e.jsx(Z,{session:M,isSelected:w,onClick:x,formatDate:C,formatCwd:z}):null},L=r=>{r.id.startsWith("dir-")||p(r.id)};return e.jsx("div",{className:"directory-tree-container space-y-2","data-test":"directory-tree-container",children:e.jsx(Be,{data:j,onItemClick:L,className:"directory-tree",defaultExpandedIds:D,selectedId:v,renderLeaf:N,"data-test":"directory-tree"})})}function Pe({sessions:o,onSessionSelect:p,selectedSessionId:v,formatDate:C,formatCwd:z,segmentsToStrip:S=3,onNameUpdated:d}){return e.jsx("div",{"data-test":"session-list-view",className:"session-items space-y-2",children:o.map(j=>e.jsx(Z,{session:j,isSelected:v===j.id,onClick:()=>p(j.id),formatDate:C,formatCwd:z,segmentsToStrip:S,onNameUpdated:d},j.id))})}const $e=[{value:"id",label:"Session ID"},{value:"name",label:"Session Name"},{value:"cwd",label:"Working Directory"},{value:"firstMessage",label:"First Message"}],q=[{value:"user",label:"User Messages",description:"Pure user messages (no tool content)"},{value:"assistant",label:"Assistant Responses",description:"Pure assistant responses (no thinking/tool blocks)"},{value:"thinking",label:"Thinking Blocks",description:"Messages containing thinking blocks"},{value:"tools",label:"Tool Calls/Results",description:"Messages containing tool_use or tool_result blocks"}],Ve=[{value:"lastModified",label:"Last Modified"},{value:"name",label:"Name"},{value:"messageCount",label:"Message Count"}],_e={fields:["name"],sortBy:"lastModified",sortOrder:"desc",pageSize:11},We={messageType:[],sortOrder:"desc",pageSize:50},ae=y.forwardRef(({searchQuery:o,onSearchChange:p,onAdvancedSearch:v,onMessageSearch:C,className:z},S)=>{var m,n,c;const d=(c=(n=(m=V.getState().app)==null?void 0:m.claude)==null?void 0:n.ui)==null?void 0:c.advancedSearch,[j,D]=y.useState(!1),[N,L]=y.useState((d==null?void 0:d.activeTab)??"sessions"),[r,w]=y.useState({..._e,...d==null?void 0:d.sessionFilters}),[x,M]=y.useState({...We,...d==null?void 0:d.messageFilters});y.useEffect(()=>{var t,l,g;const s=V.getState();V.updateState({app:{...s.app,claude:{...(t=s.app)==null?void 0:t.claude,ui:{...(g=(l=s.app)==null?void 0:l.claude)==null?void 0:g.ui,advancedSearch:{activeTab:N,sessionFilters:r,messageFilters:x}}}}})},[N,r,x]);const E=y.useMemo(()=>{const{fields:s,messageTypes:t,sortBy:l,sortOrder:g,pageSize:A,...O}=r,te=s&&(s.length!==1||s[0]!=="name"),ie=t&&t.length>0,ne=Object.values(O).some(de=>de!==void 0),le=te||ie||ne||(l!=="lastModified"||g!=="desc"),re=x.messageType&&x.messageType.length>0,oe=x.after||x.before;return le||(re||oe)},[r,x]),h=(s,t)=>{w(l=>{const g=l.fields||[],A=t?[...g,s]:g.filter(O=>O!==s);return{...l,fields:A.length>0?A:void 0}})},b=(s,t)=>{M(l=>{const g=l.messageType||[],A=t?[...g,s]:g.filter(O=>O!==s);return{...l,messageType:A.length>0?A:void 0}})},a=(s,t)=>{w(l=>{const g=l.messageTypes||[],A=t?[...g,s]:g.filter(O=>O!==s);return{...l,messageTypes:A.length>0?A:void 0}})},i=(s,t)=>{w(l=>({...l,[s]:t}))},u=(s,t)=>{M(l=>({...l,[s]:t}))},k=()=>{N==="sessions"&&v?v(o,r):N==="messages"&&C&&C(o,x),D(!1)},B=()=>{N==="sessions"?w({fields:["name"],sortBy:"lastModified",sortOrder:"desc",pageSize:11}):M({messageType:[],sortOrder:"desc",pageSize:50})},R=s=>{s.key==="Enter"&&(N==="sessions"&&v?v(o,r):N==="messages"&&C&&C(o,x))},I=()=>{p("")};return e.jsx("div",{ref:S,className:$("sessions-search-container relative",z),"data-test":"sessions-search-container",children:e.jsxs("div",{className:"search-input-wrapper relative flex items-center gap-1","data-test":"sessions-search-input-wrapper",children:[e.jsx(Fe,{className:"search-icon absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none z-10","data-test":"sessions-search-icon"}),e.jsx(F,{type:"text",placeholder:N==="sessions"?"Search sessions...":"Search messages...",value:o,onChange:s=>p(s.target.value),onKeyDown:R,className:$("search-input pl-9",o?"pr-16":"pr-10"),"data-test":"sessions-search-input"}),o&&e.jsx(T,{variant:"ghost",size:"icon",onClick:I,className:"clear-button absolute right-9 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0 hover:bg-muted","aria-label":"Clear search","data-test":"sessions-search-clear-button",children:e.jsx(Te,{className:"h-4 w-4"})}),E&&e.jsx("div",{className:$("filter-indicator absolute top-1/2 -translate-y-1/2 h-2 w-2 rounded-full bg-primary pointer-events-none z-10",o?"right-17":"right-11"),"data-test":"sessions-search-filter-indicator"}),e.jsxs(me,{open:j,onOpenChange:D,children:[e.jsx(he,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:"expand-button absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 shrink-0","aria-label":j?"Collapse advanced search":"Expand advanced search","data-test":"sessions-search-expand-button",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(xe,{align:"start",side:"bottom",avoidCollisions:!0,className:"advanced-search-panel w-96 max-h-[70vh] overflow-y-auto",style:{zIndex:ue.draggablePopoverDropdown},"data-test":"sessions-advanced-search-panel",children:[e.jsx("div",{className:"panel-header space-y-2 pb-3 border-b","data-test":"sessions-panel-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Advanced Search"}),e.jsx(T,{variant:"ghost",size:"sm",onClick:B,className:"h-7 text-xs","data-test":"sessions-clear-filters-button",children:"Clear All"})]})}),e.jsxs(fe,{value:N,onValueChange:s=>L(s),className:"mt-3",children:[e.jsxs(pe,{className:"grid w-full grid-cols-2","data-test":"sessions-search-tabs",children:[e.jsx(X,{value:"sessions","data-test":"sessions-tab-sessions",children:"Sessions"}),e.jsx(X,{value:"messages","data-test":"sessions-tab-messages",children:"Messages"})]}),e.jsxs(Y,{value:"sessions",className:"space-y-4 mt-4","data-test":"sessions-tab-content-sessions",children:[e.jsxs("div",{className:"field-selection space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Search Fields"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Select fields to search (OR logic across fields)"}),e.jsx("div",{className:"fields-grid space-y-2",children:$e.map(s=>{var t;return e.jsxs("div",{className:"field-item flex items-center space-x-2",children:[e.jsx(_,{id:`field-${s.value}`,checked:(t=r.fields)==null?void 0:t.includes(s.value),onCheckedChange:l=>h(s.value,l===!0)}),e.jsx("label",{htmlFor:`field-${s.value}`,className:"text-sm cursor-pointer",children:s.label})]},s.value)})})]}),e.jsxs("div",{className:"message-types-selection space-y-2","data-test":"sessions-tab-message-types-section",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Types"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Filter by message type when searching in message content"}),e.jsx("div",{className:"message-types-grid space-y-2",children:q.map(s=>{var t;return e.jsxs("div",{className:"message-type-item flex items-center space-x-2",children:[e.jsx(_,{id:`session-msgtype-${s.value}`,checked:(t=r.messageTypes)==null?void 0:t.includes(s.value),onCheckedChange:l=>a(s.value,l===!0),"data-test":`sessions-tab-msgtype-${s.value}`}),e.jsxs("label",{htmlFor:`session-msgtype-${s.value}`,className:"text-sm cursor-pointer flex-1",children:[e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground block",children:s.description})]})]},s.value)})})]}),e.jsxs("div",{className:"active-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Sessions Only"}),e.jsx(J,{checked:r.isActive??!1,onCheckedChange:s=>i("isActive",s?!0:void 0)})]})]}),e.jsxs("div",{className:"message-count-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{type:"number",placeholder:"Min",min:"0",value:r.minMessages??"",onChange:s=>i("minMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),e.jsx(F,{type:"number",placeholder:"Max",min:"0",value:r.maxMessages??"",onChange:s=>i("maxMessages",s.target.value?parseInt(s.target.value):void 0),className:"h-8"})]})]}),e.jsxs("div",{className:"date-range-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Modified Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"session-date-after",className:"text-xs text-muted-foreground",children:"After"}),e.jsx(F,{id:"session-date-after",type:"datetime-local",value:r.modifiedAfter??"",onChange:s=>i("modifiedAfter",s.target.value||void 0),className:"h-8"})]}),e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"session-date-before",className:"text-xs text-muted-foreground",children:"Before"}),e.jsx(F,{id:"session-date-before",type:"datetime-local",value:r.modifiedBefore??"",onChange:s=>i("modifiedBefore",s.target.value||void 0),className:"h-8"})]})]})]}),e.jsxs("div",{className:"sorting-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Sort By"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{value:r.sortBy,onValueChange:s=>i("sortBy",s),children:[e.jsx(G,{className:"h-8 flex-1",children:e.jsx(H,{})}),e.jsx(K,{children:Ve.map(s=>e.jsx(P,{value:s.value,children:s.label},s.value))})]}),e.jsxs(W,{value:r.sortOrder,onValueChange:s=>i("sortOrder",s),children:[e.jsx(G,{className:"h-8 w-32",children:e.jsx(H,{})}),e.jsxs(K,{children:[e.jsx(P,{value:"desc",children:"Descending"}),e.jsx(P,{value:"asc",children:"Ascending"})]})]})]})]}),e.jsxs("div",{className:"pagination-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Results Per Page"}),e.jsx(F,{type:"number",min:"1",max:"100",value:r.pageSize??11,onChange:s=>i("pageSize",s.target.value?parseInt(s.target.value):11),className:"h-8"})]})]}),e.jsxs(Y,{value:"messages",className:"space-y-4 mt-4","data-test":"sessions-tab-content-messages",children:[e.jsxs("div",{className:"message-types-selection space-y-2","data-test":"sessions-message-types-section",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Types"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Filter by message type (searches across all sessions)"}),e.jsx("div",{className:"message-types-grid space-y-2",children:q.map(s=>{var t;return e.jsxs("div",{className:"message-type-item flex items-center space-x-2",children:[e.jsx(_,{id:`msgtype-${s.value}`,checked:(t=x.messageType)==null?void 0:t.includes(s.value),onCheckedChange:l=>b(s.value,l===!0),"data-test":`sessions-msgtype-${s.value}`}),e.jsxs("label",{htmlFor:`msgtype-${s.value}`,className:"text-sm cursor-pointer flex-1",children:[e.jsx("span",{children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground block",children:s.description})]})]},s.value)})})]}),e.jsxs("div",{className:"date-range-filter space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Message Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"msg-date-after",className:"text-xs text-muted-foreground",children:"After"}),e.jsx(F,{id:"msg-date-after",type:"datetime-local",value:x.after??"",onChange:s=>u("after",s.target.value||void 0),className:"h-8"})]}),e.jsxs("div",{className:"date-input-wrapper",children:[e.jsx(f,{htmlFor:"msg-date-before",className:"text-xs text-muted-foreground",children:"Before"}),e.jsx(F,{id:"msg-date-before",type:"datetime-local",value:x.before??"",onChange:s=>u("before",s.target.value||void 0),className:"h-8"})]})]})]}),e.jsxs("div",{className:"sorting-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Sort Order"}),e.jsxs(W,{value:x.sortOrder,onValueChange:s=>u("sortOrder",s),children:[e.jsx(G,{className:"h-8",children:e.jsx(H,{})}),e.jsxs(K,{children:[e.jsx(P,{value:"desc",children:"Newest First"}),e.jsx(P,{value:"asc",children:"Oldest First"})]})]})]}),e.jsxs("div",{className:"pagination-section space-y-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Results Per Page"}),e.jsx(F,{type:"number",min:"1",max:"100",value:x.pageSize??50,onChange:s=>u("pageSize",s.target.value?parseInt(s.target.value):50),className:"h-8"})]})]})]}),e.jsxs("div",{className:"panel-footer flex items-center gap-2 pt-3 mt-4 border-t","data-test":"sessions-panel-footer",children:[e.jsx(T,{onClick:k,className:"flex-1",size:"sm","data-test":"sessions-apply-search-button",children:N==="sessions"?"Search Sessions":"Search Messages"}),e.jsx(T,{onClick:()=>D(!1),variant:"outline",size:"sm","data-test":"sessions-cancel-button",children:"Cancel"})]})]})]})]})})});ae.displayName="SessionsSearch";function Ze({sessions:o,loading:p,error:v,onSessionSelect:C,selectedSessionId:z,onRefresh:S,pagination:d,currentPage:j=1,onPageChange:D,onLoadMore:N,onSearch:L,onMessageSearch:r,onNameUpdated:w,excludeAgents:x=!1,onToggleExcludeAgents:M}){const E=ce(),[h,b]=y.useState(""),[a,i]=y.useState(null),u=m=>{const n=new Date(m);return n.toLocaleDateString()+" "+n.toLocaleTimeString()},k=m=>m?m.replace(/^\/home\/[^/]+\//,"~/"):"",B=(m,n)=>{console.log("Advanced search triggered:",{query:m,filters:n}),i(n),L&&L(m,n)},R=(m,n)=>{console.log("Message search triggered:",{query:m,filters:n}),r&&r(m,n)},I=y.useMemo(()=>{if(L||!h.trim())return o;const m=h.toLowerCase();let n=o;if(a!=null&&a.fields&&a.fields.length>0?n=o.filter(c=>a.fields.some(s=>{var t,l;switch(s){case"id":return c.id.toLowerCase().includes(m);case"name":return c.name.toLowerCase().includes(m);case"cwd":return(t=c.cwd)==null?void 0:t.toLowerCase().includes(m);case"firstMessage":return(l=c.firstMessage)==null?void 0:l.toLowerCase().includes(m);default:return!1}})):n=o.filter(c=>c.name.toLowerCase().includes(m)||c.id.toLowerCase().includes(m)),a){if(a.isActive!==void 0&&(n=n.filter(c=>c.isActive===a.isActive)),a.minMessages!==void 0&&(n=n.filter(c=>c.messageCount>=a.minMessages)),a.maxMessages!==void 0&&(n=n.filter(c=>c.messageCount<=a.maxMessages)),a.modifiedAfter!==void 0){const c=new Date(a.modifiedAfter);n=n.filter(s=>new Date(s.lastModified)>=c)}if(a.modifiedBefore!==void 0){const c=new Date(a.modifiedBefore);n=n.filter(s=>new Date(s.lastModified)<=c)}a.sortBy&&(n=[...n].sort((c,s)=>{let t=0;switch(a.sortBy){case"name":t=c.name.localeCompare(s.name);break;case"messageCount":t=c.messageCount-s.messageCount;break;case"lastModified":default:t=new Date(c.lastModified).getTime()-new Date(s.lastModified).getTime();break}return a.sortOrder==="asc"?t:-t}))}return n},[o,h,a,L]);return e.jsx(ge,{storageKey:"session-sidebar-config",initialConfig:{viewMode:"list",pathPrefix:"",segmentsToStrip:3},children:(m,n,c)=>{const{viewMode:s,pathPrefix:t,segmentsToStrip:l}=m;return e.jsxs(ve,{className:"session-list-card h-full flex flex-col overflow-hidden","data-test":"session-sidebar-card",children:[e.jsxs(je,{className:"session-list-header flex flex-col space-y-3 pb-4 flex-shrink-0","data-test":"session-sidebar-header",children:[e.jsxs("div",{className:"header-top flex flex-row items-center justify-between","data-test":"session-sidebar-header-top",children:[e.jsx(Ne,{className:"text-xl",children:"Claude Sessions"}),e.jsxs("div",{className:"header-actions flex items-center gap-1","data-test":"session-sidebar-header-actions",children:[e.jsx(T,{variant:"ghost",size:"icon",onClick:S,disabled:p,className:"refresh-button","data-test":"session-sidebar-refresh-button",children:e.jsx(Ae,{className:`h-4 w-4 ${p?"animate-spin":""}`})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>E("/claude/forks"),disabled:p,title:"View Forks","data-test":"session-sidebar-forks-button",children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsx(be,{disabled:p}),e.jsx(c,{icon:e.jsx(Le,{className:"h-4 w-4"}),title:"View Options",variant:"ghost",size:"icon",contentClassName:"w-64",children:e.jsxs("div",{className:"view-options-content space-y-4",children:[M&&e.jsxs("div",{className:"exclude-agents-filter flex items-center justify-between","data-test":"session-sidebar-exclude-agents",children:[e.jsx(f,{htmlFor:"exclude-agents",className:"text-sm font-medium cursor-pointer",children:"Hide agent sessions"}),e.jsx(J,{id:"exclude-agents",checked:x,onCheckedChange:M,"data-test":"session-sidebar-exclude-agents-switch"})]}),e.jsxs("div",{className:"view-mode-selector space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Display Mode"}),e.jsxs(se,{value:s,onValueChange:g=>n({...m,viewMode:g}),children:[e.jsxs("div",{className:"view-option flex items-center space-x-2",children:[e.jsx(U,{value:"list",id:"view-list"}),e.jsx(f,{htmlFor:"view-list",className:"cursor-pointer",children:"List"})]}),e.jsxs("div",{className:"view-option flex items-center space-x-2",children:[e.jsx(U,{value:"tree",id:"view-tree"}),e.jsx(f,{htmlFor:"view-tree",className:"cursor-pointer",children:"Tree"})]})]})]}),e.jsxs("div",{className:"segments-to-strip-filter space-y-2",children:[e.jsx(f,{htmlFor:"segments-to-strip",className:"text-sm font-medium",children:"Segments to Strip"}),e.jsx(F,{id:"segments-to-strip",type:"number",min:"0",max:"10",value:l,onChange:g=>n({...m,segmentsToStrip:Number(g.target.value)}),className:"segments-to-strip-input"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strips first N path segments from session names"})]}),s==="tree"&&e.jsxs("div",{className:"path-prefix-filter space-y-2",children:[e.jsx(f,{htmlFor:"path-prefix",className:"text-sm font-medium",children:"Path Prefix (to strip)"}),e.jsx(F,{id:"path-prefix",type:"text",placeholder:"/home/user/path",value:t,onChange:g=>n({...m,pathPrefix:g.target.value}),className:"path-prefix-input"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strips this prefix from tree paths"})]})]})})]})]}),e.jsx(ae,{searchQuery:h,onSearchChange:b,onAdvancedSearch:B,onMessageSearch:R})]}),e.jsxs(ye,{className:"session-list-content flex-1 min-h-0 p-0 overflow-hidden flex flex-col","data-test":"session-sidebar-content",children:[e.jsx("div",{className:"sessions-container flex-1 overflow-hidden","data-test":"session-sidebar-sessions-container",children:e.jsxs(we,{className:"session-scroll-area h-full w-full","data-test":"session-sidebar-scroll-area",children:[e.jsxs("div",{className:"space-y-2","data-test":"session-sidebar-sessions-list",children:[v&&e.jsx("div",{className:"error-message text-sm text-red-500 mb-2","data-test":"session-sidebar-error-message",children:v}),p&&I.length===0?e.jsx("div",{className:"loading-message text-sm text-muted-foreground","data-test":"session-sidebar-loading-message",children:"Loading sessions..."}):I.length===0?e.jsx("div",{className:"empty-state text-sm text-muted-foreground","data-test":"session-sidebar-empty-state",children:h?"No sessions match your search":"No sessions found"}):s==="tree"?e.jsx(Re,{sessions:I,onSessionSelect:C,selectedSessionId:z,formatDate:u,formatCwd:k,pathPrefix:t,segmentsToStrip:l}):e.jsx(Pe,{sessions:I,onSessionSelect:C,selectedSessionId:z,formatDate:u,formatCwd:k,segmentsToStrip:l,onNameUpdated:w})]}),e.jsx(Ce,{orientation:"horizontal"})]})}),d&&e.jsxs("div",{className:"pagination-controls flex flex-col gap-2 px-4 py-2 border-t flex-shrink-0","data-test":"session-sidebar-pagination-controls",children:[N&&j<d.totalPages&&e.jsxs(T,{variant:"outline",size:"sm",onClick:N,disabled:p,className:"load-more-button w-full","data-test":"session-sidebar-load-more-button",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Load More Sessions",e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",o.length," of ",d.totalCount,")"]})]}),D&&e.jsxs("div",{className:"pagination-nav flex items-center justify-between gap-2","data-test":"session-sidebar-pagination-nav",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>D(j-1),disabled:j===1||p,className:"pagination-prev","data-test":"session-sidebar-pagination-prev-button",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"Prev"]}),e.jsxs("div",{className:"pagination-info text-xs text-muted-foreground","data-test":"session-sidebar-pagination-info",children:["Page ",d.page," of ",d.totalPages]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>D(j+1),disabled:j>=d.totalPages||p,className:"pagination-next","data-test":"session-sidebar-pagination-next-button",children:["Next",e.jsx(Ie,{className:"h-4 w-4 ml-1"})]})]})]})]})]})}})}export{se as R,Ze as S,U as a};
