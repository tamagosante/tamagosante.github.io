import{r as a,j as e}from"./react-vendor-Byz07MLO.js";import{B as A}from"./Breadcrumbs-D-EeNrHD.js";import{y as d,C as m,a as u,S as D,h as V,i as B,j as L,k as K,aj as q}from"./index-BEUYSeX_.js";import{t as n,T as G}from"./TTSApiClient-BmPFlMLN.js";import{d as $,ad as O,aa as H,D as M}from"./icons-Detj0uxE.js";import"./radix-ui-B6r6BEmy.js";import"./utils-DjFvUtuq.js";import"./ui-utils-BxIQ3qGg.js";const v=[1,1.25,1.5,1.75,2,3,4];function le({logger:h}){const[o,w]=a.useState("Hello! This is a text to speech demo. Click the button to generate audio."),[p,j]=a.useState(!1),[S,f]=a.useState(!1),[c,k]=a.useState(null),[g,x]=a.useState(null),[U,R]=a.useState([]),[P,W]=a.useState("vits"),[_,J]=a.useState(!0),[i,y]=a.useState(()=>{var s,l;return((l=(s=d.get("app"))==null?void 0:s.tts)==null?void 0:l.demoPlaybackSpeed)??1}),[b,T]=a.useState(()=>{var s,l;const t=(l=(s=d.get("app"))==null?void 0:s.tts)==null?void 0:l.demoFavoriteSpeedIds;return t?new Set(t):new Set([1,2])}),C=[{label:"Home",href:"/"},{label:"Demo",href:"/demo"},{label:"Text-to-Speech"}],z=t=>{const s=new Set(b);s.has(t)?s.delete(t):s.add(t),T(s),d.update("app",{tts:{demoFavoriteSpeedIds:Array.from(s)}})};a.useEffect(()=>{d.update("app",{tts:{demoPlaybackSpeed:i}})},[i]);const N=async()=>{var t,s;if(!o.trim()){x("Please enter some text");return}j(!0),x(null);try{const l=((s=(t=d.get("app"))==null?void 0:t.tts)==null?void 0:s.language)??"en",r=await n.synthesize({text:o.trim(),voice:P,language:l});r.success&&r.audioBlob?(k(r.audioBlob),f(!0),n.playAudio(r.audioBlob,()=>{f(!1)},i)):x(r.error||"Failed to synthesize audio")}catch(l){const r=l instanceof Error?l.message:"Unknown error";x(r),h==null||h.error(`TTS synthesis failed: ${r}`,"TTSDemoPage")}finally{j(!1)}},F=()=>{n.stopAudio(),f(!1)},E=()=>{if(c){const t=new Date().toISOString().slice(0,19).replace(/:/g,"-");n.downloadAudio(c,`tts-${t}.wav`)}},I=t=>{t.key==="Enter"&&(t.ctrlKey||t.metaKey)&&N()};return e.jsxs("div",{className:"tts-demo-page flex-1 flex flex-col h-full","data-test":"tts-demo-page",children:[e.jsx("div",{className:"page-header pb-0 flex-shrink-0",children:e.jsx("div",{className:"breadcrumb-section mb-4",children:e.jsx(A,{items:C})})}),e.jsx("div",{className:"page-content flex-1 p-6 overflow-y-auto min-h-0",children:e.jsx("div",{className:"flex gap-6 h-full min-h-0","data-test":"tts-content",children:e.jsxs("div",{className:"w-full flex flex-col gap-6 overflow-y-auto","data-test":"tts-right-column",children:[e.jsxs(m,{className:"p-4 flex-shrink-0 space-y-3",children:[e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(u,{onClick:N,disabled:p||!o.trim(),variant:"default",size:"lg","data-test":"tts-synthesize-btn",children:p?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Synthesize"]})}),S&&e.jsxs(u,{onClick:F,variant:"destructive",size:"lg","data-test":"tts-stop-btn",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Stop"]}),c&&e.jsxs(u,{onClick:E,variant:"outline",size:"lg",disabled:p,"data-test":"tts-download-btn",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Download"]})]}),e.jsxs("div",{className:"space-y-2","data-test":"speed-control",children:[e.jsxs("label",{className:"text-sm font-medium block",children:["Playback Speed: ",e.jsxs("span",{className:"text-blue-600 font-bold",children:[i,"x"]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:v.filter(t=>b.has(t)).map(t=>e.jsxs(u,{onClick:()=>{y(t),n.isPlaying()&&n.updatePlaybackSpeed(t)},variant:i===t?"default":"outline",size:"sm","data-test":`speed-quick-btn-${t}`,className:"min-w-fit",children:[t,"x"]},t))}),e.jsxs(D,{value:String(i),onValueChange:t=>{const s=parseFloat(t);y(s),n.isPlaying()&&n.updatePlaybackSpeed(s)},children:[e.jsx(V,{className:"w-full","data-test":"playback-speed-select",children:e.jsx(B,{placeholder:"Select speed"})}),e.jsx(L,{children:v.map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{value:String(t),className:"flex-1",children:[t,"x ",t===1?"(Normal)":t>=2&&t<=1.75?"(Fast)":t===3?"(Very Fast)":t===4?"(Ultra Fast)":""]}),e.jsx("div",{className:"pointer-events-auto pr-2 cursor-pointer",onPointerDown:s=>{s.stopPropagation(),s.preventDefault(),z(t)},children:e.jsx(q,{checked:b.has(t),"data-test":`speed-checkbox-${t}`})})]},t))})]})]}),e.jsxs("div",{className:"flex items-center gap-2","data-test":"language-control",children:[e.jsx("label",{className:"text-sm font-medium",children:"Language:"}),e.jsx(G,{})]})]}),e.jsxs(m,{className:"p-6 flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Input Text"}),e.jsx("textarea",{value:o,onChange:t=>w(t.target.value),onKeyPress:I,placeholder:"Enter text to synthesize...",className:"flex-1 p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none","data-test":"tts-text-input"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:[o.length," characters â€¢ Tip: Press Ctrl+Enter to synthesize"]})]}),g&&e.jsxs(m,{className:"p-6 border-red-200 bg-red-50 flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700","data-test":"tts-error-message",children:g})]}),c&&!g&&e.jsxs(m,{className:"p-6 border-green-200 bg-green-50 flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Success"}),e.jsxs("p",{className:"text-green-700","data-test":"tts-success-message",children:["Audio generated successfully (",(c.size/1024).toFixed(2)," KB)"]}),S&&e.jsx("p",{className:"text-green-600 text-sm mt-2",children:"ðŸ”Š Currently playing..."})]}),e.jsxs(m,{className:"p-6 bg-blue-50 border-blue-200 flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"About"}),e.jsxs("ul",{className:"text-blue-700 text-sm space-y-2",children:[e.jsx("li",{children:"â€¢ Multiple TTS models with different quality/speed tradeoffs"}),e.jsx("li",{children:"â€¢ VITS: Excellent quality, medium speed (default)"}),e.jsx("li",{children:"â€¢ Fast Pitch: Natural & expressive, faster than VITS"}),e.jsx("li",{children:"â€¢ Glow TTS: Good quality, very fast"}),e.jsx("li",{children:"â€¢ Keyboard shortcut: Ctrl+Enter to synthesize"}),e.jsx("li",{children:"â€¢ Generated audio format: WAV"})]})]})]})})})]})}export{le as TTSDemoPage};
