import{r as c,j as e}from"./react-vendor-Byz07MLO.js";import{u as y,a as m,b as j}from"./react-hooks-CNdHs55p.js";import{B as ae}from"./Breadcrumbs-KCfVAlqp.js";import"./DragDropManager-CacIWg_Z.js";import"./radix-ui-B6r6BEmy.js";import"./index-CJ-Awmlc.js";import"./utils-DjFvUtuq.js";import"./ui-utils-BxIQ3qGg.js";import"./icons-Detj0uxE.js";function ge({logger:u}){const E=[{label:"Home",href:"/"},{label:"Demo",href:"/demo"},{label:"Drag and Drop"}],[x,$]=c.useState([{id:"1",title:"Design homepage",status:"todo"},{id:"2",title:"Implement auth",status:"todo"},{id:"3",title:"Write tests",status:"in-progress"},{id:"4",title:"Deploy to prod",status:"done"}]),[D,F]=c.useState([{id:"v1",text:"First item"},{id:"v2",text:"Second item"},{id:"v3",text:"Third item"},{id:"v4",text:"Fourth item"}]),[k,H]=c.useState([{id:"h1",text:"A"},{id:"h2",text:"B"},{id:"h3",text:"C"},{id:"h4",text:"D"}]),[I,S]=c.useState(null),[a,Z]=c.useState(null),[g,R]=c.useState(null),[M,T]=c.useState(null),[A,B]=c.useState(null),[C,P]=c.useState(!1),V=c.useMemo(()=>({onDragStart:s=>{var t;const n=(t=s.item.data)==null?void 0:t.taskId;S(n),u==null||u.log("Drag started:",n)},onDragMove:s=>{var t;const n=((t=s.dropZone)==null?void 0:t.id)||null;Z(n),R(s.sortIndex)},onDrop:s=>{var i,d;const n=(i=s.item.data)==null?void 0:i.taskId,t=(d=s.dropZone.data)==null?void 0:d.status;let o=s.sortIndex??0;n&&t&&($(h=>{const r=h.find(l=>l.id===n),v=h.filter(l=>l.status===t),w=h.filter(l=>l.id!==n);if((r==null?void 0:r.status)===t){const l=v.findIndex(re=>re.id===n);l!==-1&&l<o&&(o=o-1)}let z=0;for(const l of w){if(l.status===t)break;z++}if(z+=o,r){const l={...r,status:t};w.splice(z,0,l)}return w}),u==null||u.log(`Task ${n} moved to ${t}`))},onDragEnd:()=>{S(null),Z(null),R(null)}}),[u]),{manager:p}=y({snap:{enabled:!1,threshold:10},sort:{enabled:!0,orientation:"vertical",threshold:.5},dragThreshold:5},V),K=c.useMemo(()=>({onDragMove:s=>{T(s.sortIndex)},onDrop:s=>{var o;const n=(o=s.item.data)==null?void 0:o.itemId,t=s.sortIndex;n!=null&&t!=null&&F(i=>{const d=[...i],h=d.findIndex(r=>r.id===n);if(h!==-1){const[r]=d.splice(h,1),v=h<t?t-1:t;d.splice(v,0,r)}return d})},onDragEnd:()=>{T(null)}}),[]),{manager:b}=y({sort:{enabled:!0,orientation:"vertical",threshold:.5},dragThreshold:5},K),L=c.useMemo(()=>({onDragMove:s=>{B(s.sortIndex)},onDrop:s=>{var o;const n=(o=s.item.data)==null?void 0:o.itemId,t=s.sortIndex;n!=null&&t!=null&&H(i=>{const d=[...i],h=d.findIndex(r=>r.id===n);if(h!==-1){const[r]=d.splice(h,1),v=h<t?t-1:t;d.splice(v,0,r)}return d})},onDragEnd:()=>{B(null)}}),[]),{manager:f}=y({sort:{enabled:!0,orientation:"horizontal",threshold:.5},snap:{enabled:C,threshold:20},dragThreshold:5},L),N={1:m(p,"1",{taskId:"1"}),2:m(p,"2",{taskId:"2"}),3:m(p,"3",{taskId:"3"}),4:m(p,"4",{taskId:"4"})},U=j(p,"todo-zone",void 0,{status:"todo"}),W=j(p,"in-progress-zone",void 0,{status:"in-progress"}),q=j(p,"done-zone",void 0,{status:"done"}),G=m(b,"v1",{itemId:"v1",dropZoneId:"vertical-zone"}),J=m(b,"v2",{itemId:"v2",dropZoneId:"vertical-zone"}),O=m(b,"v3",{itemId:"v3",dropZoneId:"vertical-zone"}),Q=m(b,"v4",{itemId:"v4",dropZoneId:"vertical-zone"}),X=j(b,"vertical-zone"),Y={v1:G,v2:J,v3:O,v4:Q},_=m(f,"h1",{itemId:"h1",dropZoneId:"horizontal-zone"}),ee=m(f,"h2",{itemId:"h2",dropZoneId:"horizontal-zone"}),se=m(f,"h3",{itemId:"h3",dropZoneId:"horizontal-zone"}),ne=m(f,"h4",{itemId:"h4",dropZoneId:"horizontal-zone"}),te=j(f,"horizontal-zone"),oe={h1:_,h2:ee,h3:se,h4:ne};return e.jsxs("div",{className:"drag-and-drop-demo-page flex-1 flex flex-col h-full",children:[e.jsxs("div",{className:"page-header p-6 pb-0 flex-shrink-0",children:[e.jsx("div",{className:"breadcrumb-section mb-4",children:e.jsx(ae,{items:E})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Drag and Drop Library"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Framework-agnostic headless drag and drop with dropzones, sorting, and snapping"})]}),e.jsxs("div",{className:"page-content flex-1 p-6 overflow-y-auto min-h-0",children:[e.jsxs("div",{className:"demo-section mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Dropzones (Kanban Board)"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag tasks between different status columns"}),e.jsxs("div",{className:"kanban-board grid grid-cols-3 gap-4",children:[e.jsxs("div",{ref:U,className:`kanban-column bg-gray-100 rounded-lg p-4 min-h-[300px] ${a==="todo-zone"?"ring-2 ring-blue-500":""}`,children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-700",children:"To Do"}),e.jsxs("div",{className:"tasks-list space-y-2",children:[x.filter(s=>s.status==="todo").map((s,n,t)=>{const o=a==="todo-zone"&&g===n,i=a==="todo-zone"&&g===n+1&&n===t.length-1;return e.jsxs("div",{children:[o&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"}),e.jsx("div",{ref:N[s.id],className:`task-card bg-white p-3 rounded shadow cursor-move hover:shadow-md transition-shadow ${I===s.id?"opacity-50":""}`,children:s.title}),i&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"})]},s.id)}),a==="todo-zone"&&x.filter(s=>s.status==="todo").length===0&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"})]})]}),e.jsxs("div",{ref:W,className:`kanban-column bg-gray-100 rounded-lg p-4 min-h-[300px] ${a==="in-progress-zone"?"ring-2 ring-blue-500":""}`,children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-700",children:"In Progress"}),e.jsxs("div",{className:"tasks-list space-y-2",children:[x.filter(s=>s.status==="in-progress").map((s,n,t)=>{const o=a==="in-progress-zone"&&g===n,i=a==="in-progress-zone"&&g===n+1&&n===t.length-1;return e.jsxs("div",{children:[o&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"}),e.jsx("div",{ref:N[s.id],className:`task-card bg-white p-3 rounded shadow cursor-move hover:shadow-md transition-shadow ${I===s.id?"opacity-50":""}`,children:s.title}),i&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"})]},s.id)}),a==="in-progress-zone"&&x.filter(s=>s.status==="in-progress").length===0&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"})]})]}),e.jsxs("div",{ref:q,className:`kanban-column bg-gray-100 rounded-lg p-4 min-h-[300px] ${a==="done-zone"?"ring-2 ring-blue-500":""}`,children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-700",children:"Done"}),e.jsxs("div",{className:"tasks-list space-y-2",children:[x.filter(s=>s.status==="done").map((s,n,t)=>{const o=a==="done-zone"&&g===n,i=a==="done-zone"&&g===n+1&&n===t.length-1;return e.jsxs("div",{children:[o&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"}),e.jsx("div",{ref:N[s.id],className:`task-card bg-white p-3 rounded shadow cursor-move hover:shadow-md transition-shadow ${I===s.id?"opacity-50":""}`,children:s.title}),i&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"})]},s.id)}),a==="done-zone"&&x.filter(s=>s.status==="done").length===0&&e.jsx("div",{className:"insertion-indicator h-1 bg-blue-500 rounded-full my-2 animate-pulse"})]})]})]})]}),e.jsxs("div",{className:"demo-section mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Vertical Sorting"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag items up and down to reorder them"}),e.jsx("div",{ref:X,className:"vertical-sort-zone bg-gray-100 rounded-lg p-4 max-w-md",children:e.jsx("div",{className:"sortable-list space-y-2",children:D.map((s,n)=>{const t=M===n,o=M===n+1&&n===D.length-1;return e.jsxs("div",{children:[t&&e.jsx("div",{className:"insertion-indicator h-1 bg-green-500 rounded-full my-2 animate-pulse"}),e.jsx("div",{ref:Y[s.id],className:"sortable-item bg-white p-4 rounded shadow cursor-move hover:shadow-md transition-shadow",children:s.text}),o&&e.jsx("div",{className:"insertion-indicator h-1 bg-green-500 rounded-full my-2 animate-pulse"})]},s.id)})})})]}),e.jsxs("div",{className:"demo-section mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Horizontal Sorting with Snapping"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag items left and right to reorder them"}),e.jsx("div",{className:"snap-toggle mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:s=>P(s.target.checked),className:"w-4 h-4"}),e.jsx("span",{children:"Enable Snapping"})]})}),e.jsx("div",{ref:te,className:"horizontal-sort-zone bg-gray-100 rounded-lg p-4",children:e.jsx("div",{className:"sortable-list flex gap-4",children:k.map((s,n)=>{const t=A===n,o=A===n+1&&n===k.length-1;return e.jsxs("div",{className:"flex items-center gap-4",children:[t&&e.jsx("div",{className:"insertion-indicator w-1 h-16 bg-purple-500 rounded-full animate-pulse"}),e.jsx("div",{ref:oe[s.id],className:"sortable-item bg-white p-8 rounded shadow cursor-move hover:shadow-md transition-shadow flex items-center justify-center min-w-[100px]",children:e.jsx("span",{className:"text-2xl font-bold",children:s.text})}),o&&e.jsx("div",{className:"insertion-indicator w-1 h-16 bg-purple-500 rounded-full animate-pulse"})]},s.id)})})})]}),e.jsxs("div",{className:"library-info bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Library Features"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Framework Agnostic:"})," Core library works with any framework"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dropzones:"})," Define multiple drop targets (like Kanban boards)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sorting:"})," Automatic position calculation for vertical and horizontal lists"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Snapping:"})," Configurable snap-to-grid and snap-to-elements"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Touch Support:"})," Full mobile and tablet support"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Auto-scroll:"})," Scroll when dragging near viewport edges"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Type-safe:"})," Full TypeScript support with comprehensive types"]})]}),e.jsxs("div",{className:"usage-example mt-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Basic Usage"}),e.jsx("pre",{className:"bg-gray-800 text-gray-100 p-4 rounded overflow-x-auto text-sm",children:`import { DragDropManager } from '@/lib/modules/dnd';

const manager = new DragDropManager({
  snap: { enabled: true, threshold: 10 },
  sort: { enabled: true, orientation: 'vertical' }
}, {
  onDrop: (event) => {
    console.log('Dropped:', event);
  }
});

manager.registerDraggable('item-1', element, { data });
manager.registerDropZone('zone-1', zoneElement);`})]})]})]})]})}export{ge as DragAndDropDemoPage};
